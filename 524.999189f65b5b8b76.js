(self.webpackChunklwb=self.webpackChunklwb||[]).push([[524],{5701:(lt,$,i)=>{"use strict";i.d($,{a:()=>W});var t=i(7057),a=i(5826),e=i(3097),s=i(2432),_=i(3089),V=i(7451);let W=(()=>{class Y{constructor(l,c,U){this.router=l,this.dataService=c,this.roleService=U}canActivate(l,c){return(0,t.a)([this.dataService.curr_user$,this.roleService.allowedUrls$]).pipe((0,a.U)(([U,B])=>{if(U&&U.designation_code&&B.findIndex(w=>w===c.url)>-1)return!0;{const w=this.router.parseUrl("/index");return this.dataService.login_err_message$.next("You tried to access unauthorized page."),w}}))}}return Y.\u0275fac=function(l){return new(l||Y)(e.LFG(s.F0),e.LFG(_.D),e.LFG(V.N))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})()},5962:(lt,$,i)=>{"use strict";i.d($,{N:()=>s});var t=i(9211),a=i(3097),e=i(3089);let s=(()=>{class _{constructor(W,Y){this.dataService=W,this.fb=Y}get mark_lists(){return this.schemeForm.get("mark_lists")}deleteMark_lists(W,Y,N){let l={attachment_id:Y,storage_name:N};l.attachment_id&&l.storage_name?this.dataService.deleteAttachmentDoc(l).subscribe(c=>{"Deleted successfully."==c.message&&this.mark_lists.removeAt(W)}):this.mark_lists.removeAt(W)}addAnother(){this.mark_lists.push(this.fb.group({mark_list_no:[null,[t.kI.required,t.kI.pattern("[0-9A-Za-z]{16}")]],attachment_id:[null,[t.kI.required]],display_name:[null,[t.kI.required]],storage_name:[null,[t.kI.required]],mark_list_file:[null,[t.kI.required]]}))}duplicateMarkList(W){for(let Y=0;Y<W.length;Y++)for(let N=1;N<W.length;N++)if(Y!=N&&W.at(Y).get("mark_list_no").value===W.at(N).get("mark_list_no").value)return alert("duplicate mark list details!"),null}}return _.\u0275fac=function(W){return new(W||_)(a.LFG(e.D),a.LFG(t.QS))},_.\u0275prov=a.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},9981:(lt,$,i)=>{"use strict";i.d($,{C:()=>V});var t=i(3329),a=i(7999),e=i(3097),s=i(4321),_=i(3089);let V=(()=>{class W{constructor(N,l){this.dialog=N,this.dataService=l,this.progressInfo=0,this.isLoading=!1}onFileSelected(N,l,c,U,B,R){this.isLoading=!0;const w=N.target.files;let I,P=new FormData;if(w.length>0){if(I=w[0],"application/pdf"!=I.type)return void alert("Only Pdf Files are Allowed !");if(!(I.size/1048576<=1))return void alert("File size should not be more than 1MB");P.append("thumbnail",I),P.append("file",I,I.name),P.append("id","2"),P.append("tz",(new Date).toISOString())}U.id?this.dataService.Upload(P).subscribe(M=>{try{if(M.type===t.dt.UploadProgress&&(this.progressInfo=Math.round(100*M.loaded/M.total)),M.type==t.dt.Response){const K=Object.assign({});K.firm_id=c.id,K.claim_id=U?.id,K.doc_type=R,K.file_name=I.name,K.file_type=I.type,K.file_size=Number((I.size/1024).toFixed(0)),K.storage_name=M.body.file_name,this.dataService.saveClaimAttachments(K).subscribe(Z=>{if("Attachment saved successfully."==Z.message){const k=B.get("mark_lists");k.controls[l].get("attachment_id").setValue(Z.rows[0].id),k.controls[l].get("display_name").setValue(I.name),k.controls[l].get("storage_name").setValue(M.body.file_name),this.isLoading=!1}})}}catch{alert("Please try again.")}}):alert("Document Uploading required claim id."),this.isLoading=!1}show(N){this.dialog.open(a.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:N}}).afterClosed().subscribe(U=>{})}}return W.\u0275fac=function(N){return new(N||W)(e.LFG(s.uw),e.LFG(_.D))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})()},3936:(lt,$,i)=>{"use strict";i.d($,{v:()=>b});var t=i(3097),a=i(9211),e=i(4931),s=i(8887),_=i(4321),V=i(3089),W=i(2432),Y=i(4209),N=i(7804),l=i(7698),c=i(8977),U=i(3259),B=i(7333),R=i(9741),w=i(9059),P=i(7495),I=i(6672),M=i(613),K=i(4014);function Z(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",12),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.name(n.schemeForm.get("acc_bank_acc_name")),t.oJD)}}function k(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",12),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.bank_ac_no(n.schemeForm.get("acc_bank_acc_no")),t.oJD)}}function y(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",12),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.bank_ifsc(n.schemeForm.get("acc_ifsc")),t.oJD)}}function T(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.saveClaimDetails("D"))}),t._uU(1," Save "),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("disabled",n.loading||n.schemeForm.invalid)}}function O(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.saveClaimDetails("CLR"))}),t._uU(1," Update "),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("disabled",n.loading||n.schemeForm.invalid)}}function A(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.addBankMaster())}),t._uU(1," Save Bank Details "),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("disabled",n.loading||n.schemeForm.invalid)}}function E(r,p){1&r&&t._UZ(0,"mat-spinner",22),2&r&&t.Q6J("diameter",30)}function h(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t.YNc(2,T,2,1,"button",15),t.YNc(3,O,2,1,"button",15),t.YNc(4,A,2,1,"button",16),t.qZA(),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.isShowGetIfsc=!0)}),t._uU(6,"Reset"),t.qZA(),t.TgZ(7,"button",18),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.onClickGetDetails())}),t._uU(8," Get Bank Details "),t.qZA(),t.YNc(9,E,1,1,"mat-spinner",19),t.qZA()}if(2&r){const n=t.oxw();t.xp6(1),t.Q6J("matTooltipDisabled",n.schemeForm.valid),t.xp6(1),t.Q6J("ngIf","APPS"==n.user.designation_code&&"D"==n.claim_details.status),t.xp6(1),t.Q6J("ngIf","APPS"==n.user.designation_code&&"CLI"==n.claim_details.status),t.xp6(1),t.Q6J("ngIf","APPS"!=n.user.designation_code),t.xp6(5),t.Q6J("ngIf",n.get_bank_loading)}}let b=(()=>{class r{constructor(n,o,m,u,C){this.dialog=n,this.fb=o,this.dataService=m,this.router=u,this.err=C,this.loading=!1,this.get_bank_loading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.hideBankDetailsComponent=new t.vpe,this.schemeForm=this.fb.group({acc_bank_acc_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$")]],acc_bank_acc_no:[null,[a.kI.required,a.kI.pattern("[0-9]+"),a.kI.minLength(11),a.kI.maxLength(16)]],acc_ifsc:[null,[a.kI.required,a.kI.pattern("([A-Za-z]{4})([A-Za-z0-9]{7})")]],acc_bank_name:[null,a.kI.required],acc_bank_branch:[null,a.kI.required]}),this.refreshToken$=new e.X(void 0),this.isShowGetIfsc=!0,this.ifscCode=""}ngOnInit(){this.user=this.dataService.curr_user$.value,this.schemeForm.get(["acc_bank_name"]).disable(),this.schemeForm.get(["acc_bank_branch"]).disable(),this.isShowGetIfsc=!0}ngAfterViewInit(){}draftClaimForm(){this.schemeForm.patchValue({acc_bank_acc_name:this.claim_details?.acc_bank_acc_name,acc_bank_acc_no:this.claim_details?.acc_bank_acc_no,acc_ifsc:this.claim_details?.acc_ifsc}),this.schemeForm.get(["acc_ifsc"]).value&&this.onClickGetDetails()}ngOnChanges(n){this.claimCode=localStorage.getItem("claimCode"),this.claim_details&&(this.draftClaimForm(),this.claim_details.e_name&&this.claim_details.dp_name&&!this.claim_details.acc_bank_acc_name&&(this.schemeForm.patchValue("NAT_D_AST"==this.claimCode||"AC_D_AST"==this.claimCode?{acc_bank_acc_name:this.claim_details.dp_name}:{acc_bank_acc_name:this.claim_details.e_name}),this.schemeForm.updateValueAndValidity({emitEvent:!0}))),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity())}onFileSelected(n){}saveClaimDetails(n){if("S"==n)return this.router.navigate(["/apps/my-claims"]);{let o;this.loading=!0,o=Object.assign({},this.schemeForm.value),o.user_id=this.dataService.curr_user$.value.id,o.firm_id=this.firm.id,o.scheme_code=this.claimCode,o.status=n,this.claim_details&&(this.claim_details.acc_bank_acc_name=o.acc_bank_acc_name,this.claim_details.acc_bank_acc_no=o.acc_bank_acc_no,this.claim_details.acc_ifsc=o.acc_ifsc,this.claim_details.status=o.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:o).subscribe(m=>{("Claim Details are Saved Successfully."==m.message||"Claim Details are Updated Successfully."==m.message)&&(this.claim_id=m.id,this.claimEvent.emit(this.claim_id)),this.loading=!1})}}onClickGetDetails(){if(this.isShowGetIfsc=!1,this.get_bank_loading=!0,this.ifscCode=this.schemeForm.get(["acc_ifsc"]).value,!this.ifscCode)return;let n;this.dataService.getBankBranchUsingAPI({code:this.ifscCode}).subscribe(o=>{if("Bank/Brach details successfully received using API."===o.message){const m=[];o.imps&&m.push("IMPS"),o.neft&&m.push("NEFT"),o.rtgs&&m.push("RTGS"),o.upi&&m.push("UPI"),n={bank_code:o.bank_code,bank_name:o.bank,code:o.ifsc,name:o.branch,address:o.address,remarks:m.join(", ")},this.isBankBranchCodeExist(n),this.schemeForm.patchValue({acc_ifsc:o.ifsc,acc_bank_name:o.bank,acc_bank_branch:o.branch})}else this.isShowGetIfsc=!0;this.get_bank_loading=!1})}saveBankBranchInMaster(n){this.dataService.saveBankBranch(n).subscribe(o=>{})}isBankBranchCodeExist(n){this.dataService.isBankBranchCodeExist({ifsc:n.code}).subscribe(o=>{0==o&&this.saveBankBranchInMaster(n)})}addBankMaster(){this.dataService.saveLwbBankAcc(this.schemeForm.value).subscribe(n=>{"Bank Details are saved successfully."===n.message?(alert("Bank Details are Saved Successfully.\n Kindly select the added bank on a drop down box."),this.hideBankDetailsComponent.emit()):alert("Bank details are NOT saved!\n please make sure the given data is duplicate or not.")})}getIfscValidation(n){this.schemeForm.get("acc_ifsc").invalid&&(this.schemeForm.get("acc_bank_name").reset(),this.schemeForm.get("acc_bank_branch").reset())}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.D),t.Y36(W.F0),t.Y36(Y.E))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-bank-details"]],viewQuery:function(n,o){if(1&n&&t.Gf(s.NW,5),2&n){let m;t.iGM(m=t.CRH())&&(o.paginator=m.first)}},inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent",hideBankDetailsComponent:"hideBankDetailsComponent"},features:[t.TTD],decls:31,vars:5,consts:[[3,"formGroup"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","acc_bank_acc_name","matInput","","placeholder","Account Holder Name"],[4,"ngIf"],["formControlName","acc_bank_acc_no","matInput","","maxlength","16","placeholder","Account Number","type","text"],["formControlName","acc_ifsc","matInput","","maxlength","11","placeholder","IFSC Code",3,"change"],["formControlName","acc_bank_name","matInput","","maxlength","500","placeholder","Bank Name"],["formControlName","acc_bank_branch","matInput","","maxlength","500","placeholder","Branch of the Bank"],["matSuffix",""],["dir","rtl","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","reset",3,"click"],["color","accent","mat-raised-button","","type","button",3,"click"],[3,"diameter",4,"ngIf"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["color","primary","mat-raised-button","","type","button",3,"disabled","click"],[3,"diameter"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0)(1,"mat-card",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Account Holder."),t.qZA(),t._UZ(6,"input",4),t.YNc(7,Z,2,1,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Account Number"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,k,2,1,"mat-error",5),t.qZA()(),t.TgZ(13,"div",2)(14,"mat-form-field",3)(15,"mat-label"),t._uU(16,"Bank's IFSC code"),t.qZA(),t.TgZ(17,"input",7),t.NdJ("change",function(u){return o.getIfscValidation(u)}),t.qZA(),t.YNc(18,y,2,1,"mat-error",5),t.qZA(),t.TgZ(19,"mat-form-field",3)(20,"mat-label"),t._uU(21,"Name of the Bank"),t.qZA(),t._UZ(22,"input",8),t.qZA()(),t.TgZ(23,"div",2)(24,"mat-form-field",3)(25,"mat-label"),t._uU(26,"Branch of the Bank"),t.qZA(),t._UZ(27,"input",9),t.TgZ(28,"mat-icon",10),t._uU(29,"account_balance"),t.qZA()()(),t.YNc(30,h,10,5,"div",11),t.qZA()()),2&n){let m,u,C;t.Q6J("formGroup",o.schemeForm),t.xp6(7),t.Q6J("ngIf",null==(m=o.schemeForm.get("acc_bank_acc_name"))?null:m.invalid),t.xp6(5),t.Q6J("ngIf",null==(u=o.schemeForm.get("acc_bank_acc_no"))?null:u.invalid),t.xp6(6),t.Q6J("ngIf",null==(C=o.schemeForm.get("acc_ifsc"))?null:C.invalid),t.xp6(12),t.Q6J("ngIf","CLI"==(null==o.claim_details?null:o.claim_details.status)&&1==o.isRemarks||"CLI"!=(null==o.claim_details?null:o.claim_details.status))}},dependencies:[N.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,l.Lv,c.lW,U.a8,B.TO,B.KE,B.hX,B.R9,R.Hw,w.Nt,P.Ou,I.Ic,M.gM,K.xw,K.SQ,K.yH]}),r})()},7233:(lt,$,i)=>{"use strict";i.d($,{q:()=>ut});var t=i(3097),a=i(9211),e=i(4321),s=i(3089),_=i(2432),V=i(4209),W=i(7804),Y=i(8521),N=i(7698),l=i(8977),c=i(3259),U=i(6822),B=i(7333),R=i(9741),w=i(9059),P=i(7495),I=i(7018),M=i(6672),K=i(613),Z=i(4014);function k(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.name(v.schemeForm.get("dp_name")),t.oJD)}}function y(H,ot){if(1&H&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&H){const v=ot.$implicit;t.Q6J("value",v.code),t.xp6(1),t.Oqu(v.name)}}function T(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.onlyReq(v.schemeForm.get("dp_relationship")),t.oJD)}}function O(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.name(v.schemeForm.get("inst_name")),t.oJD)}}function A(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.mobNo(v.schemeForm.get("inst_contact_no")),t.oJD)}}function E(H,ot){if(1&H&&(t.TgZ(0,"div")(1,"mat-option",22),t._uU(2),t.qZA()()),2&H){const v=ot.$implicit;t.xp6(1),t.Q6J("value",v.code),t.xp6(1),t.Oqu(v.name)}}function h(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.onlyReq(v.schemeForm.get("dp_gender")),t.oJD)}}function b(H,ot){if(1&H&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&H){const v=ot.$implicit;t.Q6J("value",v.code),t.xp6(1),t.Oqu(v.name)}}function r(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.onlyReq(v.schemeForm.get("curr_class_studied")),t.oJD)}}function p(H,ot){if(1&H&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&H){const v=ot.$implicit;t.Q6J("value",v.code),t.xp6(1),t.Oqu(v.name)}}function n(H,ot){1&H&&(t.TgZ(0,"mat-error"),t._uU(1," Maximum of "),t.TgZ(2,"b"),t._uU(3,"6 Subjects"),t.qZA(),t._uU(4," is reached. "),t.qZA())}function o(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"b"),t._uU(2,"*"),t.qZA(),t._uU(3,"Required "),t.qZA())}function m(H,ot){if(1&H){const v=t.EpF();t.TgZ(0,"div",23)(1,"mat-form-field",24)(2,"mat-label"),t._uU(3,"Select any of the 6 subjects."),t.qZA(),t.TgZ(4,"mat-select",25),t.NdJ("selectionChange",function(Q){t.CHM(v);const j=t.oxw();return t.KtG(j.onValueChange(Q))}),t.YNc(5,p,2,2,"mat-option",8),t.qZA(),t.TgZ(6,"mat-hint"),t._uU(7,"Note: Only "),t.TgZ(8,"b"),t._uU(9,"6 Subjects"),t.qZA(),t._uU(10," are allowed."),t.qZA(),t.YNc(11,n,5,0,"mat-error",6),t.YNc(12,o,4,0,"mat-error",6),t.qZA()()}if(2&H){const v=t.oxw();let G,Q;t.xp6(5),t.Q6J("ngForOf",v.subjects),t.xp6(6),t.Q6J("ngIf",null==(G=v.schemeForm.get("qb_subjects"))?null:G.hasError("invalidselection")),t.xp6(1),t.Q6J("ngIf",null==(Q=v.schemeForm.get("qb_subjects"))?null:Q.hasError("required"))}}function u(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.address(v.schemeForm.get("inst_address")),t.oJD)}}function C(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.sixteenDigitAlphaNumeric(v.schemeForm.get("bonafide_cert_no")),t.oJD)}}function J(H,ot){if(1&H&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",21),t.qZA()),2&H){const v=t.oxw();t.xp6(1),t.Q6J("innerHTML",v.err.aadhaarNo(v.schemeForm.get("dp_aadhaar")),t.oJD)}}function it(H,ot){1&H&&t._UZ(0,"mat-spinner",31),2&H&&t.Q6J("diameter",35)}function _t(H,ot){if(1&H){const v=t.EpF();t.TgZ(0,"div",26)(1,"div",27),t.YNc(2,it,1,1,"mat-spinner",28),t.TgZ(3,"button",29),t.NdJ("click",function(){t.CHM(v);const Q=t.oxw();return t.KtG(Q.saveClaimDetails())}),t._uU(4," Save "),t.qZA(),t.TgZ(5,"button",30),t._uU(6,"Reset"),t.qZA()()()}if(2&H){const v=t.oxw();t.xp6(1),t.Q6J("matTooltipDisabled",v.schemeForm.valid),t.xp6(1),t.Q6J("ngIf",v.loading),t.xp6(1),t.Q6J("disabled",v.loading||v.schemeForm.invalid)}}let ut=(()=>{class H{constructor(v,G,Q,j,ct){this.dialog=v,this.fb=G,this.dataService=Q,this.router=j,this.err=ct,this.loading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$"),a.kI.maxLength(45)]],dp_relationship:[null,a.kI.required],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@()]+$"),a.kI.maxLength(50)]],inst_contact_no:[null,[a.kI.required,a.kI.pattern("^\\d{10}$")]],dp_gender:[null,[a.kI.required]],inst_address:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 .,@()]+$"),a.kI.maxLength(255)]],curr_class_studied:[null,a.kI.required],bonafide_cert_no:[null,[a.kI.required,a.kI.pattern("\\w{16}")]],dp_aadhaar:[null,[a.kI.required,a.kI.pattern("^\\d{12}$")]],is_passed_prev_edu:[null,[a.kI.required]],qb_subjects:[null,[a.kI.required]]}),this.sub=[]}get subCtrl(){return this.schemeForm.get("subCtrl")}get curr_class_studied(){return this.schemeForm.get("curr_class_studied")}ngOnInit(){this.getRelationships(),this.getGenders(),this.getEducations(),this.getQBSubjects(),this.changeQbFormControl(null)}ngOnChanges(v){this.claimCode=localStorage.getItem("claimCode"),this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){for(let v=0;v<this.claim_details.qb_subjects?.length;v++)this.sub.push(this.claim_details?.qb_subjects[v].code);this.schemeForm.patchValue({dp_name:this.claim_details.dp_name,dp_relationship:this.claim_details.dp_relationship,dp_gender:this.claim_details.dp_gender,inst_name:this.claim_details.inst_name,inst_contact_no:this.claim_details.inst_contact_no,inst_address:this.claim_details.inst_address,curr_class_studied:this.claim_details.curr_class_studied,bonafide_cert_no:this.claim_details.bonafide_cert_no,dp_aadhaar:this.claim_details.dp_aadhaar,is_passed_prev_edu:this.claim_details.is_passed_prev_edu,qb_subjects:this.sub})}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(v=>{this.dp_relationships=v.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(v=>{this.genders=v.rows})}getEducations(){this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(v=>{this.classStudied=v.rows})}getQBSubjects(){this.dataService.getQBSubjects({class:"12"}).subscribe(v=>{this.subjects=v.rows})}saveClaimDetails(){let G,v="D"==this.claim_details.status?"D":"CLI";if(this.loading=!0,this.schemeForm.get("qb_subjects")?.value.length>6)return this.schemeForm.get("qb_subjects").setErrors({invalidselection:!0}),void alert("Only 6 subjects are allowed!");if("BOOK_ALW"==this.claimCode){let Q=Object.assign({},{curr_class_studied:this.curr_class_studied.value,allowed_schemes:this.claimCode});this.dataService.getEducations(Q).subscribe(j=>{G=j.rows[0].scheme_amt})}setTimeout(Q=>{if("S"==v)return this.router.navigate(["/apps/my-claims"]);{let j;return j=Object.assign({},this.schemeForm.value),j.user_id=this.dataService.curr_user$.value.id,j.firm_id=this.firm.id,j.scheme_code=this.claimCode,j.status=v,j.claim_id=this.claim_details.id,j.claim_amount=G,this.claim_details&&(this.claim_details.dp_name=j.dp_name,this.claim_details.dp_relationship=j.dp_relationship,this.claim_details.dp_gender=j.dp_gender,this.claim_details.inst_name=j.inst_name,this.claim_details.inst_contact_no=j.inst_contact_no,this.claim_details.inst_address=j.inst_address,this.claim_details.curr_class_studied=j.curr_class_studied,this.claim_details.bonafide_cert_no=j.bonafide_cert_no,this.claim_details.dp_aadhaar=j.dp_aadhaar,this.claim_details.is_passed_prev_edu=j.is_passed_prev_edu,this.claim_details.status=j.status,this.claim_details.qb_subjects=j.qb_subjects,this.claim_details.claim_amount=j.claim_amount),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:j).subscribe(ct=>{("Claim Details are Saved Successfully."==ct.message||"Claim Details are Updated Successfully."==ct.message)&&(this.claim_id=ct.id,this.claimEvent.emit(this.claim_id)),this.loading=!1})}},1e3)}changeQbFormControl(v){"BOOK_ALW"===this.claimCode?this.schemeForm.get("qb_subjects").disable():"Q_BANK"===this.claimCode&&"12"==this.schemeForm.get("curr_class_studied").value&&this.schemeForm.get("qb_subjects").enable(),this.schemeForm.get("qb_subjects").updateValueAndValidity()}onChange(v){this.schemeForm.get(["qb_subjects"]);const Q=this.schemeForm.get("qb_subjects");if(v.checked)this.schemeForm.get(["qb_subjects"]).value.length+1==6&&this.schemeForm.get("qb").disable(),Q.push(new a.NI(v.source.value));else{const j=Q.controls.findIndex(ct=>ct.value===v.source.value);Q.removeAt(j)}}check(){this.schemeForm.get(["qb_subjects"])}onValueChange(v){v.value.length>6&&this.schemeForm.get("qb_subjects").setErrors({invalidselection:!0})}}return H.\u0275fac=function(v){return new(v||H)(t.Y36(e.uw),t.Y36(a.QS),t.Y36(s.D),t.Y36(_.F0),t.Y36(V.E))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-book-allowance-and-qb"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:72,vars:15,consts:[[3,"formGroup"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","dp_name","matInput","","maxlength","44","placeholder","Name of the Student"],["matSuffix",""],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","inst_name","matInput","","maxlength","100","placeholder","Name of the Institution"],["formControlName","inst_contact_no","matInput","","placeholder","E.g.9965355882","maxlength","10"],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["formControlName","curr_class_studied",3,"selectionChange"],["class","subject","fxLayout","row",4,"ngIf"],["fxFill",""],["formControlName","inst_address","matInput","","maxlength","1501","placeholder","Address of the Institution"],["formControlName","bonafide_cert_no","matInput","","maxlength","16","placeholder","Enter the Bona-fide Certificate No."],["formControlName","dp_aadhaar","matInput","","placeholder","Enter the Aadhaar No. of Student","maxlength","12"],["formControlName","is_passed_prev_edu"],["dir","rtl","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["fxLayout","row",1,"subject"],["fxFlex",""],["formControlName","qb_subjects","multiple","",3,"selectionChange"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["fxLayout","row","fxLayoutGap","2px","matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],[3,"diameter",4,"ngIf"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["mat-raised-button","","type","reset"],[3,"diameter"]],template:function(v,G){if(1&v&&(t.TgZ(0,"form",0)(1,"mat-card",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.TgZ(7,"mat-icon",5),t._uU(8,"school"),t.qZA(),t.YNc(9,k,2,1,"mat-error",6),t.qZA(),t.TgZ(10,"mat-form-field",3)(11,"mat-select",7)(12,"mat-option"),t._uU(13,"*None*"),t.qZA(),t.YNc(14,y,2,2,"mat-option",8),t.qZA(),t.TgZ(15,"mat-label"),t._uU(16," Relationship to the Employee "),t.qZA(),t.YNc(17,T,2,1,"mat-error",6),t.qZA()(),t.TgZ(18,"div",2)(19,"mat-form-field",3)(20,"mat-label"),t._uU(21,"Name of the Institution"),t.qZA(),t._UZ(22,"input",9),t.YNc(23,O,2,1,"mat-error",6),t.TgZ(24,"mat-icon",5),t._uU(25,"location_city"),t.qZA()(),t.TgZ(26,"mat-form-field",3)(27,"mat-label"),t._uU(28,"Contact No. of the Institution"),t.qZA(),t._UZ(29,"input",10),t.YNc(30,A,2,1,"mat-error",6),t.TgZ(31,"mat-icon",5),t._uU(32,"phone"),t.qZA()()(),t.TgZ(33,"div",2)(34,"mat-form-field",3)(35,"mat-label"),t._uU(36," Gender "),t.qZA(),t.TgZ(37,"mat-select",11),t.YNc(38,E,3,2,"div",12),t.qZA(),t.YNc(39,h,2,1,"mat-error",6),t.qZA(),t.TgZ(40,"mat-form-field",3)(41,"mat-select",13),t.NdJ("selectionChange",function(j){return G.changeQbFormControl(j.value)}),t.TgZ(42,"mat-option"),t._uU(43,"*none*"),t.qZA(),t.YNc(44,b,2,2,"mat-option",8),t.qZA(),t.TgZ(45,"mat-label")(46,"b"),t._uU(47,"Class/Course studying during the current academic year"),t.qZA()(),t.YNc(48,r,2,1,"mat-error",6),t.qZA()(),t.YNc(49,m,13,3,"div",14),t.TgZ(50,"mat-form-field",15)(51,"mat-label"),t._uU(52,"Address of the Institution"),t.qZA(),t._UZ(53,"input",16),t.YNc(54,u,2,1,"mat-error",6),t.TgZ(55,"mat-icon",5),t._uU(56,"edit_location"),t.qZA()(),t.TgZ(57,"div",2)(58,"mat-form-field",3)(59,"mat-label"),t._uU(60,"Enter the Bona-fide Certificate No."),t.qZA(),t._UZ(61,"input",17),t.YNc(62,C,2,1,"mat-error",6),t.qZA(),t.TgZ(63,"mat-form-field",3)(64,"mat-label"),t._uU(65,"Enter the Aadhaar No. of Student"),t.qZA(),t._UZ(66,"input",18),t.YNc(67,J,2,1,"mat-error",6),t.qZA()(),t.TgZ(68,"section")(69,"mat-checkbox",19),t._uU(70," Whether the student was passed in last year examination? "),t.qZA()(),t.YNc(71,_t,7,3,"div",20),t.qZA()()),2&v){let Q,j,ct,rt,pt,tt,mt,L,X;t.Q6J("formGroup",G.schemeForm),t.xp6(9),t.Q6J("ngIf",null==(Q=G.schemeForm.get("dp_name"))?null:Q.invalid),t.xp6(5),t.Q6J("ngForOf",G.dp_relationships),t.xp6(3),t.Q6J("ngIf",null==(j=G.schemeForm.get("dp_relationship"))?null:j.invalid),t.xp6(6),t.Q6J("ngIf",null==(ct=G.schemeForm.get("inst_name"))?null:ct.invalid),t.xp6(7),t.Q6J("ngIf",null==(rt=G.schemeForm.get("inst_contact_no"))?null:rt.invalid),t.xp6(8),t.Q6J("ngForOf",G.genders),t.xp6(1),t.Q6J("ngIf",null==(pt=G.schemeForm.get("dp_gender"))?null:pt.invalid),t.xp6(5),t.Q6J("ngForOf",G.classStudied),t.xp6(4),t.Q6J("ngIf",null==(tt=G.schemeForm.get("curr_class_studied"))?null:tt.invalid),t.xp6(1),t.Q6J("ngIf","12"===(null==G.curr_class_studied?null:G.curr_class_studied.value)&&"BOOK_ALW"!==G.claimCode),t.xp6(5),t.Q6J("ngIf",null==(mt=G.schemeForm.get("inst_address"))?null:mt.invalid),t.xp6(8),t.Q6J("ngIf",null==(L=G.schemeForm.get("bonafide_cert_no"))?null:L.invalid),t.xp6(5),t.Q6J("ngIf",null==(X=G.schemeForm.get("dp_aadhaar"))?null:X.invalid),t.xp6(4),t.Q6J("ngIf","CLI"==(null==G.claim_details?null:G.claim_details.status)&&1==G.isRemarks||"CLI"!=(null==G.claim_details?null:G.claim_details.status))}},dependencies:[W.sg,W.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,Y.ey,N.Lv,l.lW,c.a8,U.oG,B.TO,B.KE,B.bx,B.hX,B.R9,R.Hw,w.Nt,P.Ou,I.gD,M.Ic,K.gM,Z.xw,Z.SQ,Z.s9,Z.yH]}),H})()},696:(lt,$,i)=>{"use strict";i.d($,{g:()=>b});var t=i(3097),a=i(9211),e=i(3089),s=i(2432),_=i(7804),V=i(8977),W=i(7333),Y=i(9059),N=i(4014);function l(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"div",6)(1,"a",7),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(3);return t.KtG(m.toggle(!0))}),t._uU(2,"View All "),t.TgZ(3,"span",8),t._uU(4),t.qZA()()()}if(2&r){const n=t.oxw(3);t.xp6(4),t.Oqu(n.clrfs.length)}}function c(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"div",6)(1,"a",7),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(3);return t.KtG(m.toggle(!1))}),t._uU(2,"View Latest alone"),t.qZA()()}}function U(r,p){if(1&r&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",12)(3,"small")(4,"small")(5,"b"),t._uU(6),t.qZA()()()(),t.TgZ(7,"div")(8,"small")(9,"small"),t._uU(10),t.qZA()()(),t.TgZ(11,"div",13)(12,"div")(13,"small")(14,"small"),t._uU(15,"Time: "),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"date"),t.qZA()()()(),t.TgZ(19,"div")(20,"small")(21,"small"),t._uU(22,"Date: "),t.TgZ(23,"span"),t._uU(24),t.ALo(25,"date"),t.qZA()()()()()(),t.BQk()),2&r){const n=p.$implicit,o=t.oxw(4);t.xp6(1),t.Udp("border",o.rootBorderF(n)),t.xp6(1),t.Udp("background-color",o.headerBgColorF(n))("background-image",o.headerBgImgF(n))("color",o.headerColorF(n)),t.xp6(4),t.AsE("",n.from_designation_code," / ",n.from_user_name,""),t.xp6(4),t.hij(" ",n.remarks," "),t.xp6(1),t.Udp("background-color",o.headerBgColorF(n))("color",o.headerColorF(n)),t.xp6(5),t.Udp("font-weight","bold"),t.xp6(1),t.Oqu(t.xi3(18,21,n.scn_action_ts,"shortTime")),t.xp6(6),t.Udp("font-weight","bold"),t.xp6(1),t.Oqu(t.xi3(25,24,n.scn_action_ts,"dd/MM/YYYY"))}}function B(r,p){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,U,26,27,"ng-container",10),t.qZA()),2&r){const n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.clrfs)}}function R(r,p){if(1&r&&(t.TgZ(0,"div")(1,"div",14)(2,"div",12)(3,"small")(4,"small")(5,"b"),t._uU(6),t.qZA()()()(),t.TgZ(7,"div")(8,"small")(9,"small"),t._uU(10),t.qZA()()(),t.TgZ(11,"div",13)(12,"div")(13,"small")(14,"small"),t._uU(15,"Time: "),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"date"),t.qZA()()()(),t.TgZ(19,"div")(20,"small")(21,"small"),t._uU(22,"Date: "),t.TgZ(23,"span"),t._uU(24),t.ALo(25,"date"),t.qZA()()()()()()()),2&r){const n=p.ngIf,o=t.oxw(4);t.xp6(1),t.Udp("border",o.rootBorderF(n)),t.xp6(1),t.Udp("background-color",o.headerBgColorF(n))("background-image",o.headerBgImgF(n))("color",o.headerColorF(n)),t.xp6(4),t.AsE("",n.from_designation_code," / ",n.from_user_name,""),t.xp6(4),t.hij(" ",n.remarks," "),t.xp6(1),t.Udp("background-color",o.headerBgColorF(n))("color",o.headerColorF(n)),t.xp6(5),t.Udp("font-weight","bold"),t.xp6(1),t.Oqu(t.xi3(18,21,n.scn_action_ts,"shortTime")),t.xp6(6),t.Udp("font-weight","bold"),t.xp6(1),t.Oqu(t.xi3(25,24,n.scn_action_ts,"dd/MM/YYYY"))}}function w(r,p){if(1&r&&(t.TgZ(0,"div",3),t.YNc(1,R,26,27,"div",1),t.qZA()),2&r){const n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.clrfs[n.clrfs.length-1])}}function P(r,p){if(1&r&&(t.TgZ(0,"div",3),t.YNc(1,l,5,1,"div",4),t.YNc(2,c,3,0,"div",4),t.YNc(3,B,2,1,"div",5),t.YNc(4,w,2,1,"div",2),t.qZA()),2&r){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.show_all),t.xp6(1),t.Q6J("ngIf",n.show_all),t.xp6(1),t.Q6J("ngIf",n.show_all),t.xp6(1),t.Q6J("ngIf",!n.show_all)}}function I(r,p){if(1&r&&(t.ynx(0),t.YNc(1,P,5,4,"div",2),t.BQk()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.clrfs.length>0)}}function M(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function K(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Maximum of length "),t.TgZ(2,"b"),t._uU(3,"500"),t.qZA(),t._uU(4," is reached. "),t.TgZ(5,"sup"),t._uU(6,"*"),t.qZA()())}function Z(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Minimum of length "),t.TgZ(2,"b"),t._uU(3,"5"),t.qZA(),t._uU(4," is required. "),t.TgZ(5,"sup"),t._uU(6,"*"),t.qZA()())}function k(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"mat-form-field",19)(1,"mat-label"),t._uU(2," Remarks "),t.qZA(),t.TgZ(3,"input",20),t.NdJ("keyup.enter",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.saveClarification(null))}),t.qZA(),t.YNc(4,M,4,0,"mat-error",1),t.YNc(5,K,7,0,"mat-error",1),t.YNc(6,Z,7,0,"mat-error",1),t.qZA()}if(2&r){const n=t.oxw(2);t.xp6(3),t.Q6J("formControl",n.remarks),t.xp6(1),t.Q6J("ngIf",n.remarks.invalid&&!n.remarks.value),t.xp6(1),t.Q6J("ngIf",n.remarks.hasError("maxlength")),t.xp6(1),t.Q6J("ngIf",n.remarks.hasError("minlength"))}}function y(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.saveClarification("CLI"))}),t._uU(1," Request Clarification "),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("disabled",n.remarks.invalid)}}function T(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(3);return t.KtG(m.saveClarification("V"))}),t._uU(1," Verify "),t.qZA()}if(2&r){const n=t.oxw(3);t.Q6J("disabled",n.remarks.valid)}}function O(r,p){if(1&r&&(t.ynx(0),t.YNc(1,T,2,1,"button",22),t.BQk()),2&r){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf","SO"==n.user.designation_code)}}function A(r,p){if(1&r&&(t.ynx(0),t.TgZ(1,"div",15),t.YNc(2,k,7,4,"mat-form-field",16),t.TgZ(3,"div",17),t.YNc(4,y,2,1,"button",18),t.YNc(5,O,2,1,"ng-container",1),t.qZA()(),t.BQk()),2&r){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",!("R"==(null==n.claim?null:n.claim.status)||"R"==(null==n.firm_est?null:n.firm_est.status)||"A"==(null==n.claim?null:n.claim.status)||"A"==(null==n.firm_est?null:n.firm_est.status))),t.xp6(2),t.Q6J("ngIf","APPS"!=n.user.designation_code),t.xp6(1),t.Q6J("ngIf","PMT_CLR"!=n.action_code)}}function E(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(n);const m=t.oxw(2);return t.KtG(m.saveClarification("CLR"))}),t._uU(1," Clarify "),t.qZA()}if(2&r){const n=t.oxw(2);t.Q6J("disabled",n.remarks.invalid)}}function h(r,p){if(1&r&&(t.ynx(0),t.TgZ(1,"div",24),t.YNc(2,E,2,1,"button",22),t.qZA(),t.BQk()),2&r){const n=t.oxw();t.xp6(2),t.Q6J("ngIf","APPS"==n.user.designation_code)}}let b=(()=>{class r{constructor(n,o){this.dataService=n,this.router=o,this.message=new t.vpe,this.remarks=new a.NI(null,[a.kI.required,a.kI.maxLength(500),a.kI.minLength(5)]),this.isShowVerify=!0}ngOnInit(){this.user=this.dataService.curr_user$.value,this.getClarification()}ngOnChanges(){}getClarification(){const n=Object.assign({});n.firm_id=this.firm_est?.id,n.claim_id=this.claim?.id,n.pmt_id=this.pmt?.id,n.action_code=this.action_code,this.dataService.getVerifications(n).subscribe(o=>{this.clarifications=o.rows,this.dataService.tempSubj$.next(o.ver_screen_count),this.clarifications&&this.clarifications.length>0&&(this.clrfs=this.clarifications,"V"==this.clrfs[this.clrfs.length-1]?.scn_status&&("SO"==this.dataService.curr_user$.value.designation_code||"APPS"==this.dataService.curr_user$.value.designation_code)&&(this.isShowVerify=!1))})}toggle(n){this.show_all=n}rootBorderF(n){return"CLI"==n.scn_status&&(this.rootBorder="1px solid #ffdf9e"),"CLR"==n.scn_status&&(this.rootBorder="1px solid #bce8f1"),"V"==n.scn_status&&(this.rootBorder="1px solid #b9eb90"),this.rootBorder}headerColorF(n){return"CLI"==n.scn_status&&(this.headerColor="#8d5f03"),"CLR"==n.scn_status&&(this.headerColor="#31708f"),"V"==n.scn_status&&(this.headerColor="#3c763d"),this.headerColor}headerBgColorF(n){return"CLI"==n.scn_status&&(this.headerBgColor="#fff2b1"),"CLR"==n.scn_status&&(this.headerBgColor="#d9edf7"),"V"==n.scn_status&&(this.headerBgColor="#dff0d8"),this.headerBgColor}headerBgImgF(n){return"CLI"==n.scn_status&&(this.headerBgImg="linear-gradient(to bottom, #fcf8e3 0%, #f5db5a 100%)"),"CLR"==n.scn_status&&(this.headerBgImg="linear-gradient(to bottom, #d9edf7 0%, #c4e3f3 100%)"),"V"==n.scn_status&&(this.headerBgImg="linear-gradient(to bottom, #dff0d8 0%, #d0e9c6 100%)"),this.headerBgImg}changeClaimStatus(n){this.dataService.updateClaimStatus({status:n,id:this.claim.id}).subscribe(o=>{this.dataService.tempClaimStatus$.next("REC"),this.getClarification()})}updateFirmStatus(n){this.firm_est.status!=n?this.dataService.updateFirmStatus({status:n,id:this.firm_est?.id}).subscribe(o=>{"Firm Details are Updated Successfully."==o.message?(this.firm_est.status=n,this.getClarification()):alert("Problem with firm status")}):this.getClarification()}saveClarification(n){if(null==n&&(n="APPS"==this.dataService.curr_user$.value.designation_code?"CLR":"CLI"),"CLI"==n&&null==this.remarks.value)return void alert("Clarification Request should not be empty");let o={};o.user_id=this.dataService.curr_user$.value?.id,o.firm_id=this.firm_est?.id,o.pmt_id=this.pmt?.id,o.from_designation_code=this.dataService.curr_user$.value.designation_code,o.to_designation_code="APPS"==this.dataService.curr_user$.value.designation_code?"SO":"APPS",o.action_code=this.action_code,o.firm_id=this.firm_est?this.firm_est.id:this.claim.firm_id,this.claim&&(o.claim_id=this.claim.id),o.type=null==this.claim?.id?"F":"C",o.type="PMT_CLR"==this.action_code?"P":o.type,o.remarks="A"==n?null:this.remarks.value,o.scn_status=n,this.dataService.verify(o).subscribe(m=>{if("clarification saved successfully."==m.message){if("PMT_CLR"==this.action_code)return void this.getClarification();"CLI"==n&&"APPS"!=this.dataService.curr_user$.value.designation_code?this.claim?.id?this.changeClaimStatus("CLI"):this.updateFirmStatus("CLI"):"V"==n&&"SO"==this.dataService.curr_user$.value.designation_code?this.claim?.id?this.changeClaimStatus("REC"):this.updateFirmStatus("REC"):"APPS"==this.dataService.curr_user$.value.designation_code&&(this.claim?.id?(this.changeClaimStatus("CLR"),setTimeout(()=>{this.router.navigate(["/apps/my-claims"])},3e3)):(this.updateFirmStatus("CLR"),setTimeout(()=>{this.router.navigate(["/apps/my-ests"])},3e3))),this.getClarification()}})}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(e.D),t.Y36(s.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-clarifications"]],inputs:{action_code:"action_code",firm_est:"firm_est",pmt:"pmt",claim:"claim"},outputs:{message:"message"},features:[t.TTD],decls:4,vars:3,consts:[[1,"flex","flex-col",2,"margin-left","10px"],[4,"ngIf"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["style","cursor: pointer;text-decoration: underline;",4,"ngIf"],["class","flex-col gap-3","fxLayoutGap","5%",4,"ngIf"],[2,"cursor","pointer","text-decoration","underline"],[2,"font-size","xx-small",3,"click"],[1,"badge"],["fxLayoutGap","5%",1,"flex-col","gap-3"],[4,"ngFor","ngForOf"],["fxFlex","","fxLayout","column",2,"font-size","16px","border-radius","4px"],[2,"border-top-left-radius","3px","border-top-right-radius","3px"],[2,"display","flex","justify-content","space-between"],[1,"flex","flex-col",2,"font-size","16px","border-radius","4px"],[1,"flex","flex-col","gap-3"],["class","flex-1",4,"ngIf"],[1,"flex","flex-row","gap-3","justify-center"],["color","accent","mat-stroked-button","",3,"disabled","click",4,"ngIf"],[1,"flex-1"],["matInput","","maxlength","500","placeholder","E.g: Details are updated.","type","text",3,"formControl","keyup.enter"],["color","accent","mat-stroked-button","",3,"disabled","click"],["color","primary","mat-flat-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-flat-button","",3,"disabled","click"],[1,"flex","flex-row","gap-3"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,I,2,1,"ng-container",1),t.YNc(2,A,6,3,"ng-container",1),t.YNc(3,h,3,1,"ng-container",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",o.clrfs),t.xp6(1),t.Q6J("ngIf",o.isShowVerify),t.xp6(1),t.Q6J("ngIf",!("R"==(null==o.claim?null:o.claim.status)||"R"==(null==o.firm_est?null:o.firm_est.status)||"A"==(null==o.claim?null:o.claim.status)||"A"==(null==o.firm_est?null:o.firm_est.status))))},dependencies:[_.sg,_.O5,a.Fj,a.JJ,a.nD,a.oH,V.lW,W.TO,W.KE,W.hX,Y.Nt,N.xw,N.SQ,N.yH,_.uU]}),r})()},7863:(lt,$,i)=>{"use strict";i.d($,{S:()=>E});var t=i(3097),a=i(9211),e=i(4076),s=i.n(e),_=i(4321),V=i(3089),W=i(2432),Y=i(4209),N=i(7804),l=i(8521),c=i(8977),U=i(3259),B=i(6822),R=i(1477),w=i(7333),P=i(9741),I=i(9059),M=i(7018),K=i(6672),Z=i(613),k=i(4014);function y(h,b){if(1&h&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&h){const r=t.oxw();t.xp6(1),t.Q6J("innerHTML",r.err.name(r.schemeForm.get("dp_name")),t.oJD)}}function T(h,b){if(1&h&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&h){const r=b.$implicit;t.Q6J("value",r.code),t.xp6(1),t.Oqu(r.name)}}function O(h,b){if(1&h&&(t.TgZ(0,"div")(1,"mat-option",27),t._uU(2),t.qZA()()),2&h){const r=b.$implicit;t.xp6(1),t.Q6J("value",r.code),t.xp6(1),t.Oqu(r.name)}}function A(h,b){if(1&h){const r=t.EpF();t.TgZ(0,"mat-card-actions",28)(1,"button",29),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",30)(4,"button",31),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&h){const r=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",r.schemeForm.valid),t.xp6(1),t.Q6J("disabled",r.isLoading||r.schemeForm.invalid)}}let E=(()=>{class h{constructor(r,p,n,o,m){this.dialog=r,this.fb=p,this.dataService=n,this.router=o,this.err=m,this.isLoading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$")]],dp_relationship:[null,a.kI.required],dp_gender:[null,a.kI.required],dp_aadhaar:[null,[a.kI.required,a.kI.maxLength(12),a.kI.minLength(12),a.kI.pattern("^\\d+$")]],ct_course_duration_in_mon:[null,[a.kI.required,a.kI.maxLength(3)]],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$"),a.kI.maxLength(100)]],inst_contact_no:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],inst_address:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 ,.@()]+$"),a.kI.maxLength(255)]],ct_inst_is_govt_recognised:[null,a.kI.required],ct_course_completion_cert_no:[null,[a.kI.required,a.kI.maxLength(16)]],cert_issue_date:[null,a.kI.required]})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getGenders(),this.getRelationships()}ngOnChanges(){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.patchValue({dp_name:this.claim_details.dp_name,dp_relationship:this.claim_details.dp_relationship,dp_gender:this.claim_details.dp_gender,dp_aadhaar:this.claim_details.dp_aadhaar,cert_issue_date:this.claim_details.cert_issue_date,ct_course_duration_in_mon:this.claim_details.ct_course_duration_in_mon,inst_name:this.claim_details.inst_name,inst_contact_no:this.claim_details.inst_contact_no,inst_address:this.claim_details.inst_address,ct_inst_is_govt_recognised:this.claim_details.ct_inst_is_govt_recognised,ct_course_completion_cert_no:this.claim_details.ct_course_completion_cert_no})}getGenders(){this.dataService.getGenders({allowed_schemes:"CT_AST"}).subscribe(r=>{this.genders=r.rows})}getRelationships(){this.dataService.getRelationships({allowed_schemes:"CT_AST"}).subscribe(r=>{this.dp_relationships=r.rows})}onFileSelected(r){}saveClaimDetails(){let r="D"==this.claim_details.status?"D":"CLI",p=s()();const n=this.schemeForm.get("cert_issue_date").value;if(p.diff(n,"days")>=90)return this.schemeForm.reset(),void alert("Certificate issued date must be below 3months (90days) to get benefits from this scheme.");if("S"==r)return this.router.navigate(["/apps/my-claims"]);{let m;return this.isLoading=!0,m=Object.assign({},this.schemeForm.value),m.user_id=this.dataService.curr_user$.value.id,m.firm_id=this.firm.id,m.scheme_code=this.claimCode,m.status=r,this.claim_details&&(this.claim_details.dp_name=m.dp_name,this.claim_details.dp_relationship=m.dp_relationship,this.claim_details.dp_gender=m.dp_gender,this.claim_details.dp_aadhaar=m.dp_aadhaar,this.claim_details.ct_course_duration_in_mon=m.ct_course_duration_in_mon,this.claim_details.inst_name=m.inst_name,this.claim_details.inst_contact_no=m.inst_contact_no,this.claim_details.inst_address=m.inst_address,this.claim_details.ct_inst_is_govt_recognised=m.ct_inst_is_govt_recognised,this.claim_details.ct_course_completion_cert_no=m.ct_course_completion_cert_no,this.claim_details.cert_issue_date=m.cert_issue_date,this.claim_details.status=m.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:m).subscribe(u=>{"Claim Details are Saved Successfully."==u.message||"Claim Details are Updated Successfully."==u.message?(this.claim_id=u.id,this.claimEvent.emit(this.claim_id)):alert("claim is not saved"),this.isLoading=!1})}}}return h.\u0275fac=function(r){return new(r||h)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.D),t.Y36(W.F0),t.Y36(Y.E))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-computer-trainings"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:75,vars:7,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","15px"],["fxFlex","50"],["formControlName","dp_name","matInput","","maxlength","50","placeholder","Name of the Student"],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50"],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["formControlName","ct_course_duration_in_mon","matInput","","placeholder","E.g. 3"],["matSuffix",""],["formControlName","cert_issue_date","matInput","","maxlength","16",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","inst_name","matInput","","placeholder","Name of the Tailoring Institute"],["formControlName","inst_contact_no","matInput","","maxlength","10","placeholder","Contact No. of Training Institute"],["fxFill","",1,"example-full-width"],["formControlName","inst_address","matInput","","placeholder","Address of Training Institute"],["formControlName","ct_inst_is_govt_recognised",1,"example-margin"],["fxFill",""],["formControlName","dp_aadhaar","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of the Student"],["fxLayout","row","fxLayoutGap","20px"],["formControlName","ct_course_completion_cert_no","matInput","","maxlength","16","placeholder","Enter the Course Completion Certificate No."],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(r,p){if(1&r&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.YNc(7,y,2,1,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-select",6)(10,"mat-option"),t._uU(11,"*None*"),t.qZA(),t.YNc(12,T,2,2,"mat-option",7),t.qZA(),t.TgZ(13,"mat-label"),t._uU(14," Relationship to the Employee "),t.qZA()()(),t.TgZ(15,"div",2)(16,"mat-form-field",8)(17,"mat-select",9)(18,"mat-option"),t._uU(19,"*none*"),t.qZA(),t.YNc(20,O,3,2,"div",10),t.qZA(),t.TgZ(21,"mat-label"),t._uU(22," Gender "),t.qZA()(),t.TgZ(23,"mat-form-field",3)(24,"mat-label"),t._uU(25,"Duration of the Course in Months"),t.qZA(),t._UZ(26,"input",11),t.TgZ(27,"mat-hint"),t._uU(28,"Only 1 or 2 digit numeric values are allowed."),t.qZA(),t.TgZ(29,"mat-icon",12),t._uU(30,"access_time"),t.qZA()()(),t.TgZ(31,"div",2)(32,"mat-form-field",3)(33,"mat-label"),t._uU(34,"Computer Training Certificate Issued Date"),t.qZA(),t._UZ(35,"input",13)(36,"mat-datepicker-toggle",14)(37,"mat-datepicker",null,15),t.qZA()(),t.TgZ(39,"div",2)(40,"mat-form-field",3)(41,"mat-label"),t._uU(42,"Name of the Training Institute"),t.qZA(),t._UZ(43,"input",16),t.TgZ(44,"mat-hint"),t._uU(45,"Only Govt / Govt Aided Training Centers are Eligible."),t.qZA(),t.TgZ(46,"mat-icon",12),t._uU(47,"business"),t.qZA()(),t.TgZ(48,"mat-form-field",3)(49,"mat-label"),t._uU(50,"Contact No. of Training Institute"),t.qZA(),t._UZ(51,"input",17),t.TgZ(52,"mat-icon",12),t._uU(53,"phone"),t.qZA()()(),t.TgZ(54,"div",2)(55,"mat-form-field",18)(56,"mat-label"),t._uU(57,"Address of Training Institute"),t.qZA(),t._UZ(58,"textarea",19),t.qZA()(),t.TgZ(59,"div",2)(60,"mat-checkbox",20),t._uU(61," Whether the Institute was recognised by the Government "),t.qZA()(),t.TgZ(62,"div",2)(63,"mat-form-field",21)(64,"mat-label"),t._uU(65,"Enter the Aadhaar No. of the Student"),t.qZA(),t._UZ(66,"input",22),t.qZA()(),t.TgZ(67,"mat-card-content",23)(68,"mat-form-field",21)(69,"mat-label"),t._uU(70,"Enter the Course Completion Certificate No."),t.qZA(),t._UZ(71,"input",24),t.TgZ(72,"mat-hint"),t._uU(73,"Only Govt / Govt Aided Training Centers Certificates are accepted."),t.qZA()()(),t.YNc(74,A,6,2,"mat-card-actions",25),t.qZA()()),2&r){const n=t.MAs(38);let o;t.xp6(1),t.Q6J("formGroup",p.schemeForm),t.xp6(6),t.Q6J("ngIf",null==(o=p.schemeForm.get("dp_name"))?null:o.invalid),t.xp6(5),t.Q6J("ngForOf",p.dp_relationships),t.xp6(8),t.Q6J("ngForOf",p.genders),t.xp6(15),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(38),t.Q6J("ngIf","CLI"==(null==p.claim_details?null:p.claim_details.status)&&1==p.isRemarks||"CLI"!=(null==p.claim_details?null:p.claim_details.status))}},dependencies:[N.sg,N.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,l.ey,c.lW,U.a8,U.dn,U.hq,B.oG,R.Mq,R.hl,R.nW,w.TO,w.KE,w.bx,w.hX,w.R9,P.Hw,I.Nt,M.gD,K.Ic,Z.gM,k.xw,k.SQ,k.s9,k.yH]}),h})()},253:(lt,$,i)=>{"use strict";i.d($,{p:()=>b});var t=i(3097),a=i(9211),e=i(3089),s=i(2432),_=i(4209),V=i(7804),W=i(8521),Y=i(8977),N=i(3259),l=i(7333),c=i(9741),U=i(9059),B=i(7495),R=i(7018),w=i(6672),P=i(613),I=i(4014);function M(r,p){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const n=p.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij("",n.district_name," ")}}function K(r,p){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const n=p.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij("",n.taluk_name," ")}}function Z(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Select the Taluk"),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function k(r,p){1&r&&t._UZ(0,"mat-spinner",25)}function y(r,p){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const n=p.$implicit;t.Q6J("value",n.type),t.xp6(1),t.Oqu(n.name)}}function T(r,p){1&r&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose the Panchayat Type. "),t.qZA())}function O(r,p){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const n=p.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.panchayat_name," ")}}function A(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Please Choose Panchayat."),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function E(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.pincode(n.schemeForm.get("dp_postal_code")),t.oJD)}}function h(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"mat-card-actions",27)(1,"button",28),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",29)(4,"button",30),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&r){const n=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",n.schemeForm.valid),t.xp6(1),t.Q6J("disabled",n.isLoading||n.schemeForm.invalid)}}let b=(()=>{class r{constructor(n,o,m,u){this.fb=n,this.dataService=o,this.router=m,this.err=u,this.isLoading=!1,this.vtype=[{type:"V",name:"Village Panchayat"},{type:"T",name:"Town Panchayat"},{type:"M",name:"Municipality Panchayat"}],this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_house_no:[null,[a.kI.required,a.kI.maxLength(500),a.kI.pattern("^[\\w.,() ]+$")]],dp_street_name:[null,[a.kI.required,a.kI.maxLength(500),a.kI.pattern("^[\\w ,.()]*$")]],dp_area:[null,[a.kI.required,a.kI.pattern("^[A-Za-z ,.]*$")]],dp_district_id:[null,a.kI.required],dp_panchayat_type:[null,a.kI.required],dp_panchayat_id:[null,a.kI.required],dp_taluk_id:[null,a.kI.required],dp_landmark:[null,[a.kI.required,a.kI.maxLength(40),a.kI.pattern("^[\\w /&@,.]+$")]],dp_postal_code:[null,[a.kI.required,a.kI.pattern("^[0-9]{6}$")]],dp_latitude:[null,[a.kI.pattern("^-*(\\d{1,3})\\.(\\d{0,6})$")]],dp_longitude:[null,[a.kI.pattern("^-*(\\d{1,3})\\.(\\d{0,6})$")]]})}get dp_district_id(){return this.schemeForm.get("dp_district_id")}get dp_panchayat_type(){return this.schemeForm.get("dp_panchayat_type")}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getDistricts()}ngOnChanges(){this.claim_details&&(this.getDistricts(),this.claim_details.dp_taluk_id&&this.getTaluks(),this.claim_details.dp_panchayat_id&&(this.getPanchayats(),this.claim_details.dp_district_id?this.schemeForm.get("dp_taluk_id").enable():this.schemeForm.get("dp_taluk_id").disable()),null!=this.claim_details.dp_district_id&&null!=this.claim_details.dp_panchayat_type&&null!=this.claim_details.dp_panchayat_id?this.schemeForm.get("dp_panchayat_id").enable():this.schemeForm.get("dp_panchayat_id").disable(),this.draftClaimForm(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.setValue({dp_house_no:this.claim_details?.dp_house_no,dp_street_name:this.claim_details?.dp_street_name,dp_area:this.claim_details?.dp_area,dp_district_id:this.claim_details?.dp_district_id,dp_panchayat_type:this.claim_details?.dp_panchayat_type,dp_panchayat_id:this.claim_details?.dp_panchayat_id,dp_taluk_id:this.claim_details?.dp_taluk_id,dp_landmark:this.claim_details?.dp_landmark,dp_postal_code:this.claim_details?.dp_postal_code,dp_latitude:this.claim_details?.dp_latitude,dp_longitude:this.claim_details?.dp_longitude})}onSelectionChangeDistrict(n,o){n?(this.getTaluks(),this.schemeForm.get("dp_taluk_id").enable()):this.schemeForm.get("dp_taluk_id").disable(),n&&o?(this.getPanchayats(),this.schemeForm.get("dp_panchayat_id").enable()):this.schemeForm.get("dp_panchayat_id").disable(),this.schemeForm.updateValueAndValidity()}getDistricts(){this.dataService.getDistricts({}).subscribe(n=>{this.districts=n.rows})}getTaluks(){this.dataService.getTaluks({district_id:this.dp_district_id.value}).subscribe(n=>{this.taluks=n.rows})}getPanchayats(){this.isLoading=!0,this.dataService.getPanchayats({district_id:this.dp_district_id.value,type:this.dp_panchayat_type.value}).subscribe(n=>{this.panchayats=n.rows,this.panchayats.length<=0&&this.schemeForm.get("dp_panchayat_id")?.disable()}),this.isLoading=!1}onSelectionChangePanchayatType(n,o){n&&o?(this.schemeForm.get("dp_panchayat_id").enable(),this.getPanchayats()):this.schemeForm.get("dp_panchayat_id").disable()}saveClaimDetails(){let n="D"==this.claim_details.status?"D":"CLI";if("S"==n)return this.router.navigate(["/apps/my-claims"]);{let o;return this.isLoading=!0,o=Object.assign({},this.schemeForm.value),o.user_id=this.dataService.curr_user$.value.id,o.firm_id=this.firm.id,o.scheme_code=this.claim_details.scheme_code,o.status=n,o.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.dp_house_no=o.dp_house_no,this.claim_details.dp_street_name=o.dp_street_name,this.claim_details.dp_area=o.dp_area,this.claim_details.dp_district_id=o.dp_district_id,this.claim_details.dp_panchayat_id=o.dp_panchayat_id,this.claim_details.dp_panchayat_type=o.dp_panchayat_type,this.claim_details.dp_taluk_id=o.dp_taluk_id,this.claim_details.dp_landmark=o.dp_landmark,this.claim_details.dp_postal_code=o.dp_postal_code,this.claim_details.dp_latitude=o.dp_latitude,this.claim_details.dp_longitude=o.dp_longitude,this.claim_details.status=o.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:o).subscribe(m=>{("Claim Details are Saved Successfully."==m.message||"Claim Details are Updated Successfully."==m.message)&&(this.claim_id=m.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(a.QS),t.Y36(e.D),t.Y36(s.F0),t.Y36(_.E))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dependent-address-details"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:75,vars:11,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["appearance","outline","fxFill",""],["formControlName","dp_house_no","matInput","","placeholder","E.g.101"],["appearance","outline","fxFlex","50"],["formControlName","dp_area","matInput","","placeholder","Locality / Area"],["formControlName","dp_street_name","matInput","","placeholder","E.g.Periyaar Salai"],["formControlName","dp_district_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_taluk_id"],[4,"ngIf"],["formControlName","dp_panchayat_type",3,"selectionChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["diameter","30",4,"ngIf"],["fxFlex","50"],["formControlName","dp_panchayat_id"],["autocomplete","on","formControlName","dp_landmark","matInput","","placeholder","E.g.Near by Murugan Temple."],["formControlName","dp_postal_code","matInput","","maxlength","6","placeholder","E.g. 609609"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","10px"],["appearance","outline","fxFlex",""],["autocomplete","on","formControlName","dp_latitude","matInput","","placeholder","E.g. 10.956023","type","number"],["autocomplete","on","formControlName","dp_longitude","matInput","","placeholder","E.g. 78.556770","type","number"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"value"],["diameter","30"],[3,"innerHTML"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Flat,House No./Apartment Name"),t.qZA(),t._UZ(6,"input",4),t.qZA()(),t.TgZ(7,"div",2)(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Area/Locality"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Street Name"),t.qZA(),t._UZ(15,"input",7),t.qZA()(),t.TgZ(16,"div",2)(17,"mat-form-field",5)(18,"mat-select",8),t.NdJ("selectionChange",function(){return o.onSelectionChangeDistrict(o.dp_district_id.value,o.dp_panchayat_type.value)}),t.YNc(19,M,2,2,"mat-option",9),t.qZA(),t.TgZ(20,"mat-label")(21,"mat-icon"),t._uU(22," add_location"),t.qZA(),t._uU(23," District "),t.qZA()(),t.TgZ(24,"mat-form-field",5)(25,"mat-select",10)(26,"mat-option"),t._uU(27,"*None*"),t.qZA(),t.YNc(28,K,2,2,"mat-option",9),t.qZA(),t.TgZ(29,"mat-label")(30,"mat-icon"),t._uU(31," add_location"),t.qZA(),t._uU(32," Taluk "),t.qZA(),t.YNc(33,Z,4,0,"mat-error",11),t.qZA()(),t.TgZ(34,"div",2)(35,"mat-form-field",5)(36,"mat-select",12),t.NdJ("selectionChange",function(){return o.onSelectionChangePanchayatType(o.dp_district_id.value,o.dp_panchayat_type.value)}),t.TgZ(37,"mat-option")(38,"div",13),t._uU(39," None "),t.YNc(40,k,1,0,"mat-spinner",14),t.qZA()(),t.YNc(41,y,2,2,"mat-option",9),t.qZA(),t.TgZ(42,"mat-label")(43,"mat-icon"),t._uU(44," add_location"),t.qZA(),t._uU(45," Panchayat Types "),t.qZA(),t.YNc(46,T,4,0,"mat-error",11),t.qZA(),t.TgZ(47,"mat-form-field",15)(48,"mat-label"),t._uU(49,"Panchayat"),t.qZA(),t.TgZ(50,"mat-select",16)(51,"mat-option"),t._uU(52,"None"),t.qZA(),t.YNc(53,O,2,2,"mat-option",9),t.qZA(),t.YNc(54,A,4,0,"mat-error",11),t.qZA()(),t.TgZ(55,"div",2)(56,"mat-form-field",5)(57,"mat-label"),t._uU(58,"Landmark"),t.qZA(),t._UZ(59,"input",17),t.qZA(),t.TgZ(60,"mat-form-field",5)(61,"mat-label"),t._uU(62,"Pin code"),t.qZA(),t._UZ(63,"input",18),t.YNc(64,E,2,1,"mat-error",11),t.qZA()(),t.TgZ(65,"div",19)(66,"mat-form-field",20)(67,"mat-label"),t._uU(68,"Latitude No."),t.qZA(),t._UZ(69,"input",21),t.qZA(),t.TgZ(70,"mat-form-field",20)(71,"mat-label"),t._uU(72,"Longitude No."),t.qZA(),t._UZ(73,"input",22),t.qZA()(),t.YNc(74,h,6,2,"mat-card-actions",23),t.qZA()()),2&n){let m;t.xp6(1),t.Q6J("formGroup",o.schemeForm),t.xp6(18),t.Q6J("ngForOf",o.districts),t.xp6(9),t.Q6J("ngForOf",o.taluks),t.xp6(5),t.Q6J("ngIf",o.schemeForm.get("dp_taluk_id").hasError("required")),t.xp6(7),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngForOf",o.vtype),t.xp6(5),t.Q6J("ngIf",o.schemeForm.get("dp_panchayat_type").hasError("required")),t.xp6(7),t.Q6J("ngForOf",o.panchayats),t.xp6(1),t.Q6J("ngIf",o.schemeForm.get("dp_panchayat_id").hasError("required")),t.xp6(10),t.Q6J("ngIf",null==(m=o.schemeForm.get("dp_postal_code"))?null:m.invalid),t.xp6(10),t.Q6J("ngIf","CLI"==(null==o.claim_details?null:o.claim_details.status)&&1==o.isRemarks||"CLI"!=(null==o.claim_details?null:o.claim_details.status))}},dependencies:[V.sg,V.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.nD,a.sg,a.u,W.ey,Y.lW,N.a8,N.hq,l.TO,l.KE,l.hX,c.Hw,U.Nt,B.Ou,R.gD,w.Ic,P.gM,I.xw,I.SQ,I.Wh,I.s9,I.yH]}),r})()},8042:(lt,$,i)=>{"use strict";i.d($,{_:()=>T});var t=i(3097),a=i(9211),e=i(3089),s=i(2432),_=i(4209),V=i(7804),W=i(8521),Y=i(8977),N=i(3259),l=i(1477),c=i(7333),U=i(9741),B=i(9059),R=i(7018),w=i(6672),P=i(613),I=i(4014);function M(O,A){if(1&O&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&O){const E=A.$implicit;t.Q6J("value",E.code),t.xp6(1),t.Oqu(E.name)}}function K(O,A){if(1&O&&(t.ynx(0),t.TgZ(1,"mat-option",22),t._uU(2),t.qZA(),t.BQk()),2&O){const E=A.$implicit;t.xp6(1),t.Q6J("value",E.code),t.xp6(1),t.Oqu(E.name)}}function Z(O,A){if(1&O&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&O){const E=t.oxw();t.xp6(1),t.Q6J("innerHTML",E.err.email(E.schemeForm.get("dp_email")),t.oJD)}}function k(O,A){if(1&O&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&O){const E=t.oxw();t.xp6(1),t.Q6J("innerHTML",E.err.aadhaarNo(E.schemeForm.get("dp_aadhaar")),t.oJD)}}function y(O,A){if(1&O){const E=t.EpF();t.TgZ(0,"mat-card-actions",24)(1,"button",25),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",26)(4,"button",27),t.NdJ("click",function(){t.CHM(E);const b=t.oxw();return t.KtG(b.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&O){const E=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",E.schemeForm.valid),t.xp6(1),t.Q6J("disabled",E.isLoading||E.schemeForm.invalid)}}let T=(()=>{class O{constructor(E,h,b,r){this.fb=E,this.dataService=h,this.router=b,this.err=r,this.isLoading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$")]],dp_relationship:[null,a.kI.required],dp_gender:[null,a.kI.required],dp_dob:[null,a.kI.required],dp_mobile:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],dp_email:[null,[a.kI.required,a.kI.email]],dp_phone:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],dp_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]],dp_legal_heir_cert_no:[null,[a.kI.required,a.kI.pattern("^\\w{16}$")]]})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getGenders()}ngOnChanges(E){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.patchValue({dp_name:this.claim_details?.dp_name,dp_relationship:this.claim_details?.dp_relationship,dp_gender:this.claim_details?.dp_gender,dp_dob:this.claim_details?.dp_dob,dp_mobile:this.claim_details?.dp_mobile,dp_email:this.claim_details?.dp_email,dp_phone:this.claim_details?.dp_phone,dp_aadhaar:this.claim_details?.dp_aadhaar,dp_legal_heir_cert_no:this.claim_details?.dp_legal_heir_cert_no})}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(E=>{this.dp_relationships=E.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(E=>{this.genders=E.rows})}saveClaimDetails(){let E="D"==this.claim_details.status?"D":"CLI";if("S"==E)return this.router.navigate(["/apps/my-claims"]);{let h;return this.isLoading=!0,h=Object.assign({},this.schemeForm.value),h.user_id=this.dataService.curr_user$.value.id,h.firm_id=this.firm.id,h.scheme_code=this.claimCode,h.status=E,this.claim_details&&(this.claim_details.dp_name=h.dp_name,this.claim_details.dp_relationship=h.dp_relationship,this.claim_details.dp_dob=h.dp_dob,this.claim_details.dp_gender=h.dp_gender,this.claim_details.dp_mobile=h.dp_mobile,this.claim_details.dp_email=h.dp_email,this.claim_details.dp_phone=h.dp_phone,this.claim_details.dp_aadhaar=h.dp_aadhaar,this.claim_details.dp_legal_heir_cert_no=h.dp_legal_heir_cert_no,this.claim_details.status=h.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:h).subscribe(b=>{("Claim Details are Saved Successfully."==b.message||"Claim Details are Updated Successfully."==b.message)&&(this.claim_id=b.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}onFileSelected(E){}}return O.\u0275fac=function(E){return new(E||O)(t.Y36(a.QS),t.Y36(e.D),t.Y36(s.F0),t.Y36(_.E))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-dependent-details"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:62,vars:8,consts:[[3,"formGroup"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["autocomplete","on","formControlName","dp_name","matInput","","placeholder","Name of the Dependent"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_dob","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50"],["autocomplete","on","formControlName","dp_mobile","matInput","","maxlength","10","placeholder","Mobile Number"],["matSuffix",""],["autocomplete","on","formControlName","dp_phone","matInput","","maxlength","10","placeholder","Landline Number"],["appearance","outline","fxFill",""],["autocomplete","on","formControlName","dp_email","matInput","","name","email","placeholder","name@Example.com","required",""],[4,"ngIf"],["autocomplete","on","formControlName","dp_legal_heir_cert_no","matInput","","maxlength","16","placeholder","Enter the Legal Heir Certificate Number"],["autocomplete","on","formControlName","dp_aadhaar","matInput","","placeholder","Enter the Aadhaar No.","maxlength","12"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"value"],[3,"innerHTML"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(E,h){if(1&E&&(t.TgZ(0,"form",0)(1,"mat-card",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Dependent"),t.qZA(),t._UZ(6,"input",4),t.qZA(),t.TgZ(7,"mat-form-field",3)(8,"mat-select",5)(9,"mat-option"),t._uU(10,"*None*"),t.qZA(),t.YNc(11,M,2,2,"mat-option",6),t.qZA(),t.TgZ(12,"mat-label"),t._uU(13," Relationship with deceased Employee "),t.qZA()()(),t.TgZ(14,"div",2)(15,"mat-form-field",3)(16,"mat-label"),t._uU(17,"Date of Birth"),t.qZA(),t._UZ(18,"input",7)(19,"mat-datepicker-toggle",8)(20,"mat-datepicker",null,9),t.qZA(),t.TgZ(22,"mat-form-field",3)(23,"mat-select",10)(24,"mat-option"),t._uU(25,"*None*"),t.qZA(),t.YNc(26,K,3,2,"ng-container",11),t.qZA(),t.TgZ(27,"mat-label"),t._uU(28," Gender "),t.qZA()()(),t.TgZ(29,"div",2)(30,"mat-form-field",12)(31,"mat-label"),t._uU(32,"Mobile Number"),t.qZA(),t._UZ(33,"input",13),t.TgZ(34,"mat-icon",14),t._uU(35,"phone_android"),t.qZA()(),t.TgZ(36,"mat-form-field",12)(37,"mat-label"),t._uU(38,"Phone Number"),t.qZA(),t._UZ(39,"input",15),t.TgZ(40,"mat-icon",14),t._uU(41,"phone"),t.qZA()()(),t.TgZ(42,"mat-form-field",16)(43,"mat-label"),t._uU(44,"Email Address"),t.qZA(),t._UZ(45,"input",17),t.TgZ(46,"mat-icon",14),t._uU(47,"mail_outline"),t.qZA(),t.YNc(48,Z,2,1,"mat-error",18),t.qZA(),t.TgZ(49,"div",2)(50,"mat-form-field",3)(51,"mat-label"),t._uU(52,"Enter the Legal Heir Certificate Number"),t.qZA(),t._UZ(53,"input",19),t.qZA(),t.TgZ(54,"mat-form-field",3)(55,"mat-label"),t._uU(56,"Enter the Aadhaar No. Dependent"),t.qZA(),t._UZ(57,"input",20),t.YNc(58,k,2,1,"mat-error",18),t.qZA()(),t._UZ(59,"div",2)(60,"div",2),t.YNc(61,y,6,2,"mat-card-actions",21),t.qZA()()),2&E){const b=t.MAs(21);let r,p;t.Q6J("formGroup",h.schemeForm),t.xp6(11),t.Q6J("ngForOf",h.dp_relationships),t.xp6(7),t.Q6J("matDatepicker",b),t.xp6(1),t.Q6J("for",b),t.xp6(7),t.Q6J("ngForOf",h.genders),t.xp6(22),t.Q6J("ngIf",null==(r=h.schemeForm.get("dp_email"))?null:r.invalid),t.xp6(10),t.Q6J("ngIf",null==(p=h.schemeForm.get("dp_aadhaar"))?null:p.invalid),t.xp6(3),t.Q6J("ngIf","CLI"==(null==h.claim_details?null:h.claim_details.status)&&1==h.isRemarks||"CLI"!=(null==h.claim_details?null:h.claim_details.status))}},dependencies:[V.sg,V.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,W.ey,Y.lW,N.a8,N.hq,l.Mq,l.hl,l.nW,c.TO,c.KE,c.hX,c.R9,U.Hw,B.Nt,R.gD,w.Ic,P.gM,I.xw,I.SQ,I.s9,I.yH]}),O})()},6655:(lt,$,i)=>{"use strict";i.d($,{K:()=>I});var t=i(3329),a=i(4795),e=i(7999),s=i(9211),_=i(3097),V=i(3089),W=i(4321),Y=i(5910),N=i(7804),l=i(8977),c=i(9741),U=i(6950);function B(M,K){if(1&M){const Z=_.EpF();_.ynx(0),_.TgZ(1,"button",8),_.NdJ("click",function(){_.CHM(Z),_.oxw();const y=_.MAs(2);return y.value=null,_.KtG(y.click())}),_.TgZ(2,"mat-icon"),_._uU(3,"attach_file"),_.qZA()(),_.BQk()}}function R(M,K){if(1&M&&_._UZ(0,"mat-progress-bar",9),2&M){const Z=_.oxw();_.Q6J("value",Z.uploadProgress)}}function w(M,K){if(1&M){const Z=_.EpF();_.TgZ(0,"mat-icon",10),_.NdJ("click",function(){_.CHM(Z);const y=_.oxw();return _.KtG(y.cancelUpload())}),_._uU(1," delete_forever "),_.qZA()}}function P(M,K){if(1&M){const Z=_.EpF();_.ynx(0),_.TgZ(1,"button",11),_.NdJ("click",function(){_.CHM(Z);const y=_.oxw();return _.KtG(y.showDocument(y.storage_name))}),_.TgZ(2,"mat-icon"),_._uU(3,"remove_red_eye"),_.qZA()(),_.TgZ(4,"button",12),_.NdJ("click",function(){_.CHM(Z);const y=_.oxw();return _.KtG(y.deleteAttachmentDoc())}),_.TgZ(5,"mat-icon"),_._uU(6,"delete"),_.qZA()(),_.BQk()}}let I=(()=>{class M{constructor(Z,k,y){this.dataService=Z,this.dialog=k,this.snackBar=y,this.progressInfo=0,this.loading=!1,this.uploadProgress=0,this.fileName="",this.storage_name="",this.attachment_id=null,this.doc=new s.NI(null)}ngOnInit(){this.claimCode=localStorage.getItem("claimCode")}ngOnChanges(Z){console.log("change",Z),console.log("issreq",this.isReq),this.isReq?this.doc.setValidators(s.kI.required):this.doc.removeValidators(s.kI.required),this.doc.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}onFileSelected(Z){const k=Z.target.files[0];if(k){if("application/pdf"!=k.type)return void this.snackBar.open("Please select a pdf file!","\u{1f44d}",{duration:4e3});if(k.size/1048576<=1){this.fileName=k.name;const y=new FormData;y.append("thumbnail",k),y.append("file",k,k.name),y.append("id","2"),y.append("tz",(new Date).toISOString());const T=this.dataService.Upload(y).pipe((0,a.x)(()=>this.reset()));this.uploadSub=T.subscribe(O=>{try{if(O.type==t.dt.UploadProgress&&(this.uploadProgress=Math.round(100*O.loaded/O.total)),O.type==t.dt.Response){const A=Object.assign({});A.firm_id=this.firm.id,A.doc_type=this.doc_type,A.file_name=k.name,A.file_type=k.type,A.file_size=Number((k.size/1024).toFixed(0)),A.storage_name=O.body.file_name,this.storage_name=O.body.file_name,this.dataService.saveAttachment(A).subscribe(E=>{"Attachment saved successfully."==E.message&&(this.attachment_id=E.rows[0].id)})}}catch{alert("Please try again.")}})}else this.snackBar.open("File size should not be more than 1MB.","\u{1f44d}",{duration:4e3})}}cancelUpload(){this.fileName=null,this.attachment_id=null,this.storage_name=null,this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=null,this.uploadSub=null}showDocument(Z){this.dialog.open(e.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:Z}}).afterClosed().subscribe(T=>{})}deleteAttachmentDoc(){this.dataService.deleteAttachmentDoc({attachment_id:this.attachment_id,storage_name:this.storage_name,code:this.doc_type,firm_id:this.firm.id}).subscribe(k=>{"Deleted successfully."==k.message&&(this.fileName=null,this.attachment_id=null,this.storage_name=null,this.reset(),this.snackBar.open("Deleted Successfully.","",{duration:3e3}))})}}return M.\u0275fac=function(Z){return new(Z||M)(_.Y36(V.D),_.Y36(W.uw),_.Y36(Y.ux))},M.\u0275cmp=_.Xpm({type:M,selectors:[["app-doc"]],inputs:{firm:"firm",claim_details:"claim_details",requiredFileType:"requiredFileType",display_name:"display_name",doc_type:"doc_type",isReq:"isReq"},features:[_.TTD],decls:10,vars:6,consts:[[1,"flex-container"],["type","file",1,"file-input",3,"formControl","change"],["fileUpload",""],[1,"file-upload"],[4,"ngIf"],[1,"progress"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],["class","cancel-upload","color","warn",3,"click",4,"ngIf"],["color","primary","mat-mini-fab","",1,"upload-btn",3,"click"],["mode","determinate",1,"progress-bar",3,"value"],["color","warn",1,"cancel-upload",3,"click"],["mat-mini-fab","",3,"click"],["aria-label","Delete icon button.","color","warn","mat-mini-fab","",3,"click"]],template:function(Z,k){1&Z&&(_.TgZ(0,"div",0)(1,"input",1,2),_.NdJ("change",function(T){return k.onFileSelected(T)}),_.qZA(),_.TgZ(3,"div",3),_._uU(4),_.YNc(5,B,4,0,"ng-container",4),_.qZA(),_.TgZ(6,"div",5),_.YNc(7,R,1,1,"mat-progress-bar",6),_.YNc(8,w,2,0,"mat-icon",7),_.qZA(),_.YNc(9,P,7,0,"ng-container",4),_.qZA()),2&Z&&(_.xp6(1),_.Q6J("formControl",k.doc),_.xp6(3),_.hij(" ",k.fileName||k.display_name," "),_.xp6(1),_.Q6J("ngIf",0==k.uploadProgress||null==k.fileName),_.xp6(2),_.Q6J("ngIf",k.uploadProgress),_.xp6(1),_.Q6J("ngIf",k.uploadProgress),_.xp6(1),_.Q6J("ngIf",null!=k.attachment_id))},dependencies:[N.O5,s.Fj,s.JJ,s.oH,l.lW,c.Hw,U.pW],styles:[".file-input[_ngcontent-%COMP%]{display:none}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),M})()},2527:(lt,$,i)=>{"use strict";i.d($,{A:()=>n});var t=i(3097),a=i(3329),e=i(7999),s=i(88),_=i(3089),V=i(4321),W=i(7804),Y=i(9741),N=i(7739),l=i(4014),c=i(6950);function U(o,m){1&o&&(t.TgZ(0,"th",15),t._uU(1," No."),t.qZA())}function B(o,m){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const u=m.index;t.xp6(1),t.hij(" ",u+1," ")}}function R(o,m){1&o&&(t.TgZ(0,"th",15),t._uU(1,"Name"),t.qZA())}function w(o,m){if(1&o&&(t.TgZ(0,"td",17)(1,"div",18)(2,"div",19),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&o){const u=m.$implicit;t.xp6(3),t.Oqu(u.type_name),t.xp6(2),t.Oqu(u.type_description)}}function P(o,m){1&o&&(t.TgZ(0,"th",15),t._uU(1," Type"),t.qZA())}function I(o,m){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const u=m.$implicit;t.xp6(1),t.hij(" ",u.req_det," ")}}function M(o,m){1&o&&(t.TgZ(0,"th",20),t._uU(1," Document."),t.qZA())}function K(o,m){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const u=m.$implicit;t.xp6(1),t.Oqu(u.file_name)}}function Z(o,m){1&o&&(t.TgZ(0,"th",15),t._uU(1," Action"),t.qZA())}function k(o,m){if(1&o){const u=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(u);const J=t.MAs(4);return t.KtG(J.click())}),t.TgZ(1,"mat-icon"),t._uU(2,"attach_file"),t.qZA(),t.TgZ(3,"input",26,27),t.NdJ("change",function(J){t.CHM(u);const it=t.oxw().$implicit,_t=t.oxw(2);return t.KtG(_t.onFileSelected(J,it.code))}),t.qZA()()}}function y(o,m){if(1&o){const u=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(u);const J=t.oxw(2).$implicit,it=t.oxw(2);return t.KtG(it.show(J.storage_name))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove_red_eye"),t.qZA()()}}function T(o,m){if(1&o&&(t.ynx(0),t.TgZ(1,"div"),t.YNc(2,y,3,0,"button",28),t.qZA(),t.BQk()),2&o){const u=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",u.storage_name)}}function O(o,m){if(1&o){const u=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(u);const J=t.oxw(2).$implicit,it=t.oxw(2);return t.KtG(it.deleteAttachmentDoc(J))}),t.TgZ(1,"mat-icon",32),t._uU(2,"delete"),t.qZA()()}}function A(o,m){if(1&o&&(t.ynx(0),t.YNc(1,O,3,0,"button",30),t.BQk()),2&o){const u=t.oxw().$implicit,C=t.oxw(2);t.xp6(1),t.Q6J("ngIf","APPS"==C.user.designation_code&&u.storage_name&&("S"==C.claim_details.status||"D"==C.claim_details.status))}}function E(o,m){if(1&o&&(t.TgZ(0,"td",16)(1,"div",21)(2,"div",22),t.YNc(3,k,5,0,"button",23),t.qZA(),t.YNc(4,T,3,1,"ng-container",24),t.YNc(5,A,2,1,"ng-container",24),t.qZA()()),2&o){const u=m.$implicit,C=t.oxw(2);t.xp6(3),t.Q6J("ngIf","APPS"==C.user.designation_code&&("S"==C.claim_details.status||"D"==C.claim_details.status)&&!u.storage_name),t.xp6(1),t.Q6J("ngIf","SDAT_CERT"!=u.code),t.xp6(1),t.Q6J("ngIf","SDAT_CERT"!=u.code)}}function h(o,m){1&o&&t._UZ(0,"tr",33)}function b(o,m){1&o&&t._UZ(0,"tr",34)}function r(o,m){if(1&o&&(t.TgZ(0,"table",3),t.ynx(1,4),t.YNc(2,U,2,0,"th",5),t.YNc(3,B,2,1,"td",6),t.BQk(),t.ynx(4,7),t.YNc(5,R,2,0,"th",5),t.YNc(6,w,6,2,"td",8),t.BQk(),t.ynx(7,9),t.YNc(8,P,2,0,"th",5),t.YNc(9,I,2,1,"td",6),t.BQk(),t.ynx(10,10),t.YNc(11,M,2,0,"th",11),t.YNc(12,K,2,1,"td",6),t.BQk(),t.ynx(13,12),t.YNc(14,Z,2,0,"th",5),t.YNc(15,E,6,3,"td",6),t.BQk(),t.YNc(16,h,1,0,"tr",13),t.YNc(17,b,1,0,"tr",14),t.qZA()),2&o){const u=t.oxw();t.Q6J("dataSource",u.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",u.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",u.displayedColumns)}}function p(o,m){if(1&o&&t._UZ(0,"mat-progress-bar",35),2&o){const u=t.oxw();t.s9C("value",u.progressInfo)}}let n=(()=>{class o{constructor(u,C){this.dataService=u,this.dialog=C,this.color="primary",this.mode="determinate",this.displayedColumns=["position","type_name","type","document","action"],this.claimEvent=new t.vpe,this.loading=!1}ngOnInit(){this.user=this.dataService?.curr_user$.value,this.claimCode=localStorage.getItem("claimCode")}ngOnChanges(u){this.claim_details.id?this.getTypesAttachments():console.warn("NO CLAIM ID FOR DOC")}ngOnDestroy(){this.claimEvent.emit(this.claim_details.id)}getTypesAttachments(){const u=Object.assign({});u.firm_id=parseInt(String(this.firm.id)),u.applicable_to="C",u.scheme_code=this.claimCode||this.claim_details?.scheme_code,u.claim_id=this.claim_details?.id,u.type="T",this.dataService.getTypesAttachments(u).subscribe(C=>{this.dataSource=C.rows,this.loading=!1})}onFileSelected(u,C){this.loading=!0,this.doc_type=C;const J=u.target.files;if(J.length>0){const it=J[0];if("application/pdf"!=it.type)return void alert("Only Pdf Files are Allowed !");if(this.file=J[0],!(it.size/1048576<=1))return void alert("File should not be more than 1MB");{let _t=new FormData;_t.append("thumbnail",it),_t.append("file",it,it.name),_t.append("id","2"),_t.append("tz",(new Date).toISOString()),this.file_data=_t}}this.upload(),setTimeout(()=>{this.getTypesAttachments()},1e3)}upload(){this.claim_details?.id?this.dataService.Upload(this.file_data).subscribe(u=>{if(u.type===a.dt.UploadProgress&&(this.progressInfo=Math.round(100*u.loaded/u.total)),u.type==a.dt.Response){const C=Object.assign({},u.body);this.saveClaimAttachments(C.file_name)}},u=>{alert("Please try again."),this.ngOnInit()}):alert("Document Uploading required claim id.")}saveClaimAttachments(u){const C=Object.assign({});C.firm_id=this.firm.id,C.claim_id=this.claim_details?.id,C.doc_type=this.doc_type,C.file_name=this.file.name,C.file_type=this.file.type,C.file_size=Number((this.file.size/1024).toFixed(0)),C.storage_name=u,this.dataService.saveClaimAttachments(C).subscribe(J=>{})}show(u){this.dialog.open(e.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:u}}).afterClosed().subscribe(it=>{})}deleteAttachmentDoc(u){console.log("A=",u),this.dataService.deleteAttachmentDoc(u).subscribe(C=>{"Deleted successfully."==C.message&&this.getTypesAttachments()})}addDoc(u){this.dialog.open(s.Z,{width:"600px",hasBackdrop:!0,data:{claim_details:this.claim_details}}).afterClosed().subscribe(it=>{})}getMultipleDocument(){const u=Object.assign({});u.firm_id=this.firm.id,u.applicable_to="C",u.scheme_code=this.claimCode||this.claim_details?.scheme_code,u.claim_id=this.claim_details?.id,this.dataService.getMultipleDocument(u).subscribe(C=>{this.multipleAttachSource=C.rows})}}return o.\u0275fac=function(u){return new(u||o)(t.Y36(_.D),t.Y36(V.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-documents"]],inputs:{claim_details:"claim_details",firm:"firm"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:3,vars:2,consts:[["fxFill","","mat-table","",3,"dataSource",4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["align","end"],["fxFill","","mat-table","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type_name"],["mat-cell","","style","text-align: left;",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","document"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","left"],["fxLayout","column"],[2,"font-weight","bold"],["mat-header-cell","",2,"text-align","center"],[1,"flex","flex-row"],["fxLayout","row"],["color","primary","type","button",3,"click",4,"ngIf"],[4,"ngIf"],["color","primary","type","button",3,"click"],["accept","application/pdf","type","file",2,"display","none",3,"change"],["fileInput",""],[3,"click",4,"ngIf"],[3,"click"],["title","delete",3,"click",4,"ngIf"],["title","delete",3,"click"],["color","warn"],["mat-header-row",""],["mat-row",""],["mode","determinate",3,"value"]],template:function(u,C){1&u&&(t.YNc(0,r,18,3,"table",0),t.YNc(1,p,1,1,"mat-progress-bar",1),t._UZ(2,"mat-dialog-actions",2)),2&u&&(t.Q6J("ngIf",C.claim_details),t.xp6(1),t.Q6J("ngIf",C.loading))},dependencies:[W.O5,V.H8,Y.Hw,N.BZ,N.fO,N.as,N.w1,N.Dz,N.nj,N.ge,N.ev,N.XQ,N.Gk,l.xw,l.s9,c.pW]}),o})()},3716:(lt,$,i)=>{"use strict";i.d($,{O:()=>ot});var t=i(3097),a=i(9211),e=i(4321),s=i(3089),_=i(2432),V=i(4209),W=i(9981),Y=i(5962),N=i(7804),l=i(8521),c=i(8977),U=i(3259),B=i(6822),R=i(7333),w=i(9741),P=i(9059),I=i(7018),M=i(6672),K=i(613),Z=i(4014),k=i(8449);function y(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.name(Q.schemeForm.get("dp_name")),t.oJD)}}function T(v,G){if(1&v&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&v){const Q=G.$implicit;t.Q6J("value",Q.code),t.xp6(1),t.Oqu(Q.name)}}function O(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyReq(null==Q.schemeForm?null:Q.schemeForm.get("dp_relationship")),t.oJD)}}function A(v,G){if(1&v&&(t.ynx(0),t.TgZ(1,"mat-option",27),t._uU(2),t.qZA(),t.BQk()),2&v){const Q=G.$implicit;t.xp6(1),t.Q6J("value",Q.code),t.xp6(1),t.Oqu(Q.name)}}function E(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyReq(null==Q.schemeForm?null:Q.schemeForm.get("dp_gender")),t.oJD)}}function h(v,G){if(1&v&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&v){const Q=G.$implicit;t.Q6J("value",Q.code),t.xp6(1),t.Oqu(Q.name)}}function b(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyReq(null==Q.schemeForm?null:Q.schemeForm.get("curr_class_studied")),t.oJD)}}function r(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyAlphabetic(null==Q.schemeForm?null:Q.schemeForm.get("inst_name")),t.oJD)}}function p(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.mobNo(Q.schemeForm.get("inst_contact_no")),t.oJD)}}function n(v,G){if(1&v&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&v){const Q=G.$implicit;t.Q6J("value",Q.id),t.xp6(1),t.Oqu(Q.district_name)}}function o(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyReq(null==Q.schemeForm?null:Q.schemeForm.get("ei_district_id")),t.oJD)}}function m(v,G){if(1&v&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&v){const Q=G.$implicit;t.Q6J("value",Q.id),t.xp6(1),t.Oqu(Q.edu_district_name)}}function u(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.onlyReq(null==Q.schemeForm?null:Q.schemeForm.get("ei_edu_district_id")),t.oJD)}}function C(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.aadhaarNo(null==Q.schemeForm?null:Q.schemeForm.get("dp_aadhaar")),t.oJD)}}function J(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.percent(null==Q.schemeForm?null:Q.schemeForm.get("ei_es_mark_percent")),t.oJD)}}function it(v,G){1&v&&(t.TgZ(0,"div")(1,"section",28)(2,"mat-checkbox",29),t._uU(3," Whether the student was passed in 10th standard ? "),t.qZA()()())}function _t(v,G){1&v&&(t.TgZ(0,"div")(1,"section",28)(2,"mat-checkbox",29),t._uU(3," Whether the student was passed in 12th standard ? "),t.qZA()()())}function ut(v,G){if(1&v&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&v){const Q=t.oxw();t.xp6(1),t.Q6J("innerHTML",Q.err.address(null==Q.schemeForm?null:Q.schemeForm.get("inst_address")),t.oJD)}}function H(v,G){if(1&v){const Q=t.EpF();t.TgZ(0,"mat-card-actions",30)(1,"button",31),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",32)(4,"button",33),t.NdJ("click",function(){t.CHM(Q);const ct=t.oxw(),rt=t.MAs(89);return t.KtG(ct.saveClaimDetails(rt.mark_lists))}),t._uU(5," Save "),t.qZA()()()}if(2&v){const Q=t.oxw(),j=t.MAs(89);t.xp6(3),t.Q6J("matTooltipDisabled",Q.schemeForm.valid),t.xp6(1),t.Q6J("disabled",Q.isLoading||Q.schemeForm.invalid||j.mark_lists.invalid)}}let ot=(()=>{class v{constructor(Q,j,ct,rt,pt,tt,mt){this.dialog=Q,this.fb=j,this.dataService=ct,this.router=rt,this.err=pt,this.us=tt,this.m_list=mt,this.isLoading=!1,this.mark_list_details=[],this.claimEvent=new t.vpe,this.isRemarks=!1,this.lvalue="",this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$"),a.kI.maxLength(45)]],dp_relationship:[null,a.kI.required],dp_gender:[null,a.kI.required],curr_class_studied:[null,a.kI.required],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z ]+$")]],inst_contact_no:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],ei_district_id:[null,a.kI.required],ei_edu_district_id:[null,a.kI.required],ei_es_mark_percent:[null,[a.kI.required,a.kI.pattern("^(100|\\d{1,2})(\\.\\d{1,2})?$")]],inst_address:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 .,@()]+$"),a.kI.maxLength(255)]],dp_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]],is_passed_prev_edu:[null,a.kI.required]})}get curr_class_studied(){return this.schemeForm.get("curr_class_studied")}get ei_district_id(){return this.schemeForm.get("ei_district_id")}get ei_edu_district_id(){return this.schemeForm.get("ei_edu_district_id")}get mark_lists(){return this.schemeForm.get("mark_lists")}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getGenders(),this.getEducations(),this.getDistricts(),this.getEduDistricts()}ngOnChanges(Q){this.claim_details&&(this.getMarkLists(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}ngAfterViewInit(){}draftClaimForm(){this.schemeForm.patchValue({dp_name:this.claim_details.dp_name,dp_relationship:this.claim_details.dp_relationship,dp_gender:this.claim_details.dp_gender,curr_class_studied:this.claim_details.curr_class_studied,inst_name:this.claim_details.inst_name,inst_contact_no:this.claim_details.inst_contact_no,ei_district_id:this.claim_details.ei_district_id,ei_edu_district_id:this.claim_details.ei_edu_district_id,ei_es_mark_percent:this.claim_details.ei_es_mark_percent,inst_address:this.claim_details.inst_address,dp_aadhaar:this.claim_details.dp_aadhaar,is_passed_prev_edu:this.claim_details.is_passed_prev_edu})}getMarkLists(){this.dataService.getMarkLists({claim_id:this.claim_details?.id}).subscribe(Q=>{this.mark_list_details=Q.rows,this.draftClaimForm()})}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(Q=>{this.dp_relationships=Q.rows})}getEducations(){this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(Q=>{this.classStudied=Q.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(Q=>{this.genders=Q.rows})}getDistricts(){this.dataService.getDistricts({}).subscribe(Q=>{this.districts=Q.rows})}getEduDistricts(){this.dataService.getEdu_Districts({district_id:this.ei_district_id.value||null}).subscribe(Q=>{this.edu_districts=Q.rows})}saveClaimDetails(Q){console.log(Q),console.log(Q.invalid);let ct,j="D"==this.claim_details.status?"D":"CLI",rt=Object.assign({},{curr_class_studied:this.curr_class_studied.value,allowed_schemes:this.claimCode});this.dataService.getEducations(rt).subscribe(pt=>{ct=pt.rows[0].scheme_amt,this.save(j,ct,Q)})}save(Q,j,ct){if(this.m_list.duplicateMarkList(ct),"S"==Q)return this.router.navigate(["/apps/my-claims"]);{this.isLoading=!0;let rt=Object.assign({},this.schemeForm.value);return rt.user_id=this.dataService.curr_user$.value.id,rt.firm_id=this.firm.id,rt.scheme_code=this.claimCode,rt.status=Q,rt.claim_id=this.claim_details.id,rt.claim_amount=j,this.claim_details&&(this.claim_details.dp_name=rt.dp_name,this.claim_details.dp_relationship=rt.dp_relationship,this.claim_details.dp_gender=rt.dp_gender,this.claim_details.curr_class_studied=rt.curr_class_studied,this.claim_details.inst_name=rt.inst_name,this.claim_details.inst_contact_no=rt.inst_contact_no,this.claim_details.inst_address=rt.inst_address,this.claim_details.ei_district_id=rt.ei_district_id,this.claim_details.ei_edu_district_id=rt.ei_edu_district_id,this.claim_details.dp_aadhaar=rt.dp_aadhaar,this.claim_details.ei_es_mark_percent=rt.ei_es_mark_percent,this.claim_details.status=rt.status,this.claim_details.claim_amount=rt.claim_amount,this.claim_details.is_passed_prev_edu=rt.is_passed_prev_edu,this.claim_details.mark_lists=ct.value),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:rt).subscribe(pt=>{("Claim Details are Saved Successfully."==pt.message||"Claim Details are Updated Successfully."==pt.message)&&(this.claim_id=pt.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}classStudying(Q){this.perVal=" in "+Q+" standard"}schange(Q){this.getEduDistricts()}}return v.\u0275fac=function(Q){return new(Q||v)(t.Y36(e.uw),t.Y36(a.QS),t.Y36(s.D),t.Y36(_.F0),t.Y36(V.E),t.Y36(W.C),t.Y36(Y.N))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-educational-incentive"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:91,vars:27,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","15px"],["fxFlex","50"],["formControlName","dp_name","matInput","","maxlength","45","placeholder","Name of the Student",3,"maxLength"],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["formControlName","curr_class_studied",3,"selectionChange"],["fxLayout","row","fxLayoutGap","20px"],["formControlName","inst_name","matInput","","placeholder","Name of the School",3,"maxlength"],["formControlName","inst_contact_no","matInput","","maxlength","10","placeholder","Contact No. Of the Institution","type","phone"],["matSuffix",""],["appearance","outline","fxFlex",""],["formControlName","ei_district_id",3,"selectionChange"],["formControlName","ei_edu_district_id"],["fxFill",""],["formControlName","dp_aadhaar","matInput","","placeholder","Enter the Aadhaar No. of the Student",3,"maxLength"],["fxFlexFill",""],["formControlName","ei_es_mark_percent","matInput","","placeholder","E.g. 95.02"],["formControlName","inst_address","matInput","","maxlength","256","placeholder","Address of the School"],[3,"claim_details","firm","isRemarks"],["ml",""],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],[1,"example-section"],["formControlName","is_passed_prev_edu",1,"example-margin"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(Q,j){if(1&Q&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"mat-card-content",0)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Name of the Student"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,y,2,1,"mat-error",5),t.qZA(),t.TgZ(9,"mat-form-field",3)(10,"mat-select",6)(11,"mat-option"),t._uU(12,"*None*"),t.qZA(),t.YNc(13,T,2,2,"mat-option",7),t.qZA(),t.TgZ(14,"mat-label"),t._uU(15," Relationship to the Employee "),t.qZA(),t.YNc(16,O,2,1,"mat-error",5),t.qZA()(),t.TgZ(17,"div",2)(18,"mat-form-field",3)(19,"mat-select",8)(20,"mat-option"),t._uU(21,"*None*"),t.qZA(),t.YNc(22,A,3,2,"ng-container",9),t.qZA(),t.TgZ(23,"mat-label"),t._uU(24," Gender "),t.qZA(),t.YNc(25,E,2,1,"mat-error",5),t.qZA(),t.TgZ(26,"mat-form-field",3)(27,"mat-select",10),t.NdJ("selectionChange",function(rt){return j.classStudying(rt.value)}),t.TgZ(28,"mat-option"),t._uU(29,"*none*"),t.qZA(),t.YNc(30,h,2,2,"mat-option",7),t.qZA(),t.TgZ(31,"mat-label"),t._uU(32," Class studying during the current academic year. "),t.qZA(),t.YNc(33,b,2,1,"mat-error",5),t.qZA()(),t.TgZ(34,"div",11)(35,"mat-form-field",3)(36,"mat-label"),t._uU(37,"Name of the School"),t.qZA(),t._UZ(38,"input",12),t.YNc(39,r,2,1,"mat-error",5),t.qZA(),t.TgZ(40,"mat-form-field",3)(41,"mat-label"),t._uU(42,"Contact Number Of the School"),t.qZA(),t._UZ(43,"input",13),t.TgZ(44,"mat-icon",14),t._uU(45,"phone"),t.qZA(),t.YNc(46,p,2,1,"mat-error",5),t.qZA()(),t.TgZ(47,"div",2)(48,"mat-form-field",15)(49,"mat-label"),t._uU(50,"District of the School"),t.qZA(),t.TgZ(51,"mat-select",16),t.NdJ("selectionChange",function(rt){return j.schange(rt)}),t.TgZ(52,"mat-option"),t._uU(53,"None"),t.qZA(),t.YNc(54,n,2,2,"mat-option",7),t.qZA(),t.YNc(55,o,2,1,"mat-error",5),t.qZA(),t.TgZ(56,"mat-form-field",15)(57,"mat-label"),t._uU(58,"Educational District of the School"),t.qZA(),t.TgZ(59,"mat-select",17)(60,"mat-option"),t._uU(61,"None"),t.qZA(),t.YNc(62,m,2,2,"mat-option",7),t.qZA(),t.TgZ(63,"mat-hint"),t._uU(64,"Select the District First to get Edu.,Districts"),t.qZA(),t.YNc(65,u,2,1,"mat-error",5),t.qZA()(),t.TgZ(66,"div",2)(67,"mat-form-field",18)(68,"mat-label"),t._uU(69,"Enter the Aadhaar No. of the Student"),t.qZA(),t._UZ(70,"input",19),t.YNc(71,C,2,1,"mat-error",5),t.qZA()(),t.TgZ(72,"div",2)(73,"div",3)(74,"mat-form-field",20)(75,"mat-label"),t._uU(76),t.qZA(),t._UZ(77,"input",21),t.YNc(78,J,2,1,"mat-error",5),t.qZA()(),t.TgZ(79,"div",3),t.YNc(80,it,4,0,"div",5),t.YNc(81,_t,4,0,"div",5),t.qZA()(),t.TgZ(82,"div",2)(83,"mat-form-field",20)(84,"mat-label"),t._uU(85,"Address of the School"),t.qZA(),t._UZ(86,"textarea",22),t.YNc(87,ut,2,1,"mat-error",5),t.qZA()(),t._UZ(88,"app-mark-list",23,24),t.qZA(),t.YNc(90,H,6,2,"mat-card-actions",25),t.qZA()()),2&Q){let ct,rt;t.xp6(1),t.Q6J("formGroup",j.schemeForm),t.xp6(6),t.Q6J("maxLength",50),t.xp6(1),t.Q6J("ngIf",null==(ct=j.schemeForm.get("dp_name"))?null:ct.invalid),t.xp6(5),t.Q6J("ngForOf",j.dp_relationships),t.xp6(3),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("dp_relationship").invalid),t.xp6(6),t.Q6J("ngForOf",j.genders),t.xp6(3),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("dp_gender").invalid),t.xp6(5),t.Q6J("ngForOf",j.classStudied),t.xp6(3),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("curr_class_studied").invalid),t.xp6(5),t.Q6J("maxlength",60),t.xp6(1),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("inst_name").invalid),t.xp6(7),t.Q6J("ngIf",null==(rt=j.schemeForm.get("inst_contact_no"))?null:rt.invalid),t.xp6(8),t.Q6J("ngForOf",j.districts),t.xp6(1),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("ei_district_id").invalid),t.xp6(7),t.Q6J("ngForOf",j.edu_districts),t.xp6(3),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("ei_edu_district_id").invalid),t.xp6(5),t.Q6J("maxLength",12),t.xp6(1),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("dp_aadhaar").invalid),t.xp6(5),t.hij("Percentages of Marks obtained",j.perVal,""),t.xp6(2),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("ei_es_mark_percent").invalid),t.xp6(2),t.Q6J("ngIf","10"===(null==j.curr_class_studied?null:j.curr_class_studied.value)),t.xp6(1),t.Q6J("ngIf","12"===(null==j.curr_class_studied?null:j.curr_class_studied.value)),t.xp6(6),t.Q6J("ngIf",null==j.schemeForm?null:j.schemeForm.get("inst_address").invalid),t.xp6(1),t.Q6J("claim_details",j.claim_details)("firm",j.firm)("isRemarks",j.isRemarks),t.xp6(2),t.Q6J("ngIf","CLI"==(null==j.claim_details?null:j.claim_details.status)&&1==j.isRemarks||"CLI"!=(null==j.claim_details?null:j.claim_details.status))}},dependencies:[N.sg,N.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,l.ey,c.lW,U.a8,U.dn,U.hq,B.oG,R.TO,R.KE,R.bx,R.hX,R.R9,w.Hw,P.Nt,I.gD,M.Ic,K.gM,Z.xw,Z.SQ,Z.s9,Z.yH,k.E]}),v})()},4724:(lt,$,i)=>{"use strict";i.d($,{t:()=>pt});var t=i(3097),a=i(9211),e=i(3329),s=i(7999),_=i(4321),V=i(3089),W=i(2432),Y=i(4209),N=i(9981),l=i(5962),c=i(7804),U=i(8521),B=i(8977),R=i(3259),w=i(6822),P=i(7333),I=i(9741),M=i(9059),K=i(7018),Z=i(6672),k=i(613),y=i(4014),T=i(6950);function O(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.name(null==L.schemeForm?null:L.schemeForm.get("dp_name")),t.oJD)}}function A(tt,mt){if(1&tt&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&tt){const L=mt.$implicit;t.Q6J("value",L.code),t.xp6(1),t.Oqu(L.name)}}function E(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.onlyReq(null==L.schemeForm?null:L.schemeForm.get("dp_relationship")),t.oJD)}}function h(tt,mt){if(1&tt&&(t.TgZ(0,"div")(1,"mat-option",25),t._uU(2),t.qZA()()),2&tt){const L=mt.$implicit;t.xp6(1),t.Q6J("value",L.code),t.xp6(1),t.Oqu(L.name)}}function b(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.onlyReq(null==L.schemeForm?null:L.schemeForm.get("dp_gender")),t.oJD)}}function r(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.name(null==L.schemeForm?null:L.schemeForm.get("inst_name")),t.oJD)}}function p(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.mobNo(L.schemeForm.get("inst_contact_no")),t.oJD)}}function n(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.address(null==L.schemeForm?null:L.schemeForm.get("inst_address")),t.oJD)}}function o(tt,mt){if(1&tt&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&tt){const L=mt.$implicit;t.Q6J("value",L.code),t.xp6(1),t.Oqu(L.name)}}function m(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.onlyReq(null==L.schemeForm?null:L.schemeForm.get("prev_class_studied")),t.oJD)}}function u(tt,mt){if(1&tt&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&tt){const L=mt.$implicit;t.Q6J("value",L.code),t.xp6(1),t.Oqu(L.name)}}function C(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.onlyReq(null==L.schemeForm?null:L.schemeForm.get("curr_class_studied")),t.oJD)}}function J(tt,mt){if(1&tt&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",24),t.qZA()),2&tt){const L=t.oxw();t.xp6(1),t.Q6J("innerHTML",L.err.aadhaarNo(L.schemeForm.get("dp_aadhaar")),t.oJD)}}function it(tt,mt){if(1&tt){const L=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",26),t.NdJ("click",function(){t.CHM(L);const et=t.MAs(6);return t.KtG(et.click())}),t.TgZ(3,"mat-icon"),t._uU(4,"attach_file"),t.qZA(),t.TgZ(5,"input",27,28),t.NdJ("change",function(et){t.CHM(L);const S=t.oxw();return t.KtG(S.documentUpload(et))}),t.qZA()()()}if(2&tt){const L=t.oxw();t.xp6(1),t.hij(" ",L.fileName||"Select the Aadhaar Card"," ")}}function _t(tt,mt){if(1&tt){const L=t.EpF();t.ynx(0),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(L);const et=t.oxw();return t.KtG(et.showDocument(null==et.dataSource?null:et.dataSource.storage_name))}),t.TgZ(2,"mat-icon"),t._uU(3,"remove_red_eye"),t.qZA()(),t.TgZ(4,"button",30),t.NdJ("click",function(){t.CHM(L);const et=t.oxw();return t.KtG(et.deleteAttachmentDoc(et.dataSource))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()(),t.BQk()}}function ut(tt,mt){if(1&tt){const L=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",26),t.NdJ("click",function(){t.CHM(L);const et=t.MAs(6);return t.KtG(et.click())}),t.TgZ(3,"mat-icon"),t._uU(4,"attach_file"),t.qZA(),t.TgZ(5,"input",38,28),t.NdJ("change",function(et){t.CHM(L);const S=t.oxw().index,D=t.oxw(2);return t.KtG(D.onFileSelected(et,S))}),t.qZA()()()}if(2&tt){const L=t.oxw().index,X=t.oxw(2);t.xp6(1),t.hij(" ",X.mark_lists.controls[L].get("display_name").value||"Select the Mark list"," ")}}function H(tt,mt){if(1&tt){const L=t.EpF();t.ynx(0),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(L);const et=t.oxw().index,S=t.oxw(2);return t.KtG(S.show(S.mark_lists.controls[et].get("storage_name").value))}),t.TgZ(2,"mat-icon"),t._uU(3,"remove_red_eye"),t.qZA()(),t.BQk()}}function ot(tt,mt){if(1&tt){const L=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(L);const et=t.oxw().index,S=t.oxw(2);return t.KtG(S.deleteMark_lists(et,S.mark_lists.controls[et].get("attachment_id").value,S.mark_lists.controls[et].get("storage_name").value))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function v(tt,mt){1&tt&&t._UZ(0,"div",39)}function G(tt,mt){if(1&tt&&(t.TgZ(0,"div",34)(1,"mat-form-field",16)(2,"mat-label"),t._uU(3,"Enter Mark list No."),t.qZA(),t._UZ(4,"input",35),t.qZA(),t.TgZ(5,"div",19),t.YNc(6,ut,7,1,"div",5),t.YNc(7,H,4,0,"ng-container",5),t.qZA(),t.YNc(8,ot,4,0,"div",36),t.YNc(9,v,1,0,"ng-template",null,37,t.W1O),t.qZA()),2&tt){const L=mt.index,X=t.MAs(10),et=t.oxw(2);t.Q6J("formGroupName",L),t.xp6(6),t.Q6J("ngIf",!et.mark_lists.controls[L].get("storage_name").value),t.xp6(1),t.Q6J("ngIf",et.mark_lists.controls[L].get("storage_name").value),t.xp6(1),t.Q6J("ngIf",L>0)("ngIfElse",X)}}function Q(tt,mt){if(1&tt){const L=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(L);const et=t.oxw(2);return t.KtG(et.addAnother())}),t._uU(2," Add Another "),t.qZA()()}}function j(tt,mt){if(1&tt&&(t.TgZ(0,"div",2)(1,"div",31),t.YNc(2,G,11,5,"div",32),t.qZA(),t.YNc(3,Q,3,0,"div",33),t.qZA()),2&tt){const L=t.oxw();t.xp6(2),t.Q6J("ngForOf",L.mark_lists.controls),t.xp6(1),t.Q6J("ngIf",L.mark_lists.length<=3)}}function ct(tt,mt){if(1&tt&&t._UZ(0,"mat-progress-bar",43),2&tt){const L=t.oxw();t.s9C("value",L.progressInfo)}}function rt(tt,mt){if(1&tt){const L=t.EpF();t.TgZ(0,"mat-card-actions",44)(1,"button",45),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",46)(4,"button",47),t.NdJ("click",function(){t.CHM(L);const et=t.oxw();return t.KtG(et.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&tt){const L=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",L.schemeForm.valid),t.xp6(1),t.Q6J("disabled",L.isLoading||L.schemeForm.invalid)}}let pt=(()=>{class tt{constructor(L,X,et,S,D,g,f){this.dialog=L,this.fb=X,this.dataService=et,this.router=S,this.err=D,this.us=g,this.m_list=f,this.isLoading=!1,this.mark_list_details=[],this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$"),a.kI.maxLength(45)]],dp_relationship:[null,[a.kI.required]],dp_gender:[null,[a.kI.required]],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z.,&() ]+$"),a.kI.maxLength(45)]],inst_contact_no:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],inst_address:[null,[a.kI.required,a.kI.pattern("^[0-9A-Za-z.,@&()/ ]*$"),a.kI.maxLength(255)]],prev_class_studied:[null,a.kI.required],curr_class_studied:[null,a.kI.required],dp_aadhaar:[null,[a.kI.pattern("^[0-9]{12}$")]],dp_aadhaar_file:[null],bonafide_cert_no:[null],is_passed_prev_edu:[null,a.kI.required],mark_lists:this.fb.array([])})}get mark_lists(){return this.schemeForm.get("mark_lists")}get curr_class_studied(){return this.schemeForm.get("curr_class_studied")}get ei_district_id(){return this.schemeForm.get("ei_district_id")}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getGenders(),this.getEducations()}ngOnChanges(){this.claim_details&&(this.claim_details?.curr_class_studied&&this.getMarkLists(),this.getTypesAttachments(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}getMarkLists(){this.dataService.getMarkLists({claim_id:this.claim_details?.id}).subscribe(L=>{this.mark_list_details=L.rows,this.draftClaimForm()})}draftClaimForm(){if(this.schemeForm.patchValue({dp_name:this.claim_details?.dp_name,dp_relationship:this.claim_details?.dp_relationship,dp_gender:this.claim_details?.dp_gender,inst_name:this.claim_details?.inst_name,inst_contact_no:this.claim_details?.inst_contact_no,inst_address:this.claim_details?.inst_address,prev_class_studied:this.claim_details?.prev_class_studied,curr_class_studied:this.claim_details?.curr_class_studied,dp_aadhaar:this.claim_details?.dp_aadhaar,bonafide_cert_no:this.claim_details?.bonafide_cert_no,is_passed_prev_edu:this.claim_details?.is_passed_prev_edu}),this.m_list.schemeForm=this.schemeForm,null!=this.mark_list_details||this.mark_list_details!=this.mark_lists.value)for(let L=0;L<Object.keys(this.mark_list_details).length;L++)this.m_list.addAnother(),this.mark_lists.at(L)?.get("mark_list_no")?.setValue(this.mark_list_details[L]?.mark_list_no),this.mark_lists.at(L)?.get("display_name")?.setValue(this.mark_list_details[L]?.file_name),this.mark_lists.at(L)?.get("storage_name")?.setValue(this.mark_list_details[L]?.storage_name),this.mark_lists.at(L)?.get("attachment_id")?.setValue(this.mark_list_details[L]?.attachment_id),this.mark_lists.at(L)?.get("mark_list_file")?.removeValidators(a.kI.required)}addAnother(){this.mark_lists.push(this.fb.group({mark_list_no:[null,[a.kI.required,a.kI.pattern("[0-9A-Za-z]{16}")]],attachment_id:[null,[a.kI.required]],display_name:[null,[a.kI.required]],storage_name:[null,[a.kI.required]],mark_list_file:[null,[a.kI.required]]}))}deleteMark_lists(L,X,et){let S={attachment_id:X,storage_name:et};S.attachment_id&&S.storage_name?this.dataService.deleteAttachmentDoc(S).subscribe(D=>{"Deleted successfully."==D.message&&this.mark_lists.removeAt(L)}):this.mark_lists.removeAt(L)}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(L=>{this.relationships=L.rows})}getEducations(){this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(L=>{this.classStudied=L.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(L=>{this.genders=L.rows})}getDistricts(){this.dataService.getDistricts({}).subscribe(L=>{this.districts=L.rows})}onFileSelected(L,X){this.isLoading=!0;const et=L.target.files;let D,S=new FormData;if(et.length>0){if(D=et[0],"application/pdf"!=D.type)return void alert("Only Pdf Files are Allowed !");if(!(D.size/1048576<=1))return void alert("File size should not be more than 1MB");S.append("thumbnail",D),S.append("file",D,D.name),S.append("id","2"),S.append("tz",(new Date).toISOString())}this.claim_details.id?this.dataService.Upload(S).subscribe(g=>{try{if(g.type===e.dt.UploadProgress&&(this.progressInfo=Math.round(100*g.loaded/g.total)),g.type==e.dt.Response){const f=Object.assign({});f.firm_id=this.firm?.id,f.claim_id=this.claim_details?.id,f.doc_type="M_LIST",f.file_name=D.name,f.file_type=D.type,f.file_size=Number((D.size/1024).toFixed(0)),f.storage_name=g.body.file_name,this.dataService.saveClaimAttachments(f).subscribe(x=>{if("Attachment saved successfully."==x.message){const z=this.schemeForm.get("mark_lists");z.controls[X].get("attachment_id").setValue(x.id),z.controls[X].get("display_name").setValue(D.name),z.controls[X].get("storage_name").setValue(g.body.file_name)}})}}catch{alert("Please try again."),this.ngOnInit()}}):alert("Document Uploading required claim id."),this.isLoading=!1}saveClaimDetails(){let L="D"==this.claim_details.status?"D":"CLI",X=Object.assign({},{curr_class_studied:this.curr_class_studied.value,allowed_schemes:this.claimCode});this.dataService.getEducations(X).subscribe(et=>{this.save(L,et.rows[0].scheme_amt)})}save(L,X){if(this.m_list.duplicateMarkList(this.mark_lists),"S"==L)return this.router.navigate(["/apps/my-claims"]);{let et;return this.isLoading=!0,et=Object.assign({},this.schemeForm.value),et.user_id=this.dataService.curr_user$.value.id,et.firm_id=this.firm.id|this.claim_details.firm_id,et.scheme_code=this.claimCode,et.status=L,et.status=this.claim_details.status,et.claim_id=this.claim_details.id,et.claim_amount=X,this.claim_details.mark_lists!=this.mark_lists.value&&(this.claim_details.mark_lists=null),this.claim_details&&(this.claim_details.dp_name=et.dp_name,this.claim_details.dp_relationship=et.dp_relationship,this.claim_details.dp_gender=et.dp_gender,this.claim_details.inst_name=et.inst_name,this.claim_details.inst_contact_no=et.inst_contact_no,this.claim_details.inst_address=et.inst_address,this.claim_details.prev_class_studied=et.prev_class_studied,this.claim_details.curr_class_studied=et.curr_class_studied,this.claim_details.dp_aadhaar=et.dp_aadhaar,this.claim_details.bonafide_cert_no=et.bonafide_cert_no,this.claim_details.bonafide_cert_dt=et.bonafide_cert_dt,this.claim_details.ei_es_mark_sheet_no=et.ei_es_mark_sheet_no,this.claim_details.is_passed_prev_edu=et.is_passed_prev_edu,this.claim_details.status=et.status,this.claim_details.claim_amount=et.claim_amount,this.claim_details.mark_lists=et.mark_lists),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:et).subscribe(S=>{("Claim Details are Saved Successfully."==S.message||"Claim Details are Updated Successfully."==S.message)&&(this.claim_id=S.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}changeClassStudied(L){L.value>8||"ITI"==L.value||"Diploma"==L.value||"UG"==L.value||"PG"==L.value?(this.schemeForm.get("dp_aadhaar").setValidators(a.kI.required),this.schemeForm.get("dp_aadhaar_file").setValidators(a.kI.required),this.schemeForm.get("dp_aadhaar").updateValueAndValidity(),this.schemeForm.get("dp_aadhaar_file").updateValueAndValidity()):L.value>8||"ITI"==L.value||"Diploma"==L.value||"UG"==L.value||"PG"==L.value||(this.schemeForm.get("dp_aadhaar").removeValidators(a.kI.required),this.schemeForm.get("dp_aadhaar_file").removeValidators(a.kI.required),this.schemeForm.get("dp_aadhaar").updateValueAndValidity(),this.schemeForm.get("dp_aadhaar_file").updateValueAndValidity()),"11"==this.curr_class_studied?.value||"12"==this.curr_class_studied?.value||"ITI"==this.curr_class_studied?.value||"Diploma"==this.curr_class_studied?.value||"UG"==this.curr_class_studied?.value||"PG"==this.curr_class_studied?.value?(this.addAnother(),this.mark_lists?.enable()):(this.mark_lists?.reset(),this.mark_lists?.disable())}show(L){this.dialog.open(s.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:L}}).afterClosed().subscribe(S=>{})}getTypesAttachments(){const L=Object.assign({});L.firm_id=this.firm?.id|this.claim_details.firm_id,L.applicable_to="C",L.scheme_code=this.claimCode||this.claim_details?.scheme_code,L.claim_id=this.claim_details?.id,this.dataService.getTypesAttachments(L).subscribe(X=>{this.dataSource=X.rows.find(et=>"D_AADHAAR"===et.code),this.fileName=this.dataSource?.file_name})}documentUpload(L){this.isLoading=!0;const X=L.target.files;let S,et=new FormData;if(X.length>0){if(S=X[0],this.fileName=S.name,"application/pdf"!=S.type)return void alert("Only Pdf Files are Allowed !");if(!(S.size/1048576<=1))return void alert("File size must be less then 1MB");et.append("thumbnail",S),et.append("file",S,S.name),et.append("id","2"),et.append("tz",(new Date).toISOString())}this.claim_details.id?this.dataService.Upload(et).subscribe(D=>{try{if(D.type===e.dt.UploadProgress&&(this.progressInfo=Math.round(100*D.loaded/D.total)),D.type==e.dt.Response){const g=Object.assign({});g.firm_id=this.firm.id,g.claim_id=this.claim_details?.id,g.doc_type="D_AADHAAR",g.file_name=S.name,g.file_type=S.type,g.file_size=Number((S.size/1024).toFixed(0)),g.storage_name=D.body.file_name,this.dataService.saveClaimAttachments(g).subscribe(f=>{"Attachment saved successfully."==f.message&&this.getTypesAttachments()})}}catch{alert("Please try again."),this.ngOnInit()}}):alert("Document Uploading required claim id."),this.isLoading=!1}showDocument(L){this.dialog.open(s.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:L}}).afterClosed().subscribe(S=>{})}deleteAttachmentDoc(L){this.dataService.deleteAttachmentDoc(L).subscribe(X=>{"Deleted successfully."==X.message&&this.getTypesAttachments()})}click(){console.log("Scheme Form Value =",this.schemeForm.value)}}return tt.\u0275fac=function(L){return new(L||tt)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.D),t.Y36(W.F0),t.Y36(Y.E),t.Y36(N.C),t.Y36(l.N))},tt.\u0275cmp=t.Xpm({type:tt,selectors:[["app-educational-scholarship"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:87,vars:19,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","dp_name","matInput","","maxlength","45","placeholder","Name of the Student"],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["formControlName","inst_name","matInput","","maxlength","50","placeholder","Name of the Institution"],["formControlName","inst_contact_no","matInput","","maxlength","10","placeholder","Contact No. Of the Institution","type","phone"],["matSuffix",""],["formControlName","inst_address","matInput","","placeholder","Address of the Institution"],["formControlName","prev_class_studied","required",""],["formControlName","curr_class_studied","required","",3,"selectionChange"],["fxFlex","75"],["formControlName","dp_aadhaar","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of Student"],[2,"color","black"],["fxFlex","25"],["fxLayout","row","fxLayoutGap","20px",4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["formControlName","is_passed_prev_edu",1,"example-margin"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["color","primary","mat-mini-fab","","type","button",3,"click"],["formControlName","dp_aadhaar_file","type","file",2,"display","none",3,"change"],["fileInput",""],["mat-mini-fab","",3,"click"],["aria-label","Example icon button with a delete icon","color","warn","mat-mini-fab","",3,"click"],["formArrayName","mark_lists","fxFlex","100"],["fxLayoutGap","10px",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","10",4,"ngIf"],["fxLayoutGap","10px",3,"formGroupName"],["formControlName","mark_list_no","matInput","","placeholder","Enter Mark list No.","maxlength","16"],["fxFlex","5",4,"ngIf","ngIfElse"],["empty",""],["accept",".pdf","formControlName","mark_list_file","type","file",2,"display","none",3,"change"],["fxFlex","5"],["aria-label","Example icon button with a delete icon","color","warn","mat-fab","",3,"click"],["fxFlex","10"],["color","primary","mat-raised-button","",3,"click"],["mode","determinate",3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(L,X){if(1&L&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.YNc(7,O,2,1,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-select",6)(10,"mat-option"),t._uU(11,"*None*"),t.qZA(),t.YNc(12,A,2,2,"mat-option",7),t.qZA(),t.TgZ(13,"mat-label"),t._uU(14," Relationship to the Employee "),t.qZA(),t.YNc(15,E,2,1,"mat-error",5),t.qZA()(),t.TgZ(16,"div",2)(17,"mat-form-field",3)(18,"mat-select",8)(19,"mat-option"),t._uU(20,"*none*"),t.qZA(),t.YNc(21,h,3,2,"div",9),t.qZA(),t.TgZ(22,"mat-label"),t._uU(23," Gender "),t.qZA(),t.YNc(24,b,2,1,"mat-error",5),t.qZA(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Name of the Institution"),t.qZA(),t._UZ(28,"input",10),t.YNc(29,r,2,1,"mat-error",5),t.qZA()(),t.TgZ(30,"div",2)(31,"mat-form-field",3)(32,"mat-label"),t._uU(33,"Contact No. Of the Institution"),t.qZA(),t._UZ(34,"input",11),t.TgZ(35,"mat-icon",12),t._uU(36,"phone"),t.qZA(),t.YNc(37,p,2,1,"mat-error",5),t.qZA(),t.TgZ(38,"mat-form-field",3)(39,"mat-label"),t._uU(40,"Address of the Institution"),t.qZA(),t._UZ(41,"input",13),t.YNc(42,n,2,1,"mat-error",5),t.qZA()(),t.TgZ(43,"div",2)(44,"mat-form-field",3)(45,"mat-select",14)(46,"mat-option"),t._uU(47,"*None*"),t.qZA(),t.YNc(48,o,2,2,"mat-option",7),t.qZA(),t.TgZ(49,"mat-label")(50,"b"),t._uU(51,"Class/Course Studied during the previous academic year."),t.qZA()(),t.YNc(52,m,2,1,"mat-error",5),t.qZA(),t.TgZ(53,"mat-form-field",3)(54,"mat-select",15),t.NdJ("selectionChange",function(S){return X.changeClassStudied(S)}),t.TgZ(55,"mat-option"),t._uU(56,"*None*"),t.qZA(),t.YNc(57,u,2,2,"mat-option",7),t.qZA(),t.TgZ(58,"mat-label")(59,"b"),t._uU(60,"Class/Course Studying during the current academic year."),t.qZA()(),t.YNc(61,C,2,1,"mat-error",5),t.qZA()(),t.TgZ(62,"div",2)(63,"mat-form-field",16)(64,"mat-label"),t._uU(65,"Enter the Aadhaar No. of Student."),t.qZA(),t._UZ(66,"input",17),t.TgZ(67,"mat-hint"),t._uU(68,"Note: Aadhaar Card is "),t.TgZ(69,"b",18),t._uU(70,"Optional"),t.qZA(),t._uU(71," for "),t.TgZ(72,"em"),t._uU(73,"up to "),t.TgZ(74,"b"),t._uU(75,"8th"),t.qZA(),t._uU(76," standard"),t.qZA()(),t.YNc(77,J,2,1,"mat-error",5),t.qZA(),t.TgZ(78,"div",19),t.YNc(79,it,7,1,"div",5),t.YNc(80,_t,7,0,"ng-container",5),t.qZA()(),t.YNc(81,j,4,2,"div",20),t.YNc(82,ct,1,1,"mat-progress-bar",21),t.TgZ(83,"section")(84,"mat-checkbox",22),t._uU(85," Whether the student was passed in last year examination ? "),t.qZA()(),t.YNc(86,rt,6,2,"mat-card-actions",23),t.qZA()()),2&L){let et,S;t.xp6(1),t.Q6J("formGroup",X.schemeForm),t.xp6(6),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("dp_name").invalid),t.xp6(5),t.Q6J("ngForOf",X.relationships),t.xp6(3),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("dp_relationship").invalid),t.xp6(6),t.Q6J("ngForOf",X.genders),t.xp6(3),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("dp_gender").invalid),t.xp6(5),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("inst_name").invalid),t.xp6(8),t.Q6J("ngIf",null==(et=X.schemeForm.get("inst_contact_no"))?null:et.invalid),t.xp6(5),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("inst_address").invalid),t.xp6(6),t.Q6J("ngForOf",X.classStudied),t.xp6(4),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("prev_class_studied").invalid),t.xp6(5),t.Q6J("ngForOf",X.classStudied),t.xp6(4),t.Q6J("ngIf",null==X.schemeForm?null:X.schemeForm.get("curr_class_studied").invalid),t.xp6(16),t.Q6J("ngIf",null==(S=X.schemeForm.get("dp_aadhaar"))?null:S.invalid),t.xp6(2),t.Q6J("ngIf",!(null!=X.dataSource&&X.dataSource.storage_name)),t.xp6(1),t.Q6J("ngIf",X.fileName),t.xp6(1),t.Q6J("ngIf","11"==(null==X.curr_class_studied?null:X.curr_class_studied.value)||"12"==(null==X.curr_class_studied?null:X.curr_class_studied.value)||"ITI"==(null==X.curr_class_studied?null:X.curr_class_studied.value)||"Diploma"==(null==X.curr_class_studied?null:X.curr_class_studied.value)||"UG"==(null==X.curr_class_studied?null:X.curr_class_studied.value)||"PG"==(null==X.curr_class_studied?null:X.curr_class_studied.value)),t.xp6(1),t.Q6J("ngIf",X.isLoading),t.xp6(4),t.Q6J("ngIf","CLI"==(null==X.claim_details?null:X.claim_details.status)&&1==X.isRemarks||"CLI"!=(null==X.claim_details?null:X.claim_details.status))}},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,a.x0,a.CE,U.ey,B.lW,R.a8,R.hq,w.oG,P.TO,P.KE,P.bx,P.hX,P.R9,I.Hw,M.Nt,K.gD,Z.Ic,k.gM,y.xw,y.SQ,y.yH,T.pW]}),tt})()},2090:(lt,$,i)=>{"use strict";i.d($,{N:()=>w});var t=i(3097),a=i(9211),e=i(5445),_=i(4321),V=i(7804),W=i(3089),Y=i(8977),N=i(3259),l=i(6822),c=i(9741),U=i(4014);function B(P,I){if(1&P){const M=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",8),t.NdJ("change",function(Z){t.CHM(M);const k=t.oxw();return t.KtG(k.checkboxEvent(Z.checked))}),t.TgZ(2,"span",9),t._uU(3,"Employer Declaration."),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"span"),t._uU(6,"I certify that the above employee is working in our establishment & Labour Welfare Fund contribution has been deducted and paid to the board."),t.qZA()()()}}function R(P,I){if(1&P){const M=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",10),t.NdJ("change",function(Z){t.CHM(M);const k=t.oxw();return t.KtG(k.checkboxEvent(Z.checked))}),t.TgZ(2,"span",11),t._uU(3,"Employer Declaration"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"p"),t._uU(6," I certify that the above deceased employee worked in our establishment & Labour Welfare Fund contribution has been deducted and paid to the board."),t.qZA()()()}2&P&&(t.xp6(1),t.Q6J("checked",!1))}let w=(()=>{class P{constructor(M,K,Z,k){this.dialog=M,this.fb=K,this.location=Z,this.dataService=k,this.claimEvent=new t.vpe,this.schemeForm=this.fb.group({declaration_box:[null,a.kI.required]})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode")}ngOnDestroy(){localStorage.removeItem("claimCode")}checkboxEvent(M){this.condition=M}back(){this.location.back()}saveClaimDetails(){this.loading=!0,this.dataService.ClaimDocumentPDF({id:this.claim_details.id}).subscribe(M=>{e.saveAs(M,"Declaration_of_"+this.claim_details.e_name+".pdf"),this.claimEvent.emit(this.claim_details.id),this.loading=!1})}get isValidForm(){if(this.claim_details?.e_name&&(this.claim_details?.ad_postal_code||this.claim_details?.dp_postal_code)&&(this.claim_details?.acc_bank_acc_no||this.claim_details?.dp_bank_acc_no||"Q_BANK"==this.claimCode)&&(this.claim_details?.dp_name||"SPT_AST"==this.claimCode||"MRG_AST"==this.claimCode))switch(this.claimCode){case"AC_D_AST":case"NAT_D_AST":if(this.claim_details?.e_death_date&&this.claim_details?.dp_dob&&this.claim_details?.dp_postal_code)return!0;break;case"BOOK_ALW":case"DIST_SA":case"ED_INC":case"ED_SCH":case"EX_AST":case"Q_BANK":case"SM_AST":case"SPT_AST":case"STATE_SA":return!0;case"CT_AST":if(this.claim_details?.ct_course_completion_cert_no)return!0;break;case"MRG_AST":if(this.claim_details.ma_g_name)return!0}return!1}}return P.\u0275fac=function(M){return new(M||P)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.Ye),t.Y36(W.D))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-emp-app-gen"]],inputs:{firm:"firm",claim_details:"claim_details"},outputs:{claimEvent:"claimEvent"},decls:14,vars:4,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","column","fxLayoutAlign","center","fxLayoutGap","20px"],["fxLayout","row",1,"subject"],["color","warn",2,"display","block","font-size","18px"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center","fxLayoutGap","20px"],["color","warn","mat-raised-button","","type","button",3,"disabled","click"],["formControlName","declaration_box",3,"change"],[2,"text-decoration-line","underline"],[3,"checked","change"],[2,"text-decoration","underline"]],template:function(M,K){1&M&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t._uU(5,"warning"),t.qZA(),t.TgZ(6,"span")(7,"b"),t._uU(8,"Before submitting the application make sure all the given data is correct & genuine. Once the application is submitted the user can't make any changes in it."),t.qZA()()(),t.YNc(9,B,7,0,"div",5),t.YNc(10,R,7,1,"div",5),t.qZA(),t.TgZ(11,"div",6)(12,"button",7),t.NdJ("click",function(){return K.saveClaimDetails()}),t._uU(13," Submit & Generate Claim Declaration Document "),t.qZA()()()()),2&M&&(t.xp6(1),t.Q6J("formGroup",K.schemeForm),t.xp6(8),t.Q6J("ngIf",!("AC_D_AST"===K.claimCode||"NAT_D_AST"===K.claimCode)),t.xp6(1),t.Q6J("ngIf","AC_D_AST"===K.claimCode||"NAT_D_AST"===K.claimCode),t.xp6(2),t.Q6J("disabled",!(K.condition&&K.isValidForm)))},dependencies:[V.O5,a._Y,a.JJ,a.JL,a.sg,a.u,Y.lW,N.a8,l.oG,c.Hw,U.xw,U.SQ,U.Wh]}),P})()},3728:(lt,$,i)=>{"use strict";i.d($,{L:()=>B});var t=i(3097),a=i(9211),e=i(3329),s=i(3089),_=i(7804),V=i(8977),W=i(3259),Y=i(7333),N=i(9741),l=i(9059),c=i(4014);function U(R,w){1&R&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter the "),t.TgZ(2,"b"),t._uU(3,"8-character"),t.qZA(),t._uU(4," alpha numeric value. "),t.qZA())}let B=(()=>{class R{constructor(P,I,M){this.fb=P,this.dataService=I,this._location=M,this.isLoading=!1,this.schemeForm=this.fb.group({ref_no:[null,[a.kI.required,a.kI.minLength(8),a.kI.maxLength(8)]],claim_ref_file:[null,a.kI.required]}),this.claimEvent=new t.vpe}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.user=this.dataService.curr_user$.value}onFileSelected(P){this.isLoading=!0,this.doc_type="CLM_VR_DOC";const I=P.target.files;if(I.length>0){const M=I[0];if("application/pdf"!=M.type)return void alert("Only Pdf Files are Allowed !");if(this.file=I[0],this.fileName=M.name,!(M.size/1048576<=1))return void alert("File size must be lesser then 1MB");{let K=new FormData;K.append("file",M,M.name),K.append("id","2"),K.append("tz",(new Date).toISOString()),this.file_data=K}}this.upload(),this.isLoading=!1}upload(){this.isLoading=!0,this.claim_details?.id?this.dataService.Upload(this.file_data).subscribe(P=>{if(P.type===e.dt.UploadProgress&&(this.progressInfo=Math.round(100*P.loaded/P.total)),P.type==e.dt.Response){const I=Object.assign({},P.body);this.saveClaimAttachments(I.file_name)}},P=>{alert("Please try again."),this.ngOnInit()}):alert("Document Uploading required claim id."),this.isLoading=!1}saveClaimAttachments(P){const I=Object.assign({});I.firm_id=this.firm.id,I.claim_id=this.claim_details?.id,I.doc_type=this.doc_type,I.file_name=this.file.name,I.file_type=this.file.type,I.file_size=Number((this.file.size/1024).toFixed(0)),I.storage_name=P,this.dataService.saveClaimAttachments(I).subscribe(M=>{})}saveClaimDetails(P){let I=this.claim_details.ref_no,M=this.schemeForm.get("ref_no").value;if(this.schemeForm.valid)if(I==M){this.isLoading=!0;const K=this.dataService.curr_user$.value;let Z;Z=Object.assign({},this.schemeForm.value),Z.user_id=K.id,Z.firm_id=this.firm.id,Z.scheme_code=this.claimCode,Z.status=P,Z.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.status=P,this.claim_details.claim_ref_file=Z.claim_ref_file),this.dataService.saveClaimDetails(this.claim_details).subscribe(k=>{if("Claim Details are Saved Successfully."==k.message||"Claim Details are Updated Successfully."==k.message){this.claim_id=k.id,this.claimEvent.emit(this.claim_id);let y=Object.assign({});y.firm_id=this.claim_details.firm_id,y.claim_id=this.claim_details.id,y.user_id=this.user.id,y.type="C",y.from_designation_code=this.user.designation_code,y.to_designation_code="SO",y.ver_status="SAP",this.dataService.verify(y).subscribe(T=>{"clarification saved successfully."==T.message&&(alert("Claim details are submitted successfully."),this._location.back())})}this.isLoading=!1})}else alert("Please Enter the correct reference number.");else alert("Please fill all the details / upload all the documents properly.")}}return R.\u0275fac=function(P){return new(P||R)(t.Y36(a.QS),t.Y36(s.D),t.Y36(_.Ye))},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-emp-app-upload"]],inputs:{claim_details:"claim_details",firm:"firm"},outputs:{claimEvent:"claimEvent"},decls:20,vars:3,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutAlign","center","fxLayoutGap","20px"],["fxFlex","80"],["formControlName","ref_no","matInput","","maxlength","8","placeholder","Enter the Reference no. of Employee Application"],[4,"ngIf"],["fxFlex","20"],["color","primary","mat-mini-fab","","type","button",3,"click"],["formControlName","claim_ref_file","type","file",2,"display","none",3,"change"],["fileInput",""],["color","primary","mat-raised-button","","type","button",3,"click"]],template:function(P,I){if(1&P){const M=t.EpF();t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Enter the Reference no. of Employee Application"),t.qZA(),t._UZ(6,"input",4),t.TgZ(7,"mat-hint"),t._uU(8,"Reference no. is available in Employee Application"),t.qZA(),t.YNc(9,U,5,0,"mat-error",5),t.qZA(),t.TgZ(10,"div",6),t._uU(11),t.TgZ(12,"button",7),t.NdJ("click",function(){t.CHM(M);const Z=t.MAs(16);return t.KtG(Z.click())}),t.TgZ(13,"mat-icon"),t._uU(14,"attach_file"),t.qZA(),t.TgZ(15,"input",8,9),t.NdJ("change",function(Z){return I.onFileSelected(Z)}),t.qZA()()()(),t.TgZ(17,"div",2)(18,"button",10),t.NdJ("click",function(){return I.saveClaimDetails("S")}),t._uU(19," Submit & Forward to TNLWB "),t.qZA()()()()}2&P&&(t.xp6(1),t.Q6J("formGroup",I.schemeForm),t.xp6(8),t.Q6J("ngIf",I.schemeForm.get("ref_no").hasError("minlength")),t.xp6(2),t.hij(" ",I.fileName||"Select Employee Application Copy"," "))},dependencies:[_.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,V.lW,W.a8,Y.TO,Y.KE,Y.bx,Y.hX,N.Hw,l.Nt,c.xw,c.SQ,c.Wh,c.yH]}),R})()},6098:(lt,$,i)=>{"use strict";i.d($,{e:()=>r});var t=i(3097),a=i(9211),e=i(3089),s=i(2432),_=i(7804),V=i(8521),W=i(8977),Y=i(3259),N=i(7333),l=i(9741),c=i(9059),U=i(7495),B=i(7018),R=i(6672),w=i(613),P=i(4014);function I(p,n){1&p&&t._UZ(0,"mat-spinner",23)}function M(p,n){if(1&p&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&p){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.district_name," ")}}function K(p,n){1&p&&t._UZ(0,"mat-spinner",23)}function Z(p,n){if(1&p&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&p){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij("",o.taluk_name," ")}}function k(p,n){1&p&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose the Taluk. "),t.qZA())}function y(p,n){1&p&&t._UZ(0,"mat-spinner",23)}function T(p,n){if(1&p&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&p){const o=n.$implicit;t.Q6J("value",o.type),t.xp6(1),t.Oqu(o.name)}}function O(p,n){1&p&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose the Panchayat Type. "),t.qZA())}function A(p,n){1&p&&t._UZ(0,"mat-spinner",23)}function E(p,n){if(1&p&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&p){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.panchayat_name," ")}}function h(p,n){1&p&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Panchayat. "),t.qZA())}function b(p,n){if(1&p){const o=t.EpF();t.TgZ(0,"mat-card-actions",25)(1,"button",26),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",27)(4,"button",28),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&p){const o=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",o.schemeForm.valid),t.xp6(1),t.Q6J("disabled",o.isLoading||o.schemeForm.invalid)}}let r=(()=>{class p{constructor(o,m,u){this.fb=o,this.dataService=m,this.router=u,this.isLoading=!1,this.vtype=[{type:"V",name:"Village Panchayat"},{type:"T",name:"Town Panchayat"},{type:"M",name:"Municipality Panchayat"}],this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({ad_house_no:[null,[a.kI.required,a.kI.maxLength(250),a.kI.pattern("^[\\w.,()/&@ ]+$")]],ad_street_name:[null,[a.kI.required,a.kI.maxLength(250),a.kI.pattern("^[\\w ,.()]*$")]],ad_area:[null,[a.kI.required,a.kI.pattern("^[A-Za-z ,.]*$")]],ad_district_id:[null,[a.kI.required]],ad_panchayat_type:[null,[a.kI.required]],ad_panchayat_id:[null,[a.kI.required]],ad_taluk_id:[null,[a.kI.required]],ad_landmark:[null,[a.kI.required,a.kI.maxLength(40),a.kI.pattern("^[\\w /&@,.]+$")]],ad_postal_code:[null,[a.kI.required,a.kI.pattern("^[0-9]{6}$")]],ad_latitude:[null,[a.kI.pattern("-*(\\d{1,3})\\.(\\d{0,6})")]],ad_longitude:[null,[a.kI.pattern("-*(\\d{1,3})\\.(\\d{0,6})")]]})}get ad_district_id(){return this.schemeForm.get("ad_district_id")}get panchayatType(){return this.schemeForm.get("ad_panchayat_type")}ngOnInit(){this.claimCode=localStorage.getItem("claimCode")}ngOnChanges(){this.claim_details&&(this.getDistricts(),this.claim_details.ad_taluk_id&&this.getTaluks(),this.claim_details.ad_panchayat_id&&(this.getPanchayats(),this.claim_details.ad_district_id?this.schemeForm.get("ad_taluk_id").enable():this.schemeForm.get("ad_taluk_id").disable()),null!=this.claim_details.ad_district_id&&null!=this.claim_details.ad_panchayat_type&&null!=this.claim_details.ad_panchayat_id?this.schemeForm.get("ad_panchayat_id").enable():this.schemeForm.get("ad_panchayat_id").disable(),this.draftClaimForm(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.setValue({ad_house_no:this.claim_details?.ad_house_no,ad_street_name:this.claim_details?.ad_street_name,ad_area:this.claim_details?.ad_area,ad_district_id:this.claim_details?.ad_district_id,ad_panchayat_type:this.claim_details?.ad_panchayat_type,ad_panchayat_id:this.claim_details?.ad_panchayat_id,ad_taluk_id:this.claim_details?.ad_taluk_id,ad_landmark:this.claim_details?.ad_landmark,ad_postal_code:this.claim_details?.ad_postal_code,ad_latitude:this.claim_details?.ad_latitude,ad_longitude:this.claim_details?.ad_longitude})}onSelectionChangeDistrict(o,m){o?(this.schemeForm.get("ad_taluk_id").enable(),this.getTaluks()):this.schemeForm.get("ad_taluk_id").disable(),o&&m?(this.schemeForm.get("ad_panchayat_id").enable(),this.getPanchayats()):this.schemeForm.get("ad_panchayat_id").disable()}getDistricts(){this.dataService.getDistricts({}).subscribe(o=>{this.districts=o.rows})}getPanchayats(){this.isLoading=!0,this.dataService.getPanchayats({district_id:this.ad_district_id.value,type:this.panchayatType.value}).subscribe(o=>{this.panchayats=o.rows,this.panchayats.length<=0&&this.schemeForm.get("ad_panchayat_id")?.disable(),this.isLoading=!1})}getTaluks(){this.dataService.getTaluks({district_id:this.ad_district_id.value}).subscribe(o=>{this.taluks=o.rows})}onSelectionChangePanchayatType(o,m){o&&m?(this.schemeForm.get("ad_panchayat_id").enable(),this.getPanchayats()):this.schemeForm.get("ad_panchayat_id").disable()}saveClaimDetails(){let o="D"==this.claim_details.status?"D":"CLI";if("S"==o)return this.router.navigate(["/apps/my-claims"]);{this.isLoading=!0;let m=Object.assign({},this.schemeForm.value);return m.user_id=this.dataService.curr_user$.value.id,m.firm_id=this.firm.id,m.scheme_code=this.claimCode,m.status=o,m.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.ad_house_no=m.ad_house_no,this.claim_details.ad_street_name=m.ad_street_name,this.claim_details.ad_area=m.ad_area,this.claim_details.ad_district_id=m.ad_district_id,this.claim_details.ad_panchayat_type=m.ad_panchayat_type,this.claim_details.ad_panchayat_id=m.ad_panchayat_id,this.claim_details.ad_taluk_id=m.ad_taluk_id,this.claim_details.ad_landmark=m.ad_landmark,this.claim_details.ad_postal_code=m.ad_postal_code,this.claim_details.ad_latitude=m.ad_latitude,this.claim_details.ad_longitude=m.ad_longitude,this.claim_details.status=m.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:m).subscribe(u=>{("Claim Details are Saved Successfully."==u.message||"Claim Details are Updated Successfully."==u.message)&&(this.claim_id=u.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}}return p.\u0275fac=function(o){return new(o||p)(t.Y36(a.QS),t.Y36(e.D),t.Y36(s.F0))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-employee-address"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:84,vars:13,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["appearance","outline","fxFill",""],["formControlName","ad_house_no","maxlength","501","matInput","","placeholder","E.g. 101,OneCrestApartment"],["appearance","outline","fxFlex","50"],["formControlName","ad_street_name","matInput","","maxlength","251","placeholder","E.g.Periyaar Salai"],["formControlName","ad_area","matInput","","placeholder","Locality/Area","maxlength","50"],["formControlName","ad_district_id",3,"selectionChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["diameter","30",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ad_taluk_id"],[4,"ngIf"],["formControlName","ad_panchayat_type",3,"selectionChange"],["fxFlex","50"],["formControlName","ad_panchayat_id"],["formControlName","ad_postal_code","matInput","","maxlength","6","placeholder","E.g. 609609","type","text"],["formControlName","ad_landmark","matInput","","placeholder","E.g. Near by Murugan Temple."],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","10px"],["autocomplete","on","formControlName","ad_latitude","maxlength","11","matInput","","placeholder","E.g. 10.956023","type","text"],["autocomplete","on","formControlName","ad_longitude","maxlength","11","matInput","","placeholder","E.g. 78.556770","type","text"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],["diameter","30"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(o,m){1&o&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",0)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Flat,House No. With its Name"),t.qZA(),t._UZ(7,"input",4),t.qZA()(),t.TgZ(8,"div",2)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11,"Street Name"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Locality/Area"),t.qZA(),t._UZ(16,"input",7),t.qZA()(),t._UZ(17,"div",2),t.TgZ(18,"div",2)(19,"mat-form-field",5)(20,"mat-select",8),t.NdJ("selectionChange",function(){return m.onSelectionChangeDistrict(m.ad_district_id.value,m.panchayatType.value)}),t.TgZ(21,"mat-option")(22,"div",9),t._uU(23," None "),t.YNc(24,I,1,0,"mat-spinner",10),t.qZA()(),t.YNc(25,M,2,2,"mat-option",11),t.qZA(),t.TgZ(26,"mat-label")(27,"mat-icon"),t._uU(28,"add_location"),t.qZA(),t._uU(29," District "),t.qZA()(),t.TgZ(30,"mat-form-field",5)(31,"mat-select",12)(32,"mat-option")(33,"div",9),t._uU(34," None "),t.YNc(35,K,1,0,"mat-spinner",10),t.qZA()(),t.YNc(36,Z,2,2,"mat-option",11),t.qZA(),t.TgZ(37,"mat-label")(38,"mat-icon"),t._uU(39," add_location"),t.qZA(),t._uU(40," Taluk "),t.qZA(),t.YNc(41,k,4,0,"mat-error",13),t.qZA()(),t.TgZ(42,"div",2)(43,"mat-form-field",5)(44,"mat-select",14),t.NdJ("selectionChange",function(){return m.onSelectionChangePanchayatType(m.ad_district_id.value,m.panchayatType.value)}),t.TgZ(45,"mat-option")(46,"div",9),t._uU(47," None "),t.YNc(48,y,1,0,"mat-spinner",10),t.qZA()(),t.YNc(49,T,2,2,"mat-option",11),t.qZA(),t.TgZ(50,"mat-label")(51,"mat-icon"),t._uU(52," add_location"),t.qZA(),t._uU(53," Panchayat Types "),t.qZA(),t.YNc(54,O,4,0,"mat-error",13),t.qZA(),t.TgZ(55,"mat-form-field",15)(56,"mat-label"),t._uU(57,"Panchayat"),t.qZA(),t.TgZ(58,"mat-select",16)(59,"mat-option")(60,"div",9),t._uU(61," None "),t.YNc(62,A,1,0,"mat-spinner",10),t.qZA()(),t.YNc(63,E,2,2,"mat-option",11),t.qZA(),t.YNc(64,h,4,0,"mat-error",13),t.qZA()(),t.TgZ(65,"div",2)(66,"mat-form-field",5)(67,"mat-label"),t._uU(68,"Pin code"),t.qZA(),t._UZ(69,"input",17),t.qZA(),t.TgZ(70,"mat-form-field",5)(71,"mat-label"),t._uU(72,"Landmark"),t.qZA(),t._UZ(73,"input",18),t.qZA()(),t.TgZ(74,"div",19)(75,"mat-form-field",5)(76,"mat-label"),t._uU(77,"Latitude No."),t.qZA(),t._UZ(78,"input",20),t.qZA(),t.TgZ(79,"mat-form-field",5)(80,"mat-label"),t._uU(81,"Longitude No."),t.qZA(),t._UZ(82,"input",21),t.qZA()(),t.YNc(83,b,6,2,"mat-card-actions",22),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",m.schemeForm),t.xp6(23),t.Q6J("ngIf",m.isLoading),t.xp6(1),t.Q6J("ngForOf",m.districts),t.xp6(10),t.Q6J("ngIf",m.isLoading),t.xp6(1),t.Q6J("ngForOf",m.taluks),t.xp6(5),t.Q6J("ngIf",m.schemeForm.get("ad_taluk_id").hasError("required")),t.xp6(7),t.Q6J("ngIf",m.isLoading),t.xp6(1),t.Q6J("ngForOf",m.vtype),t.xp6(5),t.Q6J("ngIf",m.schemeForm.get("ad_panchayat_type").hasError("required")),t.xp6(8),t.Q6J("ngIf",m.isLoading),t.xp6(1),t.Q6J("ngForOf",m.panchayats),t.xp6(1),t.Q6J("ngIf",m.schemeForm.get("ad_panchayat_id").hasError("required")),t.xp6(19),t.Q6J("ngIf","CLI"==(null==m.claim_details?null:m.claim_details.status)&&1==m.isRemarks||"CLI"!=(null==m.claim_details?null:m.claim_details.status)))},dependencies:[_.sg,_.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,V.ey,W.lW,Y.a8,Y.hq,N.TO,N.KE,N.hX,l.Hw,c.Nt,U.Ou,B.gD,R.Ic,w.gM,P.xw,P.SQ,P.Wh,P.s9,P.yH]}),p})()},6468:(lt,$,i)=>{"use strict";i.d($,{o:()=>b});var t=i(3097),a=i(9211),e=i(3089),s=i(2432),_=i(4209),V=i(7804),W=i(8977),Y=i(3259),N=i(1477),l=i(7333),c=i(9059),U=i(6672),B=i(613),R=i(4014);function w(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.name(n.schemeForm.get("ad_accident_nature")),t.oJD)}}function P(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.address(n.schemeForm.get("e_death_place")),t.oJD)}}function I(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.onlyReq(n.schemeForm.get("e_death_date")),t.oJD)}}function M(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.onlyReq(n.schemeForm.get("e_death_time")),t.oJD)}}function K(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," *Required "),t.qZA())}function Z(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Required :"),t.TgZ(2,"b"),t._uU(3,"21-digit"),t.qZA(),t._uU(4," alpha numeric value. "),t.qZA())}function k(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"b"),t._uU(3,"10-digit"),t.qZA(),t._uU(4," numeric values are allowed. "),t.qZA())}function y(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," * Required "),t.qZA())}function T(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"b"),t._uU(3,"10-digit"),t.qZA(),t._uU(4," numeric values are allowed. "),t.qZA())}function O(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," * Required. "),t.qZA())}function A(r,p){if(1&r&&(t.TgZ(0,"div",6)(1,"mat-form-field",7)(2,"mat-label"),t._uU(3,"First Investigation Report (FIR) Number."),t.qZA(),t._UZ(4,"input",17),t.YNc(5,k,5,0,"mat-error",4),t.YNc(6,y,2,0,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Enter the Postmortem Report Number."),t.qZA(),t._UZ(10,"input",18),t.YNc(11,T,5,0,"mat-error",4),t.YNc(12,O,2,0,"mat-error",4),t.qZA()()),2&r){const n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.schemeForm.get("ad_fir_no").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",n.schemeForm.get("ad_fir_no").hasError("required")),t.xp6(5),t.Q6J("ngIf",n.schemeForm.get("ad_postmortem_report_no").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",n.schemeForm.get("ad_postmortem_report_no").hasError("required"))}}function E(r,p){1&r&&t._UZ(0,"div",6)}function h(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"mat-card-actions",19)(1,"button",20),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",21)(4,"button",22),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&r){const n=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",n.schemeForm.valid),t.xp6(1),t.Q6J("disabled",n.isLoading||n.schemeForm.invalid)}}let b=(()=>{class r{constructor(n,o,m,u){this.dataService=n,this.router=o,this.fb=m,this.err=u,this.claimEvent=new t.vpe,this.isRemarks=!1,this.isLoading=!1,this.schemeForm=this.fb.group({e_death_place:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 .,@&()-/]+$"),a.kI.maxLength(255)]],ad_accident_nature:[null,[a.kI.required,a.kI.pattern("[A-Za-z .]+")]],e_death_date:[null,a.kI.required],e_death_time:[null,a.kI.required],e_death_cert_no:[null,[a.kI.required,a.kI.pattern("\\w{21}")]],ad_fir_no:[null,[a.kI.required,a.kI.pattern("\\d{10}")]],ad_postmortem_report_no:[null,[a.kI.required,a.kI.pattern("\\d{10}")]]})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),"NAT_D_AST"==this.claimCode&&(this.schemeForm.get("ad_fir_no").disable(),this.schemeForm.get("ad_postmortem_report_no").disable())}ngOnChanges(n){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.patchValue({e_death_place:this.claim_details?.e_death_place,ad_accident_nature:this.claim_details?.ad_accident_nature,e_death_date:this.claim_details?.e_death_date,e_death_time:this.claim_details?.e_death_time,e_death_cert_no:this.claim_details?.e_death_cert_no,ad_fir_no:this.claim_details?.ad_fir_no,ad_postmortem_report_no:this.claim_details?.ad_postmortem_report_no})}saveClaimDetails(){let n="D"==this.claim_details.status?"D":"CLI";if("S"==n)return this.router.navigate(["/apps/my-claims"]);{let o;return this.isLoading=!0,o=Object.assign({},this.schemeForm.value),o.user_id=this.dataService.curr_user$.value.id,o.firm_id=this.firm.id,o.scheme_code=this.claimCode,o.status=n,o.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.e_death_place=o.e_death_place,this.claim_details.ad_accident_nature=o.ad_accident_nature,this.claim_details.e_death_date=o.e_death_date,this.claim_details.e_death_time=o.e_death_time,this.claim_details.e_death_cert_no=o.e_death_cert_no,this.claim_details.ad_fir_no=o.ad_fir_no,this.claim_details.ad_postmortem_report_no=o.ad_postmortem_report_no),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:o).subscribe(m=>{("Claim Details are Saved Successfully."==m.message||"Claim Details are Updated Successfully."==m.message)&&(this.claim_id=m.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}onFileSelected(n){}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(e.D),t.Y36(s.F0),t.Y36(a.QS),t.Y36(_.E))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-employee-death-details"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:41,vars:12,consts:[[3,"formGroup"],["fxLayout","column"],["fxFill",""],["formControlName","ad_accident_nature","matInput","","maxlength","45","placeholder","E.g. Road,Establishment Premises & etc"],[4,"ngIf"],["formControlName","e_death_place","matInput","","maxlength","255","placeholder","Employee's Death Place."],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","e_death_date","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","e_death_time","matInput","","placeholder","Employee's Death Time.","type","time"],["fxFlex","100"],["formControlName","e_death_cert_no","matInput","","maxlength","21","placeholder","Enter the Death Certificate Number."],["fxLayout","row","fxLayoutGap","20px",4,"ngIf"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],["formControlName","ad_fir_no","matInput","","maxlength","10","placeholder","First Investigation Report (FIR) Number."],["formControlName","ad_postmortem_report_no","matInput","","maxlength","10","placeholder","Enter the Postmortem Report Number."],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"mat-card")(1,"form",0)(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Nature of accident."),t.qZA(),t._UZ(6,"input",3),t.YNc(7,w,2,1,"mat-error",4),t.qZA(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"Employee's Death Place."),t.qZA(),t._UZ(11,"textarea",5),t.YNc(12,P,2,1,"mat-error",4),t.qZA(),t.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Employee's Death Date"),t.qZA(),t._UZ(17,"input",8),t.TgZ(18,"mat-hint"),t._uU(19,"MM/DD/YYYY"),t.qZA(),t._UZ(20,"mat-datepicker-toggle",9)(21,"mat-datepicker",null,10),t.YNc(23,I,2,1,"mat-error",4),t.qZA(),t.TgZ(24,"mat-form-field",7)(25,"mat-label"),t._uU(26,"Employee's Death Time."),t.qZA(),t._UZ(27,"input",11),t.YNc(28,M,2,1,"mat-error",4),t.TgZ(29,"mat-hint"),t._uU(30,"E.g:12.50 PM"),t.qZA()()(),t.TgZ(31,"div",6)(32,"mat-form-field",12)(33,"mat-label"),t._uU(34,"Enter the Death Certificate Number."),t.qZA(),t._UZ(35,"input",13),t.YNc(36,K,2,0,"mat-error",4),t.YNc(37,Z,5,0,"mat-error",4),t.qZA()(),t.YNc(38,A,13,4,"div",14),t.YNc(39,E,1,0,"div",14),t.YNc(40,h,6,2,"mat-card-actions",15),t.qZA()()()),2&n){const m=t.MAs(22);t.xp6(1),t.Q6J("formGroup",o.schemeForm),t.xp6(6),t.Q6J("ngIf",o.schemeForm.get("ad_accident_nature").invalid),t.xp6(5),t.Q6J("ngIf",o.schemeForm.get("e_death_place").invalid),t.xp6(5),t.Q6J("matDatepicker",m),t.xp6(3),t.Q6J("for",m),t.xp6(3),t.Q6J("ngIf",o.schemeForm.get("e_death_date").invalid),t.xp6(5),t.Q6J("ngIf",o.schemeForm.get("e_death_time").invalid),t.xp6(8),t.Q6J("ngIf",o.schemeForm.get("e_death_cert_no").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.schemeForm.get("e_death_cert_no").hasError("pattern")),t.xp6(1),t.Q6J("ngIf","AC_D_AST"===o.claimCode),t.xp6(1),t.Q6J("ngIf","AC_D_AST"===o.claimCode),t.xp6(1),t.Q6J("ngIf","CLI"==(null==o.claim_details?null:o.claim_details.status)&&1==o.isRemarks||"CLI"!=(null==o.claim_details?null:o.claim_details.status))}},dependencies:[V.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,W.lW,Y.a8,Y.hq,N.Mq,N.hl,N.nW,l.TO,l.KE,l.bx,l.hX,l.R9,c.Nt,U.Ic,B.gM,R.xw,R.SQ,R.s9,R.yH]}),r})()},9266:(lt,$,i)=>{"use strict";i.d($,{W:()=>o});var t=i(3097),a=i(9211),e=i(2432),s=i(3089),_=i(4209),V=i(7804),W=i(8521),Y=i(8977),N=i(3259),l=i(1477),c=i(7333),U=i(9741),B=i(9059),R=i(7018),w=i(6672),P=i(613),I=i(4014);function M(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.name(C.schemeForm.get("e_name")),t.oJD)}}function K(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.onlyAlphabetic(C.schemeForm.get("e_designation")),t.oJD)}}function Z(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.onlyReq(C.schemeForm.get("e_dob")),t.oJD)}}function k(m,u){if(1&m&&(t.TgZ(0,"div")(1,"mat-option",27),t._uU(2),t.qZA()()),2&m){const C=u.$implicit;t.xp6(1),t.Q6J("value",C.code),t.xp6(1),t.Oqu(C.name)}}function y(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.onlyReq(C.schemeForm.get("e_gender")),t.oJD)}}function T(m,u){if(1&m&&(t.TgZ(0,"div")(1,"mat-option",27),t._uU(2),t.qZA()()),2&m){const C=u.$implicit;t.xp6(1),t.Q6J("value",C),t.xp6(1),t.Oqu(C)}}function O(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.onlyReq(C.schemeForm.get("e_marital_status")),t.oJD)}}function A(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.mobNo(C.schemeForm.get("e_mobile")),t.oJD)}}function E(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.mobNo(C.schemeForm.get("e_phone")),t.oJD)}}function h(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.salary(C.schemeForm.get("e_salary_pm")),t.oJD)}}function b(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.aadhaarNo(C.schemeForm.get("e_aadhaar_no")),t.oJD)}}function r(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.aadhaarNo(C.schemeForm.get("e_uan_no")),t.oJD)}}function p(m,u){if(1&m&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",26),t.qZA()),2&m){const C=t.oxw();t.xp6(1),t.Q6J("innerHTML",C.err.onlyReq(C.schemeForm.get("e_working_from_date")),t.oJD)}}function n(m,u){if(1&m){const C=t.EpF();t.TgZ(0,"mat-card-actions",28)(1,"button",29),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",30)(4,"button",31),t.NdJ("click",function(){t.CHM(C);const it=t.oxw();return t.KtG(it.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&m){const C=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",C.schemeForm.valid),t.xp6(1),t.Q6J("disabled",C.isLoading||C.schemeForm.invalid)}}let o=(()=>{class m{constructor(C,J,it,_t){this.router=C,this.dataService=J,this.fb=it,this.err=_t,this.isLoading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.employeeGenders=[{name:"Male",code:"M"},{name:"Female",code:"F"},{name:"Transgender",code:"T"}],this.maritalStatus=["Unmarried.","Married.","Widowed."],this.schemeForm=this.fb.group({e_name:[null,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45)]],e_designation:[null,[a.kI.required,a.kI.maxLength(45),a.kI.minLength(1),a.kI.pattern("^[A-Z a-z.,]+$")]],e_dob:[null,a.kI.required],e_gender:[null,a.kI.required],e_marital_status:[null,a.kI.required],e_mobile:[null,[a.kI.required,a.kI.minLength(10),a.kI.maxLength(10),a.kI.pattern("^[0-9]{10}$")]],e_phone:[null,[a.kI.pattern("^[0-9]{10}$")]],e_email:[null,[a.kI.required,a.kI.email,a.kI.maxLength(248)]],e_salary_pm:[null,[a.kI.required,a.kI.pattern("^\\d+(\\.)*\\d{1,2}$"),a.kI.max(25e3),a.kI.min(0)]],e_aadhaar_no:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$"),a.kI.minLength(12),a.kI.maxLength(12)]],e_id_no:[null,[a.kI.required,a.kI.pattern("^\\w+$"),a.kI.maxLength(16)]],e_uan_no:[null,[a.kI.pattern("^[0-9]{12}$")]],e_working_from_date:[null,[a.kI.required]]})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),"ED_INC"===this.claimCode&&(this.schemeForm.get("e_salary_pm").clearValidators(),this.schemeForm.get("e_salary_pm").setValidators([a.kI.pattern("^\\d+(\\.)*\\d{1,2}$"),a.kI.maxLength(12),a.kI.min(0)]))}ngOnChanges(){this.claim_details&&(this.draftClaimForm(),this.isRemarkedClaim())}isRemarkedClaim(){"CLI"==this.claim_details.status&&(this.isRemarks?(this.schemeForm.enable(),this.schemeForm.updateValueAndValidity()):(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.setValue({e_name:this.claim_details?.e_name,e_designation:this.claim_details?.e_designation,e_dob:this.claim_details?.e_dob,e_gender:this.claim_details?.e_gender,e_marital_status:this.claim_details?.e_marital_status,e_mobile:this.claim_details?.e_mobile,e_phone:this.claim_details?.e_phone,e_email:this.claim_details?.e_email,e_salary_pm:this.claim_details?.e_salary_pm,e_aadhaar_no:this.claim_details?.e_aadhaar_no,e_id_no:this.claim_details?.e_id_no,e_uan_no:this.claim_details?.e_uan_no,e_working_from_date:this.claim_details?.e_working_from_date})}onFileSelected(C){}saveClaimDetails(){let C="D"==this.claim_details.status?"D":"CLI";if("S"==C)return this.router.navigate(["/apps/my-claims"]);{let J;return this.isLoading=!0,J=Object.assign({},this.schemeForm.value),J.user_id=this.dataService.curr_user$.value.id,J.firm_id=this.firm.id,J.scheme_code=this.claimCode,J.status=C,J.claim_id=this.claim_id,this.claim_details&&(this.claim_details.e_name=J.e_name,this.claim_details.e_id_no=J.e_id_no,this.claim_details.e_designation=J.e_designation,this.claim_details.e_dob=J.e_dob,this.claim_details.e_email=J.e_email,this.claim_details.e_mobile=J.e_mobile,this.claim_details.e_phone=J.e_phone,this.claim_details.e_aadhaar_no=J.e_aadhaar_no,this.claim_details.e_salary_pm=J.e_salary_pm,this.claim_details.e_marital_status=J.e_marital_status,this.claim_details.e_gender=J.e_gender,this.claim_details.status=J.status,this.claim_details.e_uan_no=J.e_uan_no,this.claim_details.e_working_from_date=J.e_working_from_date),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:J).subscribe(it=>{"Claim Details are Saved Successfully."==it.message||"Claim Details are Updated Successfully."==it.message?(this.claim_id=it.id,this.claimEvent.emit(this.claim_id)):"Duplicate Claims are not Allowed!"==it.message&&alert("Duplicate Claims are not Allowed.."),this.isLoading=!1})}}}return m.\u0275fac=function(C){return new(C||m)(t.Y36(e.F0),t.Y36(s.D),t.Y36(a.QS),t.Y36(_.E))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-employee-details"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:98,vars:19,consts:[[3,"formGroup"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","100"],["autocomplete","on","formControlName","e_name","matInput","","maxlength","46","placeholder","Name of Employee (As per ID Details)"],["matSuffix",""],[4,"ngIf"],["fxFlex","50"],["autocomplete","on","formControlName","e_designation","matInput","","maxlength","46","placeholder","Designation of Employee"],["formControlName","e_dob","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","e_gender"],[4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50"],["formControlName","e_marital_status"],["autocomplete","on","formControlName","e_mobile","maxlength","10","matInput","","placeholder","Mobile Number"],["autocomplete","on","formControlName","e_phone","matInput","","maxlength","10","placeholder","Landline Number"],["autocomplete","on","formControlName","e_email","matInput","","maxlength","249","name","email","placeholder","name@Example.com"],["autocomplete","on","formControlName","e_salary_pm","matInput","","maxlength","30","placeholder","E.g.25000"],["autocomplete","on","formControlName","e_id_no","matInput","","maxlength","16","placeholder","Enter the Employee ID Number."],["autocomplete","on","formControlName","e_aadhaar_no","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of the Employee"],["autocomplete","on","formControlName","e_uan_no","matInput","","maxlength","16","placeholder","E.g 132454649875"],["formControlName","e_working_from_date","matInput","",3,"matDatepicker"],["pickere",""],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(C,J){if(1&C&&(t.TgZ(0,"mat-card")(1,"form",0)(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Name of Employee (As per Employee ID Details)"),t.qZA(),t._UZ(7,"input",4),t.TgZ(8,"mat-icon",5),t._uU(9,"person"),t.qZA(),t.YNc(10,M,2,1,"mat-error",6),t.qZA()(),t.TgZ(11,"div",2)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Designation of Employee"),t.qZA(),t._UZ(15,"input",8),t.YNc(16,K,2,1,"mat-error",6),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19,"Date of Birth"),t.qZA(),t._UZ(20,"input",9)(21,"mat-datepicker-toggle",10)(22,"mat-datepicker",null,11),t.YNc(24,Z,2,1,"mat-error",6),t.qZA()(),t.TgZ(25,"div",2)(26,"mat-form-field",7)(27,"mat-select",12)(28,"mat-option"),t._uU(29,"*none*"),t.qZA(),t.YNc(30,k,3,2,"div",13),t.qZA(),t.TgZ(31,"mat-label"),t._uU(32," Gender "),t.qZA(),t.YNc(33,y,2,1,"mat-error",6),t.qZA(),t.TgZ(34,"mat-form-field",14)(35,"mat-select",15)(36,"mat-option"),t._uU(37,"*none*"),t.qZA(),t.YNc(38,T,3,2,"div",13),t.qZA(),t.TgZ(39,"mat-label")(40,"mat-icon"),t._uU(41,"people"),t.qZA(),t._uU(42," Marital Status "),t.qZA(),t.YNc(43,O,2,1,"mat-error",6),t.qZA()(),t.TgZ(44,"div",2)(45,"mat-form-field",14)(46,"mat-label"),t._uU(47,"Mobile Number"),t.qZA(),t._UZ(48,"input",16),t.TgZ(49,"mat-icon",5),t._uU(50,"stay_current_portrait"),t.qZA(),t.YNc(51,A,2,1,"mat-error",6),t.qZA(),t.TgZ(52,"mat-form-field",14)(53,"mat-label"),t._uU(54,"Landline/Secondary Number"),t.qZA(),t._UZ(55,"input",17),t.TgZ(56,"mat-icon",5),t._uU(57,"phone"),t.qZA(),t.YNc(58,E,2,1,"mat-error",6),t.qZA()(),t.TgZ(59,"div",2)(60,"mat-form-field",7)(61,"mat-label"),t._uU(62,"Email Address"),t.qZA(),t._UZ(63,"input",18),t.TgZ(64,"mat-icon",5),t._uU(65,"mail_outline"),t.qZA()(),t.TgZ(66,"mat-form-field",14)(67,"mat-label"),t._uU(68,"Monthly Salary (Basic + DA)"),t.qZA(),t._UZ(69,"input",19),t.TgZ(70,"mat-hint"),t._uU(71,"Note: Salary Limit is Applicable for Some Claims."),t.qZA(),t.YNc(72,h,2,1,"mat-error",6),t.qZA()(),t.TgZ(73,"div",2)(74,"mat-form-field",7)(75,"mat-label"),t._uU(76,"Employee ID Number."),t.qZA(),t._UZ(77,"input",20),t.qZA(),t.TgZ(78,"mat-form-field",7),t._UZ(79,"input",21),t.TgZ(80,"mat-label"),t._uU(81,"Employee Aadhaar no."),t.qZA(),t.YNc(82,b,2,1,"mat-error",6),t.qZA()(),t.TgZ(83,"div",2)(84,"mat-form-field",7)(85,"mat-label"),t._uU(86,"UAN Number of the Employee"),t.qZA(),t._UZ(87,"input",22),t.YNc(88,r,2,1,"mat-error",6),t.qZA(),t.TgZ(89,"mat-form-field",7)(90,"mat-label"),t._uU(91,"Employee Working From"),t.qZA(),t._UZ(92,"input",23)(93,"mat-datepicker-toggle",10)(94,"mat-datepicker",null,24),t.YNc(96,p,2,1,"mat-error",6),t.qZA()(),t.YNc(97,n,6,2,"mat-card-actions",25),t.qZA()()()),2&C){const it=t.MAs(23),_t=t.MAs(95);let ut,H,ot,v,G,Q,j,ct,rt,pt,tt;t.xp6(1),t.Q6J("formGroup",J.schemeForm),t.xp6(9),t.Q6J("ngIf",null==(ut=J.schemeForm.get("e_name"))?null:ut.invalid),t.xp6(6),t.Q6J("ngIf",null==(H=J.schemeForm.get("e_designation"))?null:H.invalid),t.xp6(4),t.Q6J("matDatepicker",it),t.xp6(1),t.Q6J("for",it),t.xp6(3),t.Q6J("ngIf",null==(ot=J.schemeForm.get("e_dob"))?null:ot.invalid),t.xp6(6),t.Q6J("ngForOf",J.employeeGenders),t.xp6(3),t.Q6J("ngIf",null==(v=J.schemeForm.get("e_gender"))?null:v.invalid),t.xp6(5),t.Q6J("ngForOf",J.maritalStatus),t.xp6(5),t.Q6J("ngIf",null==(G=J.schemeForm.get("e_marital_status"))?null:G.invalid),t.xp6(8),t.Q6J("ngIf",null==(Q=J.schemeForm.get("e_mobile"))?null:Q.invalid),t.xp6(7),t.Q6J("ngIf",null==(j=J.schemeForm.get("e_phone"))?null:j.invalid),t.xp6(14),t.Q6J("ngIf",null==(ct=J.schemeForm.get("e_salary_pm"))?null:ct.invalid),t.xp6(10),t.Q6J("ngIf",null==(rt=J.schemeForm.get("e_aadhaar_no"))?null:rt.invalid),t.xp6(6),t.Q6J("ngIf",null==(pt=J.schemeForm.get("e_uan_no"))?null:pt.invalid),t.xp6(4),t.Q6J("matDatepicker",_t),t.xp6(1),t.Q6J("for",_t),t.xp6(3),t.Q6J("ngIf",null==(tt=J.schemeForm.get("e_working_from_date"))?null:tt.invalid),t.xp6(1),t.Q6J("ngIf","CLI"==(null==J.claim_details?null:J.claim_details.status)&&1==J.isRemarks||"CLI"!=(null==J.claim_details?null:J.claim_details.status))}},dependencies:[V.sg,V.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,W.ey,Y.lW,N.a8,N.hq,l.Mq,l.hl,l.nW,c.TO,c.KE,c.bx,c.hX,c.R9,U.Hw,B.Nt,R.gD,w.Ic,P.gM,I.xw,I.SQ,I.yH],styles:[".groupName[_ngcontent-%COMP%]{background-color:#add8e6;padding:1%}"]}),m})()},8873:(lt,$,i)=>{"use strict";i.d($,{o:()=>b});var t=i(8887),a=i(9211),e=i(4931),s=i(7059),_=i(7057),V=i(943),W=i(2711),Y=i(5826),N=i(4104),l=i(677),c=i(3097),U=i(3089),B=i(2432),R=i(7804),w=i(8977),P=i(7333),I=i(9741),M=i(9059),K=i(7495),Z=i(4014),k=i(6281);function y(r,p){1&r&&(c.TgZ(0,"div",9),c._UZ(1,"mat-spinner",10),c.qZA())}function T(r,p){if(1&r){const n=c.EpF();c.ynx(0),c.TgZ(1,"tr",15)(2,"td",17),c._uU(3),c.qZA(),c.TgZ(4,"td",17),c._uU(5),c.ALo(6,"titlecase"),c.qZA(),c.TgZ(7,"td",17),c._uU(8),c.qZA(),c.TgZ(9,"td",17),c._uU(10),c.qZA(),c.TgZ(11,"td",17),c._uU(12),c.qZA(),c.TgZ(13,"td",17),c._uU(14),c.qZA(),c.TgZ(15,"td",17),c._uU(16),c.qZA(),c.TgZ(17,"td",17)(18,"button",18),c.NdJ("click",function(){const u=c.CHM(n).$implicit,C=c.oxw(3);return c.KtG(C.view(u))}),c.TgZ(19,"mat-icon"),c._uU(20,"remove_red_eye"),c.qZA()()()(),c.BQk()}if(2&r){const n=p.$implicit,o=p.index;c.xp6(3),c.Oqu(o+1),c.xp6(2),c.Oqu(c.lcZ(6,7,n.firm_name)),c.xp6(3),c.Oqu(n.firm_reg_no),c.xp6(2),c.Oqu(n.regyear),c.xp6(2),c.Oqu(n.act_name),c.xp6(2),c.Oqu(n.business_nature_name),c.xp6(2),c.Oqu(n.status_name)}}function O(r,p){if(1&r&&(c.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),c._uU(4,"Sl.No"),c.qZA(),c.TgZ(5,"th"),c._uU(6,"Firm Name"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Firm Reg./Licence No."),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Reg year"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Act Name"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Business Nature"),c.qZA(),c.TgZ(15,"th"),c._uU(16,"Status"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"Actions"),c.qZA()()(),c.TgZ(19,"tbody",15),c.YNc(20,T,21,9,"ng-container",16),c.qZA()()),2&r){const n=c.oxw().ngIf;c.xp6(20),c.Q6J("ngForOf",n)}}function A(r,p){1&r&&(c.TgZ(0,"div",19)(1,"div",20),c._uU(2,"No data found"),c.qZA()())}function E(r,p){if(1&r&&(c.TgZ(0,"div",11),c.YNc(1,O,21,1,"table",12),c.YNc(2,A,3,0,"ng-template",null,13,c.W1O),c.qZA()),2&r){const n=p.ngIf,o=c.MAs(3);c.xp6(1),c.Q6J("ngIf",n.length>0)("ngIfElse",o)}}function h(r,p){1&r&&(c.TgZ(0,"div",21),c._UZ(1,"mat-spinner",10),c.TgZ(2,"div"),c._uU(3,"Please wait while loading..."),c.qZA()())}let b=(()=>{class r{constructor(n,o){this.dataService=n,this.router=o,this.loading=!1,this.pageSize=25,this.pageSizeOptions=this.dataService.PageSizeOptions,this.filter_search_text=new a.NI(null,[a.kI.pattern("^\\w$")]),this.refreshToken$=new e.X(void 0)}ngOnInit(){this.user=this.dataService.curr_user$.value,this.est_status=this.dataService.curr_est_status$.value}ngAfterViewInit(){this.page$=this.paginator.page.asObservable().pipe((0,W.O)({previousPageIndex:0,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize,length:this.paginator.length})),this.filter_search$=this.filter_search_text.valueChanges.pipe((0,W.O)(this.filter_search_text.value),(0,Y.U)(n=>n),(0,s.x)(),(0,N.b)(()=>{this.paginator&&(this.paginator.pageIndex=0)})),this.est_list$=this.getEstablishments(this.est_status)}getEstablishments(n){return(0,_.a)([this.filter_search$,this.page$,this.refreshToken$]).pipe((0,V.b)(200),(0,N.b)(()=>this.loading=!0),(0,l.w)(([o,m])=>this.dataService.getFirmsEst({firm_id:this.firm?.id,search_text:o,limit:m.pageSize,offset:m.pageIndex,regyear:n.regyear,status:this.changedStatus})),(0,Y.U)(o=>(this.loading=!1,this.paginator.length=o.tot_rows,o.rows)))}getFirmsEst(){}makeSlNo(n){return this.paginator.pageSize*this.paginator.pageIndex+(n+1)}estView(n){return this.router.navigate(["/apps/view-claim"],{state:{prevPage:this.router.url}})}view(n){this.dataService.setCurrentFirmEst(n),this.router.navigate(["/other/est_view"])}}return r.\u0275fac=function(n){return new(n||r)(c.Y36(U.D),c.Y36(B.F0))},r.\u0275cmp=c.Xpm({type:r,selectors:[["est-table"]],viewQuery:function(n,o){if(1&n&&c.Gf(t.NW,5),2&n){let m;c.iGM(m=c.CRH())&&(o.paginator=m.first)}},inputs:{changedStatus:"changedStatus"},decls:16,vars:9,consts:[[1,"flex","flex-col","w-full"],[1,"flex-col","justify-center"],["class","flex-row justify-center",4,"ngIf"],[1,"flex","place-content-end",3,"ngClass"],[1,"fs-12"],["appAutofocus","","autocomplete","on","matInput","","maxlength","200","placeholder","E.g:Vairamani","type","text",3,"formControl","click"],["class","flex justify-center",4,"ngIf","ngIfElse"],["tmplLoading",""],[3,"pageSizeOptions","pageSize"],[1,"flex-row","justify-center"],["diameter","40"],[1,"flex","justify-center"],["class","w-full",4,"ngIf","ngIfElse"],["tmplNoData",""],[1,"w-full"],[2,"border","1px solid black"],[4,"ngFor","ngForOf"],[2,"text-align","center"],["color","primary","mat-icon-button","",3,"click"],["fxLayout","row","fxLayoutAlign","center center"],[2,"color","red"],[1,"flex-row","justify-center","align-middle"]],template:function(n,o){if(1&n&&(c.TgZ(0,"div",0)(1,"div",1),c.YNc(2,y,2,0,"div",2),c.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),c._uU(6,"Search by Firm Name / Reg No."),c.qZA(),c.TgZ(7,"input",5),c.NdJ("click",function(u){return u.select()}),c.qZA(),c.TgZ(8,"mat-hint"),c._uU(9,"Search by Firm Name / Reg No."),c.qZA()()()(),c.YNc(10,E,4,2,"div",6),c.ALo(11,"async"),c.qZA(),c.YNc(12,h,4,0,"ng-template",null,7,c.W1O),c.TgZ(14,"div"),c._UZ(15,"mat-paginator",8),c.qZA()),2&n){const m=c.MAs(13);c.xp6(2),c.Q6J("ngIf",o.loading),c.xp6(1),c.Q6J("ngClass",o.filter_search_text.value?"":"no-print"),c.xp6(4),c.Q6J("formControl",o.filter_search_text),c.xp6(3),c.Q6J("ngIf",c.lcZ(11,7,o.est_list$))("ngIfElse",m),c.xp6(5),c.Q6J("pageSizeOptions",o.pageSizeOptions)("pageSize",o.pageSize)}},dependencies:[R.mk,R.sg,R.O5,a.Fj,a.JJ,a.nD,a.oH,w.lW,P.KE,P.bx,P.hX,I.Hw,M.Nt,t.NW,K.Ou,Z.xw,Z.Wh,k.oO,R.Ov,R.rS],styles:[".head[_ngcontent-%COMP%]{font-weight:700;align-content:center}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}"]}),r})()},9346:(lt,$,i)=>{"use strict";i.d($,{r:()=>T});var t=i(3097),a=i(9211),e=i(4321),s=i(3089),_=i(2432),V=i(4209),W=i(7804),Y=i(8521),N=i(8977),l=i(3259),c=i(1477),U=i(7333),B=i(9059),R=i(7018),w=i(6672),P=i(613),I=i(4014);function M(O,A){if(1&O&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&O){const E=t.oxw();t.xp6(1),t.Q6J("innerHTML",E.err.name(E.schemeForm.get("dp_name")),t.oJD)}}function K(O,A){if(1&O&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&O){const E=A.$implicit;t.Q6J("value",E.code),t.xp6(1),t.Oqu(E.name)}}function Z(O,A){if(1&O&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&O){const E=A.$implicit;t.Q6J("value",E.code),t.xp6(1),t.Oqu(E.name)}}function k(O,A){if(1&O&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",16),t.qZA()),2&O){const E=t.oxw();t.xp6(1),t.Q6J("innerHTML",E.err.aadhaarNo(E.schemeForm.get("dp_aadhaar")),t.oJD)}}function y(O,A){if(1&O){const E=t.EpF();t.TgZ(0,"mat-card-actions",18)(1,"button",19),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",20)(4,"button",21),t.NdJ("click",function(){t.CHM(E);const b=t.oxw();return t.KtG(b.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&O){const E=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",E.schemeForm.valid),t.xp6(1),t.Q6J("disabled",E.loading||E.schemeForm.invalid)}}let T=(()=>{class O{constructor(E,h,b,r,p){this.dialog=E,this.fb=h,this.dataService=b,this.router=r,this.err=p,this.loading=!1,this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .]+$")]],dp_relationship:[null,a.kI.required],dp_gender:[null,a.kI.required],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .,&()]+$")]],ec_10th_pass_date:[null,a.kI.required],dp_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]]})}get curr_class_studied(){return this.schemeForm.get("curr_class_studied")}get ei_district_id(){return this.schemeForm.get("ei_district_id")}get marklistDetails(){return this.schemeForm.get("marklistDetails")}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.draftClaim=this.dataService.draft_claim$.value,this.getRelationships(),this.getGenders(),this.getEducations(),this.addMarklist()}ngOnChanges(E){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.setValue({dp_name:this.claim_details?.dp_name,dp_relationship:this.claim_details?.dp_relationship,dp_gender:this.claim_details?.dp_gender,inst_name:this.claim_details?.inst_name,ec_10th_pass_date:this.claim_details?.ec_10th_pass_date,dp_aadhaar:this.claim_details?.dp_aadhaar})}onSelectionChangeDistrict(E){}deleteAddedMarklist(E){return this.marklistDetails.removeAt(E)}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(E=>{this.dp_relationships=E.rows})}getEducations(){this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(E=>{this.classStudied=E.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(E=>{this.genders=E.rows})}getDistricts(){this.dataService.getDistricts({}).subscribe(E=>{this.districts=E.rows})}onFileSelected(E){}addMarklist(){this.marklistDetails?.push(this.fb.group({ec_10th_mark_sheet_no:[null,a.kI.required],ec_10th_mark_sheet_file:[null,a.kI.required]}))}saveClaimDetails(){let E="D"==this.claim_details.status?"D":"CLI";if("S"==E)return this.router.navigate(["/apps/my-claims"]);{let h;return this.loading=!0,h=Object.assign({},this.schemeForm.value),h.user_id=this.dataService.curr_user$.value.id,h.firm_id=this.firm.id,h.scheme_code=this.claimCode,h.status=E,this.claim_details&&(this.claim_details.dp_name=h.dp_name,this.claim_details.dp_relationship=h.dp_relationship,this.claim_details.dp_gender=h.dp_gender,this.claim_details.inst_name=h.inst_name,this.claim_details.ec_10th_pass_date=h.ec_10th_pass_date,this.claim_details.dp_aadhaar=h.dp_aadhaar,this.claim_details.ei_es_mark_sheet_no=h.ei_es_mark_sheet_no,this.claim_details.status=h.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:h).subscribe(b=>{("Claim Details are Saved Successfully."==b.message||"Claim Details are Updated Successfully."==b.message)&&(this.claim_id=b.id,this.claimEvent.emit(this.claim_id)),this.loading=!1})}}}return O.\u0275fac=function(E){return new(E||O)(t.Y36(e.uw),t.Y36(a.QS),t.Y36(s.D),t.Y36(_.F0),t.Y36(V.E))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-exam-assist"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:42,vars:8,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","dp_name","matInput","","placeholder","Name of the Student"],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_gender"],["formControlName","inst_name","matInput","","placeholder","Name of the Coaching Institute."],["formControlName","ec_10th_pass_date","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["fxFlex","75"],["formControlName","dp_aadhaar","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of Student"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(E,h){if(1&E&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.YNc(7,M,2,1,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-select",6)(10,"mat-option"),t._uU(11,"*None*"),t.qZA(),t.YNc(12,K,2,2,"mat-option",7),t.qZA(),t.TgZ(13,"mat-label"),t._uU(14," Relationship to the Employee "),t.qZA()()(),t.TgZ(15,"div",2)(16,"mat-form-field",3)(17,"mat-select",8)(18,"mat-option"),t._uU(19,"*None*"),t.qZA(),t.YNc(20,Z,2,2,"mat-option",7),t.qZA(),t.TgZ(21,"mat-label"),t._uU(22," Gender "),t.qZA()(),t.TgZ(23,"mat-form-field",3)(24,"mat-label"),t._uU(25,"Name of the Coaching Institute."),t.qZA(),t._UZ(26,"input",9),t.qZA()(),t.TgZ(27,"div",2)(28,"mat-form-field",3)(29,"mat-label"),t._uU(30,"Date of Passing 10th Standard."),t.qZA(),t._UZ(31,"input",10)(32,"mat-datepicker-toggle",11)(33,"mat-datepicker",null,12),t.qZA()(),t.TgZ(35,"div",2)(36,"mat-form-field",13)(37,"mat-label"),t._uU(38,"Enter the Aadhaar No. of Student"),t.qZA(),t._UZ(39,"input",14),t.YNc(40,k,2,1,"mat-error",5),t.qZA()(),t.YNc(41,y,6,2,"mat-card-actions",15),t.qZA()()),2&E){const b=t.MAs(34);let r,p;t.xp6(1),t.Q6J("formGroup",h.schemeForm),t.xp6(6),t.Q6J("ngIf",null==(r=h.schemeForm.get("dp_name"))?null:r.invalid),t.xp6(5),t.Q6J("ngForOf",h.dp_relationships),t.xp6(8),t.Q6J("ngForOf",h.genders),t.xp6(11),t.Q6J("matDatepicker",b),t.xp6(1),t.Q6J("for",b),t.xp6(8),t.Q6J("ngIf",null==(p=h.schemeForm.get("dp_aadhaar"))?null:p.invalid),t.xp6(1),t.Q6J("ngIf","CLI"==(null==h.claim_details?null:h.claim_details.status)&&1==h.isRemarks||"CLI"!=(null==h.claim_details?null:h.claim_details.status))}},dependencies:[W.sg,W.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,Y.ey,N.lW,l.a8,l.hq,c.Mq,c.hl,c.nW,U.TO,U.KE,U.hX,U.R9,B.Nt,R.gD,w.Ic,P.gM,I.xw,I.SQ,I.yH]}),O})()},3620:(lt,$,i)=>{"use strict";i.d($,{V:()=>p});var t=i(3097),a=i(9211),e=i(4931),s=i(3089),_=i(7804),V=i(8521),W=i(7698),Y=i(8977),N=i(7333),l=i(9059),c=i(7495),U=i(7018),B=i(6672),R=i(4014);function w(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Address of the Establishment. "),t.qZA())}function P(n,o){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const m=o.$implicit;t.Q6J("value",m.id),t.xp6(1),t.hij("",m.district_name," ")}}function I(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose District. "),t.qZA())}function M(n,o){1&n&&t._UZ(0,"mat-spinner",26)}function K(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Panchayat type. "),t.qZA())}function Z(n,o){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const m=o.$implicit;t.Q6J("value",m.id),t.xp6(1),t.hij("",m.panchayat_name," ")}}function k(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Panchayat. "),t.qZA())}function y(n,o){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const m=o.$implicit;t.Q6J("value",m.id),t.xp6(1),t.hij("",m.taluk_name," ")}}function T(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Taluk. "),t.qZA())}function O(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter locality of the Establishment. "),t.qZA())}function A(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter postal_code of the Establishment. "),t.qZA())}function E(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter landmark of the Establishment. "),t.qZA())}function h(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Latitude No of the Establishment. "),t.qZA())}function b(n,o){1&n&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Longitude No of the Establishment. "),t.qZA())}function r(n,o){if(1&n&&(t.TgZ(0,"button",27),t._uU(1,"Reset"),t.qZA()),2&n){const m=t.oxw();t.Q6J("disabled",m.isRemarked)}}let p=(()=>{class n{constructor(m){this.ds=m,this.is_loading=!1,this.district_id=new a.p4(null,[a.kI.required]),this.panchayat_type=new a.p4({value:null,disabled:!0},[a.kI.required]),this.firm_id=new t.vpe,this.isRemarked=!1,this._data=new e.X(!1),this.refreshToken$=new e.X(void 0)}set isRemarks(m){this._data.next(m)}get isRemarks(){return this._data.getValue()}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,this.formInitialize(),this.getDistricts(),this.getPanchayats(),this.getTaluks(),this.firm&&this.ds.getFirmEst(this.firm).subscribe(m=>{this.firm_est=m,this.existingformInitialize(),this.disableUnnecessaryEstUpdate()})}ngOnChanges(){}formInitialize(){this.fg=new a.nJ({district_id:this.district_id,latitude_no:new a.p4(null,[a.kI.required]),longitude_no:new a.p4(null,[a.kI.required]),address:new a.p4(null,[a.kI.required,a.kI.pattern("^[a-zA-Z0-9 .,@&()/]*$"),a.kI.maxLength(250)]),locality:new a.p4(null,[a.kI.required]),postal_code:new a.p4(null,[a.kI.required]),landmark:new a.p4(null,[a.kI.required]),panchayat_id:new a.p4(null,[a.kI.required]),panchayat_type:this.panchayat_type,taluk_id:new a.p4({value:null,disabled:!0},[a.kI.required])}),this.fg.get("panchayat_id").disable()}existingformInitialize(){this.fg=new a.nJ({district_id:this.district_id,latitude_no:new a.p4(this.firm_est.latitude_no,[a.kI.required]),longitude_no:new a.p4(this.firm_est.longitude_no,[a.kI.required]),address:new a.p4(this.firm_est.address,[a.kI.required,a.kI.pattern("^[a-zA-Z0-9 .,/]*$"),a.kI.maxLength(250)]),locality:new a.p4(this.firm_est.locality,[a.kI.required]),postal_code:new a.p4(this.firm_est.postal_code,[a.kI.required]),landmark:new a.p4(this.firm_est.landmark,[a.kI.required]),panchayat_id:new a.p4({value:this.firm_est.panchayat_id,disabled:!0},[a.kI.required]),panchayat_type:this.panchayat_type,taluk_id:new a.p4({value:this.firm_est.taluk_id,disabled:!0},[a.kI.required])}),this.district_id.setValue(this.firm_est.district_id),this.panchayat_type.setValue(this.firm_est.panchayat_type)}onSelectionChangeDistrict(m){this.panchayat_type.enable(),this.fg.get("taluk_id").enable(),this.panchayat_type.setValue(null),this.fg.get("taluk_id").setValue(null),this.fg.get("panchayat_id").setValue(null),this.getTaluks()}onSelectionChangePanchayatType(m){this.fg.get("panchayat_id").enable(),this.getPanchayats()}getDistricts(){this.ds.getDistricts({}).subscribe(m=>{this.districts=m.rows})}getPanchayats(){this.is_loading=!0,this.ds.getPanchayats({district_id:this.district_id.value,type:this.panchayat_type.value}).subscribe(m=>{this.panchayats=m.rows,this.panchayats.length<=0&&this.fg.get("panchayat_id")?.disable(),this.is_loading=!1})}getTaluks(){this.ds.getTaluks({district_id:this.district_id.value}).subscribe(m=>{this.taluks=m.rows})}saveRegistrationEst(m){const u=Object.assign({},this.fg.value);u.user_id=this.user.id,u.status=m,this.firm_est&&(this.firm_est.user_id=this.user.id,this.firm_est.district_id=u.district_id,this.firm_est.address=u.address,this.firm_est.locality=u.locality,this.firm_est.postal_code=u.postal_code,this.firm_est.landmark=u.landmark,this.firm_est.panchayat_id=u.panchayat_id,this.firm_est.taluk_id=u.taluk_id,this.firm_est.latitude_no=u.latitude_no,this.firm_est.longitude_no=u.longitude_no,this.firm_est.status=m),this.is_loading=!0,this.ds.saveRegistrationEst(this.firm_est?this.firm_est:u).subscribe(C=>{("saved successfully."==C.message||"update successfully."==C.message)&&(this.is_loading=!1,this.firm_id.emit(C.id))})}disableUnnecessaryEstUpdate(){"CLI"==this.firm_est.status&&this._data.subscribe(m=>{m?(this.isRemarked=!1,this.fg.enable(),this.fg.updateValueAndValidity()):(this.isRemarked=!0,this.fg.disable(),this.fg.updateValueAndValidity())})}}return n.\u0275fac=function(m){return new(m||n)(t.Y36(s.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["firm-addr-det"]],inputs:{firm_est:"firm_est",isRemarks:"isRemarks"},outputs:{firm_id:"firm_id"},features:[t.TTD],decls:81,vars:20,consts:[["fxLayout","row","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","",2,"background-color","white",3,"formGroup"],["fxLayout","column",2,"margin","1%"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","10px"],["appearance","outline","fxFlex",""],["autocomplete","on","formControlName","address","matInput","","placeholder","Address of the Establishment","required","","type","text","maxlength","45"],[4,"ngIf"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","10px"],["fxLayout","row","fxLayoutAlign","space-between center"],["diameter","30",4,"ngIf"],["value","V"],["value","T"],["value","M"],["formControlName","panchayat_id","required",""],["formControlName","taluk_id","required",""],["autocomplete","on","formControlName","locality","matInput","","placeholder","E.g.Nungambakkam","required","","type","text","pattern","[a-zA-z ]+","maxlength","40"],["autocomplete","on","formControlName","postal_code","matInput","","maxlength","6","placeholder","6 digit [0-9] PIN Code","required","","pattern","[0-9]{6}","type","text"],["autocomplete","on","formControlName","landmark","matInput","","placeholder","E.g.Near by Anna Library","maxlength","30","pattern","[A-Za-z0-9 ]+","required","","type","text"],["autocomplete","on","formControlName","latitude_no","matInput","","placeholder","E.g. 10.956023","required","","pattern","^-*(\\d{1,3})\\.(\\d{0,6})?$","type","number"],["autocomplete","on","formControlName","longitude_no","matInput","","placeholder","E.g. 78.556770","required","","type","number","pattern","^-*(\\d{1,3})\\.(\\d{0,6})?$"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["color","primary","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["color","warn","mat-raised-button","","type","reset",3,"disabled",4,"ngIf"],[3,"value"],["diameter","30"],["color","warn","mat-raised-button","","type","reset",3,"disabled"]],template:function(m,u){1&m&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Address of the Establishment"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,w,4,0,"mat-error",6),t.qZA(),t.TgZ(9,"mat-form-field",4)(10,"mat-label"),t._uU(11,"District"),t.qZA(),t.TgZ(12,"mat-select",7),t.NdJ("selectionChange",function(){return u.onSelectionChangeDistrict(u.district_id.value)}),t.TgZ(13,"mat-option"),t._uU(14,"None"),t.qZA(),t.YNc(15,P,2,2,"mat-option",8),t.qZA(),t.YNc(16,I,4,0,"mat-error",6),t.qZA()(),t.TgZ(17,"div",9)(18,"mat-form-field",4)(19,"mat-label"),t._uU(20,"Panchayat Type"),t.qZA(),t.TgZ(21,"mat-select",7),t.NdJ("selectionChange",function(){return u.onSelectionChangePanchayatType(u.panchayat_type.value)}),t.TgZ(22,"mat-option")(23,"div",10),t._uU(24," None "),t.YNc(25,M,1,0,"mat-spinner",11),t.qZA()(),t.TgZ(26,"mat-option",12),t._uU(27,"Village Panchayat"),t.qZA(),t.TgZ(28,"mat-option",13),t._uU(29,"Town Panchayat"),t.qZA(),t.TgZ(30,"mat-option",14),t._uU(31,"Municipality"),t.qZA()(),t.YNc(32,K,4,0,"mat-error",6),t.qZA(),t.TgZ(33,"mat-form-field",4)(34,"mat-label"),t._uU(35,"Panchayat"),t.qZA(),t.TgZ(36,"mat-select",15)(37,"mat-option"),t._uU(38,"None"),t.qZA(),t.YNc(39,Z,2,2,"mat-option",8),t.qZA(),t.YNc(40,k,4,0,"mat-error",6),t.qZA()(),t.TgZ(41,"div",3)(42,"mat-form-field",4)(43,"mat-label"),t._uU(44,"Taluk"),t.qZA(),t.TgZ(45,"mat-select",16)(46,"mat-option"),t._uU(47,"None"),t.qZA(),t.YNc(48,y,2,2,"mat-option",8),t.qZA(),t.YNc(49,T,4,0,"mat-error",6),t.qZA(),t.TgZ(50,"mat-form-field",4)(51,"mat-label"),t._uU(52,"Locality/Area"),t.qZA(),t._UZ(53,"input",17),t.YNc(54,O,4,0,"mat-error",6),t.qZA()(),t.TgZ(55,"div",3)(56,"mat-form-field",4)(57,"mat-label"),t._uU(58,"Pin code"),t.qZA(),t._UZ(59,"input",18),t.YNc(60,A,4,0,"mat-error",6),t.qZA(),t.TgZ(61,"mat-form-field",4)(62,"mat-label"),t._uU(63,"Landmark"),t.qZA(),t._UZ(64,"input",19),t.YNc(65,E,4,0,"mat-error",6),t.qZA()(),t.TgZ(66,"div",3)(67,"mat-form-field",4)(68,"mat-label"),t._uU(69,"Latitude No."),t.qZA(),t._UZ(70,"input",20),t.YNc(71,h,4,0,"mat-error",6),t.qZA(),t.TgZ(72,"mat-form-field",4)(73,"mat-label"),t._uU(74,"Longitude No."),t.qZA(),t._UZ(75,"input",21),t.YNc(76,b,4,0,"mat-error",6),t.qZA()(),t.TgZ(77,"div",22)(78,"button",23),t.NdJ("click",function(){return u.saveRegistrationEst("CLI"==(null==u.firm?null:u.firm.status)?null==u.firm?null:u.firm.status:"D")}),t._uU(79),t.qZA(),t.YNc(80,r,2,1,"button",24),t.qZA()()()()),2&m&&(t.xp6(1),t.Q6J("formGroup",u.fg),t.xp6(7),t.Q6J("ngIf",u.fg.get("address").hasError("required")),t.xp6(4),t.Q6J("formControl",u.district_id),t.xp6(3),t.Q6J("ngForOf",u.districts),t.xp6(1),t.Q6J("ngIf",u.district_id.hasError("required")),t.xp6(5),t.Q6J("formControl",u.panchayat_type),t.xp6(4),t.Q6J("ngIf",u.is_loading),t.xp6(7),t.Q6J("ngIf",u.panchayat_type.hasError("required")),t.xp6(7),t.Q6J("ngForOf",u.panchayats),t.xp6(1),t.Q6J("ngIf",u.fg.get("panchayat_id").hasError("required")),t.xp6(8),t.Q6J("ngForOf",u.taluks),t.xp6(1),t.Q6J("ngIf",u.fg.get("taluk_id").hasError("required")),t.xp6(5),t.Q6J("ngIf",u.fg.get("locality").hasError("required")),t.xp6(6),t.Q6J("ngIf",u.fg.get("postal_code").hasError("required")),t.xp6(5),t.Q6J("ngIf",u.fg.get("landmark").hasError("required")),t.xp6(6),t.Q6J("ngIf",u.fg.get("latitude_no").hasError("required")),t.xp6(5),t.Q6J("ngIf",u.fg.get("longitude_no").hasError("required")),t.xp6(2),t.Q6J("disabled",u.is_loading||u.fg.invalid||u.isRemarked),t.xp6(1),t.hij("","CLI"==(null==u.firm?null:u.firm.status)?"Update":"Save"," "),t.xp6(1),t.Q6J("ngIf","CLI"!=(null==u.firm?null:u.firm.status)))},dependencies:[_.sg,_.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.oH,a.sg,a.u,V.ey,W.Lv,Y.lW,N.TO,N.KE,N.hX,l.Nt,c.Ou,U.gD,B.Ic,R.xw,R.SQ,R.Wh,R.yH]}),n})()},6088:(lt,$,i)=>{"use strict";i.d($,{R:()=>K});var t=i(3097),a=i(9211),e=i(4931),s=i(3089),_=i(7804),V=i(7698),W=i(8977),Y=i(7333),N=i(9741),l=i(9059),c=i(6672),U=i(4014);function B(Z,k){1&Z&&(t.TgZ(0,"mat-error"),t._uU(1," Name of the Contact Person is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function R(Z,k){1&Z&&(t.TgZ(0,"mat-error"),t._uU(1," Contact Persons Designation is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function w(Z,k){1&Z&&(t.TgZ(0,"mat-error"),t._uU(1," Mobile Number is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function P(Z,k){1&Z&&(t.TgZ(0,"mat-error"),t._uU(1," Phone / Secondary Number is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function I(Z,k){1&Z&&(t.TgZ(0,"mat-error"),t._uU(1," Contact Person's Email Address is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function M(Z,k){if(1&Z&&(t.TgZ(0,"button",16),t._uU(1,"Reset"),t.qZA()),2&Z){const y=t.oxw();t.Q6J("disabled",y.isRemarked)}}let K=(()=>{class Z{constructor(y){this.ds=y,this.contact_det=new t.vpe,this.firm_id=new t.vpe,this.refreshToken$=new e.X(void 0),this.isRemarked=!1,this._data=new e.X(!1)}set isRemarks(y){this._data.next(y)}get isRemarks(){return this._data.getValue()}ngOnDestroy(){}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,this.formInitialize(),this.firm&&this.ds.getFirmEst(this.firm).subscribe(y=>{this.firm_est=y,this.existingformInitialize(),this.disableUnnecessaryEstUpdate()})}formInitialize(){this.fg=new a.nJ({contact_name:new a.p4(null,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45),a.kI.minLength(2)]),contact_designation:new a.p4(null,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45),a.kI.minLength(2)]),contact_phone:new a.p4(null,[a.kI.required,a.kI.pattern("^[0-9]{10}")]),contact_email:new a.p4(null,[a.kI.required,a.kI.email]),contact_mobile:new a.p4(null,[a.kI.required,a.kI.pattern("^[0-9]{10}")])})}existingformInitialize(){this.fg=new a.nJ({contact_name:new a.p4(this.firm_est.contact_name,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45),a.kI.minLength(2)]),contact_designation:new a.p4(this.firm_est.contact_designation,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45),a.kI.minLength(2)]),contact_mobile:new a.p4(this.firm_est.contact_mobile,[a.kI.required,a.kI.pattern("^[0-9]{10}")]),contact_phone:new a.p4(this.firm_est.contact_phone,[a.kI.required,a.kI.pattern("^[0-9]{10}")]),contact_email:new a.p4(this.firm_est.contact_email,[a.kI.required,a.kI.email])})}getEstClarification(){const y=Object.assign({});y.firm_id=this.firm.id,this.ds.getEstClarifications(y).subscribe(T=>{this.clarifications=T.rows})}saveRegistrationEst(y){const T=Object.assign({},this.fg.value);T.user_id=this.user.id,this.firm_est&&(this.firm_est.user_id=this.user.id,this.firm_est.contact_name=T.contact_name,this.firm_est.contact_designation=T.contact_designation,this.firm_est.contact_mobile=T.contact_mobile,this.firm_est.contact_phone=T.contact_phone,this.firm_est.contact_email=T.contact_email,this.firm_est.status=y),this.ds.saveRegistrationEst(this.firm_est?this.firm_est:T).subscribe(O=>{})}ReturnMessage(y){this.getEstClarification()}disableUnnecessaryEstUpdate(){"CLI"==this.firm_est.status&&this._data.subscribe(y=>{y?(this.isRemarked=!1,this.fg.enable(),this.fg.updateValueAndValidity()):(this.isRemarked=!0,this.fg.disable(),this.fg.updateValueAndValidity())})}}return Z.\u0275fac=function(y){return new(y||Z)(t.Y36(s.D))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["firm-contact-det"]],inputs:{firm_est:"firm_est",isRemarks:"isRemarks"},outputs:{contact_det:"contact_det",firm_id:"firm_id"},decls:40,vars:10,consts:[["fxLayout","row","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","",2,"background-color","white",3,"formGroup"],["fxLayout","column",2,"margin","1%"],["appearance","outline","fxFlex","100"],["autocomplete","on","formControlName","contact_name","maxlength","46","matInput","","placeholder","Name of the Contact Person","required","","type","text","pattern","[a-zA-Z. ]+",3,"maxLength"],[4,"ngIf"],["autocomplete","on","formControlName","contact_designation","matInput","","placeholder","E.g.Managing Director","required","","type","text","maxlength","46"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","10px"],["appearance","outline","fxFlex",""],["autocomplete","on","formControlName","contact_mobile","maxlength","10","matInput","","pattern","[0-9]{10}","placeholder","Mobile Number","required","","type","tel"],["matSuffix",""],["autocomplete","on","formControlName","contact_phone","maxlength","10","matInput","","pattern","[0-9]{10}","placeholder","Landline Number","required","","type","tel"],["autocomplete","on","formControlName","contact_email","matInput","","placeholder","E.g.name@Example.com","maxlength","60","required","","type","email"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["color","primary","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["color","warn","mat-raised-button","","type","button",3,"disabled",4,"ngIf"],["color","warn","mat-raised-button","","type","button",3,"disabled"]],template:function(y,T){1&y&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Contact Person"),t.qZA(),t._UZ(6,"input",4),t.YNc(7,B,4,0,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Contact Persons Designation"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,R,4,0,"mat-error",5),t.qZA(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Mobile Number"),t.qZA(),t._UZ(17,"input",9),t.TgZ(18,"mat-icon",10),t._uU(19,"phone_android"),t.qZA(),t.YNc(20,w,4,0,"mat-error",5),t.qZA(),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Phone / Secondary Number"),t.qZA(),t._UZ(24,"input",11),t.TgZ(25,"mat-icon",10),t._uU(26,"phone"),t.qZA(),t.YNc(27,P,4,0,"mat-error",5),t.qZA()(),t.TgZ(28,"div",7)(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Contact Person's Email Address"),t.qZA(),t._UZ(32,"input",12),t.TgZ(33,"mat-icon",10),t._uU(34,"mail_outline"),t.qZA(),t.YNc(35,I,4,0,"mat-error",5),t.qZA()(),t.TgZ(36,"div",13)(37,"button",14),t.NdJ("click",function(){return T.saveRegistrationEst("CLI"==(null==T.firm?null:T.firm.status)?null==T.firm?null:T.firm.status:"D")}),t._uU(38),t.qZA(),t.YNc(39,M,2,1,"button",15),t.qZA()()()()),2&y&&(t.xp6(1),t.Q6J("formGroup",T.fg),t.xp6(5),t.Q6J("maxLength",45),t.xp6(1),t.Q6J("ngIf",T.fg.get("contact_name").hasError("required")),t.xp6(5),t.Q6J("ngIf",T.fg.get("contact_designation").hasError("required")),t.xp6(8),t.Q6J("ngIf",T.fg.get("contact_mobile").hasError("required")),t.xp6(7),t.Q6J("ngIf",T.fg.get("contact_phone").hasError("required")),t.xp6(8),t.Q6J("ngIf",T.fg.get("contact_email").hasError("required")),t.xp6(2),t.Q6J("disabled",T.is_loading||T.fg.invalid||T.isRemarked),t.xp6(1),t.hij(" ","CLI"==(null==T.firm?null:T.firm.status)?"Update":"Save"," "),t.xp6(1),t.Q6J("ngIf","CLI"!=(null==T.firm?null:T.firm.status)))},dependencies:[_.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.sg,a.u,V.Lv,W.lW,Y.TO,Y.KE,Y.hX,Y.R9,N.Hw,l.Nt,c.Ic,U.xw,U.SQ,U.yH]}),Z})()},6848:(lt,$,i)=>{"use strict";i.d($,{p:()=>S});var t=i(3097),a=i(4931),e=i(6440),s=i(6074),_=i(2883),V=i(7999),W=i(3089),Y=i(4321),N=i(7804),l=i(8977),c=i(9741),U=i(7739),B=i(4014);function R(D,g){1&D&&(t.TgZ(0,"th",18),t._uU(1," S.No"),t.qZA())}function w(D,g){if(1&D&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&D){const f=g.index;t.xp6(1),t.hij(" ",f+1,"")}}function P(D,g){1&D&&(t.TgZ(0,"th",20),t._uU(1," Name"),t.qZA())}function I(D,g){if(1&D&&(t.TgZ(0,"td",21)(1,"div",22)(2,"div",23),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&D){const f=g.$implicit;t.xp6(3),t.hij(" ",f.type_name," "),t.xp6(2),t.hij(" ",f.type_description," ")}}function M(D,g){1&D&&(t.TgZ(0,"th",18),t._uU(1," Type"),t.qZA())}function K(D,g){1&D&&(t.TgZ(0,"div",26),t._uU(1," At least One bill is Required * "),t.qZA())}function Z(D,g){1&D&&(t.TgZ(0,"div",26),t._uU(1," Required * "),t.qZA())}function k(D,g){1&D&&(t.TgZ(0,"div",27),t._uU(1," Optional "),t.qZA())}function y(D,g){if(1&D&&(t.TgZ(0,"td",19),t.YNc(1,K,2,0,"div",24),t.YNc(2,Z,2,0,"div",24),t.ynx(3),t.YNc(4,k,2,0,"div",25),t.BQk(),t.qZA()),2&D){const f=g.$implicit;t.xp6(1),t.Q6J("ngIf",f.is_mandatory&&"TNEB_DOC"==f.code),t.xp6(1),t.Q6J("ngIf",f.is_mandatory&&"TNEB_DOC"!=f.code),t.xp6(2),t.Q6J("ngIf",!f.is_mandatory)}}function T(D,g){1&D&&(t.TgZ(0,"th",18),t._uU(1," Details"),t.qZA())}function O(D,g){if(1&D&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&D){const f=t.oxw(3);t.xp6(1),t.AsE(" ",null==f.firm_est?null:f.firm_est.firm_reg_no," - ",t.xi3(2,2,null==f.firm_est?null:f.firm_est.firm_req_dt,"dd/MM/YYYY")," ")}}function A(D,g){if(1&D&&(t.TgZ(0,"div",30),t.YNc(1,O,3,5,"ng-container",31),t.qZA()),2&D){t.oxw();const f=t.MAs(6),x=t.oxw();t.xp6(1),t.Q6J("ngIf",null==x.firm_est?null:x.firm_est.firm_reg_no)("ngIfElse",f)}}function E(D,g){if(1&D&&(t.ynx(0),t._uU(1),t.BQk()),2&D){const f=t.oxw(3);t.xp6(1),t.hij(" ",null==f.firm_est?null:f.firm_est.epfo_no," ")}}function h(D,g){if(1&D&&(t.TgZ(0,"div",30),t.YNc(1,E,2,1,"ng-container",31),t.qZA()),2&D){t.oxw();const f=t.MAs(6),x=t.oxw();t.xp6(1),t.Q6J("ngIf",null==x.firm_est?null:x.firm_est.epfo_no)("ngIfElse",f)}}function b(D,g){if(1&D&&(t.ynx(0),t._uU(1),t.BQk()),2&D){const f=t.oxw(3);t.xp6(1),t.hij(" ",null==f.firm_est?null:f.firm_est.esic_no," ")}}function r(D,g){if(1&D&&(t.TgZ(0,"div",30),t.YNc(1,b,2,1,"ng-container",31),t.qZA()),2&D){t.oxw();const f=t.MAs(6),x=t.oxw();t.xp6(1),t.Q6J("ngIf",null==x.firm_est?null:x.firm_est.esic_no)("ngIfElse",f)}}function p(D,g){if(1&D&&(t.ynx(0),t._uU(1),t.BQk()),2&D){const f=t.oxw(3);t.xp6(1),t.hij(" No of Bills Uploaded: ",null==f.firm_est?null:f.firm_est.tneb_bill_count," ")}}function n(D,g){if(1&D&&(t.TgZ(0,"div",30),t.YNc(1,p,2,1,"ng-container",31),t.qZA()),2&D){t.oxw();const f=t.MAs(6),x=t.oxw();t.xp6(1),t.Q6J("ngIf",null==x.firm_est?null:x.firm_est.tneb_bill_count)("ngIfElse",f)}}function o(D,g){1&D&&(t.TgZ(0,"span",26),t._uU(1,"No data Given"),t.qZA())}function m(D,g){if(1&D&&(t.TgZ(0,"td",19),t.YNc(1,A,2,2,"div",28),t.YNc(2,h,2,2,"div",28),t.YNc(3,r,2,2,"div",28),t.YNc(4,n,2,2,"div",28),t.YNc(5,o,2,0,"ng-template",null,29,t.W1O),t.qZA()),2&D){const f=g.$implicit;t.xp6(1),t.Q6J("ngIf","FIRM_DOC"==f.code),t.xp6(1),t.Q6J("ngIf","EPFO_DOC"==f.code),t.xp6(1),t.Q6J("ngIf","ESIC_DOC"==f.code),t.xp6(1),t.Q6J("ngIf","TNEB_DOC"==f.code)}}function u(D,g){1&D&&(t.TgZ(0,"th",18),t._uU(1," Document"),t.qZA())}function C(D,g){if(1&D&&(t.ynx(0),t._uU(1),t.BQk()),2&D){const f=t.oxw().$implicit;t.xp6(1),t.hij(" ",f.file_name," ")}}function J(D,g){if(1&D&&(t.TgZ(0,"td",19),t.YNc(1,C,2,1,"ng-container",32),t.qZA()),2&D){const f=g.$implicit;t.xp6(1),t.Q6J("ngIf","TNEB_DOC"!=f.code)}}function it(D,g){1&D&&(t.TgZ(0,"th",18),t._uU(1," Actions"),t.qZA())}function _t(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(f);const z=t.oxw().$implicit,st=t.oxw();return t.KtG(st.firm_doc(z))}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}if(2&D){const f=t.oxw(2);t.Q6J("disabled","APPS"!=f.user.designation_code||"A"==(null==f.firm_est?null:f.firm_est.status))}}function ut(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(f);const z=t.oxw(2).$implicit,st=t.oxw();return t.KtG(st.show(z.storage_name))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove_red_eye"),t.qZA()()}}function H(D,g){if(1&D&&(t.ynx(0),t.YNc(1,ut,3,0,"button",37),t.BQk()),2&D){const f=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",f.file_name)}}function ot(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(f);const z=t.oxw().$implicit,st=t.oxw();return t.KtG(st.deleteAttachmentDoc(z))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}if(2&D){const f=t.oxw(2);t.Q6J("disabled","APPS"!=f.user.designation_code||"A"==(null==f.firm_est?null:f.firm_est.status))}}function v(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(f);const z=t.oxw(2);return t.KtG(z.add_tneb_doc({},"add"))}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}if(2&D){const f=t.oxw(2);t.Q6J("disabled","APPS"!=f.user.designation_code||"A"==(null==f.firm_est?null:f.firm_est.status))}}function G(D,g){if(1&D&&(t.TgZ(0,"td",19),t.YNc(1,_t,3,1,"button",33),t.YNc(2,H,2,1,"ng-container",32),t.YNc(3,ot,3,1,"button",34),t.YNc(4,v,3,1,"button",35),t.qZA()),2&D){const f=g.$implicit,x=t.oxw();t.xp6(1),t.Q6J("ngIf","EPFO_DOC"==f.code&&null==(null==x.firm_est?null:x.firm_est.epfo_no)||"ESIC_DOC"==f.code&&null==(null==x.firm_est?null:x.firm_est.esic_no)||"FIRM_DOC"==f.code&&null==(null==x.firm_est?null:x.firm_est.firm_reg_no)),t.xp6(1),t.Q6J("ngIf","TNEB_DOC"!=f.code),t.xp6(1),t.Q6J("ngIf","EPFO_DOC"==f.code&&null!=(null==x.firm_est?null:x.firm_est.epfo_no)||"ESIC_DOC"==f.code&&null!=(null==x.firm_est?null:x.firm_est.esic_no)||"FIRM_DOC"==f.code&&null!=(null==x.firm_est?null:x.firm_est.firm_reg_no)),t.xp6(1),t.Q6J("ngIf","TNEB_DOC"==f.code)}}function Q(D,g){1&D&&t._UZ(0,"tr",41)}function j(D,g){1&D&&t._UZ(0,"tr",42)}function ct(D,g){if(1&D&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&D){const f=g.index;t.xp6(1),t.hij(" 4(",f+1,")")}}function rt(D,g){if(1&D&&(t.TgZ(0,"td",21)(1,"div",22)(2,"div",23),t._uU(3," TNEB Bill No "),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&D){const f=g.$implicit;t.xp6(5),t.hij(" ",f.tneb_no," ")}}function pt(D,g){1&D&&t._UZ(0,"td",19)}function tt(D,g){if(1&D&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&D){const f=g.$implicit;t.xp6(1),t.hij(" ",f.remarks," ")}}function mt(D,g){if(1&D&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&D){const f=g.$implicit;t.xp6(1),t.hij(" ",f.file_name," ")}}function L(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(f);const z=t.oxw().$implicit,st=t.oxw();return t.KtG(st.show(z.storage_name))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove_red_eye"),t.qZA()()}}function X(D,g){if(1&D){const f=t.EpF();t.TgZ(0,"td",19)(1,"button",39),t.NdJ("click",function(){const st=t.CHM(f).$implicit,dt=t.oxw();return t.KtG(dt.deleteEstTnebBill(st))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()(),t.YNc(4,L,3,0,"button",37),t.qZA()}if(2&D){const f=g.$implicit,x=t.oxw();t.xp6(1),t.Q6J("disabled","APPS"!=x.user.designation_code||"A"==(null==x.firm_est?null:x.firm_est.status)),t.xp6(3),t.Q6J("ngIf",f.file_name)}}function et(D,g){1&D&&t._UZ(0,"tr",42)}let S=(()=>{class D{constructor(f,x){this.ds=f,this.dialog=x,this.progressInfos=[],this.upload_path=e.N.uploads,this.displayedColumns=["position","name","type","details","document","actions"],this.message=new t.vpe,this.claimEvent=new t.vpe,this.firm_id=new t.vpe,this.refreshToken$=new a.X(void 0)}ngOnInit(){}ngOnChanges(f){this.user=this.ds.curr_user$.value,this.firm_est&&(this.getTypesAttachments(),this.getEstClarification(),this.getEstTnebBills())}getTypesAttachments(){const f=Object.assign({});f.applicable_to="R",f.firm_id=this.firm_est?.id,this.ds.getTypesAttachments(f).subscribe(x=>{this.dataSource=x.rows})}getEstClarification(){const f=Object.assign({});f.firm_id=this.firm_est.id,this.ds.getEstClarifications(f).subscribe(x=>{this.clarifications=x.rows})}getEstTnebBills(){const f=Object.assign({});f.firm_id=this.firm_est.id,this.ds.getEstTnebBills(f).subscribe(x=>{this.tneb_bills=x.rows})}firm_doc(f){this.dialog.open(_.p,{width:"600px",disableClose:!0,hasBackdrop:!0,data:{type:f.code,firm_est:this.firm_est}}).afterClosed().subscribe(st=>{st&&(this.getTypesAttachments(),this.message.emit(st),this.refreshToken$.next(void 0))})}add_tneb_doc(f,x){this.dialog.open(s.t,{width:"600px",disableClose:!0,hasBackdrop:!0,data:{type:"TNEB_DOC",firm_ests:this.firm_est,action:x,tneb_bill:f}}).afterClosed().subscribe(dt=>{dt&&(this.message.emit(dt),this.getEstTnebBills(),this.refreshToken$.next(void 0))})}deleteEstTnebBill(f){this.ds.deleteEstTnebBill(f).subscribe(x=>{"TNEB Bill deleted successfully."==x.message&&(this.getEstClarification(),this.getEstTnebBills(),this.refreshToken$.next(void 0),this.message.emit(x.message))})}deleteAttachmentDoc(f){this.ds.deleteAttachmentDoc(f).subscribe(x=>{"Deleted successfully."==x.message&&(this.getEstClarification(),this.getEstTnebBills(),this.getTypesAttachments(),this.refreshToken$.next(void 0),this.message.emit(x.message))})}ReturnMessage(f){this.message.emit(f),this.getEstClarification(),this.getEstTnebBills()}show(f){this.dialog.open(V.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:f}}).afterClosed().subscribe(st=>{})}}return D.\u0275fac=function(f){return new(f||D)(t.Y36(W.D),t.Y36(Y.uw))},D.\u0275cmp=t.Xpm({type:D,selectors:[["firm-documents"]],inputs:{firm:"firm",firm_est:"firm_est",applicable_to:"applicable_to",claim_details:"claim_details"},outputs:{message:"message",claimEvent:"claimEvent",firm_id:"firm_id"},features:[t.TTD],decls:39,vars:6,consts:[["fxLayout","row","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","",2,"background-color","white"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","","mat-table","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","style","text-align: left;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: left;",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","details"],["matColumnDef","document"],["mat-header-cell","","style"," text-align: center;",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["fxLayout","row","fxLayoutAlign","center center"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",2,"text-align","left"],["mat-cell","",2,"text-align","left"],["fxLayout","column"],[2,"font-weight","bold"],["style","color: red;",4,"ngIf"],["style","color: green;",4,"ngIf"],[2,"color","red"],[2,"color","green"],["style","color: rgb(255, 115, 0);",4,"ngIf"],["no_data",""],[2,"color","rgb(255, 115, 0)"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["mat-icon-button","","title","Edit","color","primary",3,"disabled","click",4,"ngIf"],["mat-icon-button","","title","Delete","color","warn",3,"disabled","click",4,"ngIf"],["mat-icon-button","","title","Add","color","warn",3,"disabled","click",4,"ngIf"],["mat-icon-button","","title","Edit","color","primary",3,"disabled","click"],["mat-icon-button","","style","color: green;",3,"click",4,"ngIf"],["mat-icon-button","",2,"color","green",3,"click"],["mat-icon-button","","title","Delete","color","warn",3,"disabled","click"],["mat-icon-button","","title","Add","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(f,x){1&f&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3),t.ynx(4,4),t.YNc(5,R,2,0,"th",5),t.YNc(6,w,2,1,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,P,2,0,"th",8),t.YNc(9,I,6,2,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,M,2,0,"th",5),t.YNc(12,y,5,3,"td",6),t.BQk(),t.ynx(13,11),t.YNc(14,T,2,0,"th",5),t.YNc(15,m,7,4,"td",6),t.BQk(),t.ynx(16,12),t.YNc(17,u,2,0,"th",13),t.YNc(18,J,2,1,"td",6),t.BQk(),t.ynx(19,14),t.YNc(20,it,2,0,"th",5),t.YNc(21,G,5,4,"td",6),t.BQk(),t.YNc(22,Q,1,0,"tr",15),t.YNc(23,j,1,0,"tr",16),t.qZA(),t.TgZ(24,"table",3),t.ynx(25,4),t.YNc(26,ct,2,1,"td",6),t.BQk(),t.ynx(27,7),t.YNc(28,rt,6,1,"td",9),t.BQk(),t.ynx(29,10),t.YNc(30,pt,1,0,"td",6),t.BQk(),t.ynx(31,11),t.YNc(32,tt,2,1,"td",6),t.BQk(),t.ynx(33,12),t.YNc(34,mt,2,1,"td",6),t.BQk(),t.ynx(35,14),t.YNc(36,X,5,2,"td",6),t.BQk(),t.YNc(37,et,1,0,"tr",16),t.qZA(),t._UZ(38,"div",17),t.qZA()()()),2&f&&(t.xp6(3),t.Q6J("dataSource",x.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",x.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",x.displayedColumns),t.xp6(1),t.Q6J("dataSource",x.tneb_bills),t.xp6(13),t.Q6J("matRowDefColumns",x.displayedColumns))},dependencies:[N.O5,l.lW,c.Hw,U.BZ,U.fO,U.as,U.w1,U.Dz,U.nj,U.ge,U.ev,U.XQ,U.Gk,B.xw,B.SQ,B.Wh,B.yH,N.uU],styles:[".example-container[_ngcontent-%COMP%]{height:400px;overflow:auto}.mat-table-sticky[_ngcontent-%COMP%]{opacity:1}.example-sticky-toggle-group[_ngcontent-%COMP%]{margin:8px}.mat-column-filler[_ngcontent-%COMP%]{padding:0 8px;font-size:10px;text-align:center}.mat-header-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{min-width:80px;box-sizing:border-box}.mat-table[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]:hover{color:#006400;text-decoration:underline}"]}),D})()},4285:(lt,$,i)=>{"use strict";i.d($,{B:()=>ut});var t=i(3097),a=i(9211),e=i(4931),s=i(943),_=i(2711),V=i(5826),W=i(4104),Y=i(677),N=i(4795),l=i(3089),c=i(7804),U=i(971),B=i(8521),R=i(7698),w=i(8977),P=i(1477),I=i(7333),M=i(9741),K=i(9059),Z=i(7495),k=i(7018),y=i(6672),T=i(4014);function O(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Name of Establishment "),t.qZA())}function A(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Only Alphanumeric Characters and .@() symbols are allowed. "),t.qZA())}function E(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Registration/License Number "),t.qZA())}function h(H,ot){if(1&H&&(t.ynx(0),t.TgZ(1,"mat-option",30),t._uU(2),t.qZA(),t.BQk()),2&H){const v=ot.$implicit;t.xp6(1),t.Q6J("value",v.id),t.xp6(1),t.Oqu(v.act_name)}}function b(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Labour Act "),t.qZA())}function r(H,ot){if(1&H&&(t.TgZ(0,"mat-option",30)(1,"div",3)(2,"div",32),t._uU(3),t.qZA()()()),2&H){const v=ot.$implicit;t.Q6J("value",v),t.xp6(3),t.hij("",v.business_nature_name," ")}}function p(H,ot){if(1&H&&(t.ynx(0),t.YNc(1,r,4,2,"mat-option",31),t.BQk()),2&H){const v=ot.ngIf;t.xp6(1),t.Q6J("ngForOf",v)}}function n(H,ot){1&H&&(t.TgZ(0,"mat-option"),t._UZ(1,"mat-spinner",33),t.qZA())}function o(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Choose Nature of the Business. "),t.qZA())}function m(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter Firm mobile no "),t.qZA())}function u(H,ot){1&H&&(t.TgZ(0,"mat-error"),t._uU(1," Phone / Secondary Number is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function C(H,ot){1&H&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3,"Please Enter email of the Establishment. "),t.qZA())}function J(H,ot){1&H&&(t.TgZ(0,"mat-error"),t._uU(1," Contact Person's FAX Number is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function it(H,ot){1&H&&(t.TgZ(0,"mat-error"),t._uU(1," Required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function _t(H,ot){1&H&&(t.TgZ(0,"button",34),t._uU(1,"Reset"),t.qZA())}let ut=(()=>{class H{constructor(v,G){this.ds=v,this.location=G,this.isLoading=!1,this._data=new e.X(!1),this.isRemarked=!1,this.firm_id=new t.vpe,this.fg=new a.nJ({firm_name:new a.p4(null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 .@()]+$")]),est_fax:new a.p4(null),est_phone:new a.p4(null),act_id:new a.p4(null,[a.kI.required]),license_no:new a.p4(null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9]+$")]),est_mobile:new a.p4(null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]),est_email:new a.p4(null,[a.kI.required,a.kI.email]),business_nature:new a.p4(null,[a.kI.required]),est_starts_from:new a.p4(null,[a.kI.required])})}set isRemarks(v){this._data.next(v)}get isRemarks(){return this._data.getValue()}ngOnDestroy(){}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,this.getActs(),this.firm&&this.ds.getFirmEst(this.firm).subscribe(v=>{this.firm_est=v,this.existingformInitialize(),this.disableUnnecessaryEstUpdate()}),setTimeout(()=>{this.bindValueChange()},100)}bindValueChange(){this.business_natures$=this.fg.get("business_nature").valueChanges.pipe((0,s.b)(300),(0,_.O)(""),(0,V.U)(v=>"string"==typeof v||null==v?v:v.name),(0,W.b)(()=>this.isLoading=!0),(0,Y.w)(v=>this.ds.getBusinessNatures({search_text:v,act_id:this.fg.get("act_id").value}).pipe((0,V.U)(G=>G.rows),(0,N.x)(()=>this.isLoading=!1))))}existingformInitialize(){this.fg.setValue({firm_name:this.firm_est.firm_name,est_fax:this.firm_est.est_fax,est_phone:this.firm_est.est_phone,act_id:this.firm_est.act_id,license_no:this.firm_est.license_no,est_mobile:this.firm_est.est_mobile,est_email:this.firm_est.est_email,business_nature:this.firm_est.to_json[0],est_starts_from:this.firm_est.est_starts_from}),this.firm_est.other_business_nature_name&&this.fg.get("business_nature_id").disable()}disableUnnecessaryEstUpdate(){"CLI"==this.firm_est.status&&this._data.subscribe(v=>{v?(this.isRemarked=!1,this.fg.enable(),this.fg.updateValueAndValidity()):(this.isRemarked=!0,this.fg.disable(),this.fg.updateValueAndValidity())})}changeLabourAct(v){v&&this.fg.get("business_nature").enable()}changeNatureBussiness(v){"None"==v.option.value?(this.fg.get("other_business_nature_name").enable(),this.fg.get("other_business_nature_name").setValue(null)):(this.fg.get("other_business_nature_name").setValue(null),this.fg.get("other_business_nature_name").disable())}changeOtherNature(v){v.value?(this.fg.get("business_nature_id").setValue(null),this.fg.get("business_nature_id").disable()):(this.fg.get("business_nature_id").enable(),this.fg.get("business_nature_id").setValue(null))}displayFn(v){return v?v.name:void 0}getActs(){this.ds.getActs({}).subscribe(v=>{this.acts=v.rows})}saveRegistrationEst(v){const G=Object.assign({},this.fg.value);G.user_id=this.user.id,G.status=v,this.firm_est&&(this.firm_est.user_id=this.user.id,this.firm_est.firm_name=G.firm_name,this.firm_est.act_id=G.act_id,this.firm_est.est_fax=G.est_fax,this.firm_est.other_act_name=G.other_act_name,this.firm_est.license_no=G.license_no,this.firm_est.business_nature_id=G.business_nature.id,this.firm_est.est_mobile=G.est_mobile,this.firm_est.est_phone=G.est_phone,this.firm_est.est_email=G.est_email,this.firm_est.est_starts_from=G.est_starts_from,this.firm_est.status=v),this.isLoading=!0,this.ds.saveRegistrationEst(this.firm_est?this.firm_est:G).subscribe(Q=>{this.isLoading=!1,this.firm_id.emit(Q.id)})}goBack(){this.location.back()}registerChange(v){"Y"==v?(this.fg.controls.old_est_reg_no.addValidators([a.kI.required]),this.fg.controls.old_est_reg_no.enable()):(this.fg.controls.old_est_reg_no.removeValidators([a.kI.required]),this.fg.controls.old_est_reg_no.disable())}}return H.\u0275fac=function(v){return new(v||H)(t.Y36(l.D),t.Y36(c.Ye))},H.\u0275cmp=t.Xpm({type:H,selectors:[["firm-est-det"]],inputs:{isRemarks:"isRemarks",firm_est:"firm_est"},outputs:{firm_id:"firm_id"},decls:81,vars:23,consts:[["fxLayout","row","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","",2,"background-color","white",3,"formGroup"],["fxFlex","","fxLayout","column",2,"margin","1%"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","10px"],["appearance","outline","fxFlex",""],["autocomplete","on","formControlName","firm_name","matInput","","maxlength","30","placeholder","Name of Establishment (As per ID Details)","required","","type","text"],["matSuffix",""],[4,"ngIf"],["autocomplete","on","formControlName","license_no","matInput","","maxlength","16","placeholder","Registration/License Number","required","","type","text"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","10px"],["formControlName","act_id",3,"selectionChange"],[4,"ngFor","ngForOf"],["fxFlex",""],["aria-label","Nature of the Business","formControlName","business_nature","matInput","","maxlength","50",3,"matAutocomplete","click"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[4,"ngIf","ngIfElse"],["loading",""],["autocomplete","on","formControlName","est_mobile","matInput","","maxlength","10","pattern","\\d{10}","placeholder","Mobile Number","type","tel"],["autocomplete","on","formControlName","est_phone","matInput","","maxlength","10","pattern","\\d{10}","placeholder","Landline Number","type","tel"],["autocomplete","on","formControlName","est_email","matInput","","name","email","placeholder","name@Example.com","required","","type","email"],["autocomplete","on","formControlName","est_fax","matInput","","maxlength","10","pattern","\\d{10}","placeholder","E.g. 8124515544","type","tel"],["fxFlex","50"],["formControlName","est_starts_from","matInput","","maxlength","16",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],["color","warn","mat-raised-button","","type","reset",4,"ngIf"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[2,"line-height","18px"],["diameter","50"],["color","warn","mat-raised-button","","type","reset"]],template:function(v,G){if(1&v&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7,"Name of Establishment (As per ID Details)"),t.qZA(),t._UZ(8,"input",6),t.TgZ(9,"mat-icon",7),t._uU(10,"domain"),t.qZA(),t.YNc(11,O,4,0,"mat-error",8),t.YNc(12,A,4,0,"mat-error",8),t.qZA(),t.TgZ(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Registration/License Number"),t.qZA(),t._UZ(16,"input",9),t.YNc(17,E,4,0,"mat-error",8),t.qZA()(),t.TgZ(18,"div",10)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21," Labour Act under which the Establishment is Registered/Licensed "),t.qZA(),t.TgZ(22,"mat-select",11),t.NdJ("selectionChange",function(j){return G.changeLabourAct(j.value)}),t.TgZ(23,"mat-option"),t._uU(24,"None of the below"),t.qZA(),t.YNc(25,h,3,2,"ng-container",12),t.qZA(),t.YNc(26,b,4,0,"mat-error",8),t.qZA(),t.TgZ(27,"mat-form-field",13)(28,"mat-label"),t._uU(29,"Nature of the Business."),t.qZA(),t.TgZ(30,"input",14),t.NdJ("click",function(j){return j.target}),t.qZA(),t.TgZ(31,"mat-autocomplete",15,16),t.YNc(33,p,2,1,"ng-container",17),t.ALo(34,"async"),t.YNc(35,n,2,0,"ng-template",null,18,t.W1O),t.qZA(),t.YNc(37,o,4,0,"mat-error",8),t.qZA()(),t.TgZ(38,"div",10)(39,"mat-form-field",5)(40,"mat-label"),t._uU(41,"Firm Mobile Number"),t.qZA(),t._UZ(42,"input",19),t.TgZ(43,"mat-icon",7),t._uU(44,"phone_android"),t.qZA(),t.YNc(45,m,4,0,"mat-error",8),t.qZA(),t.TgZ(46,"mat-form-field",5)(47,"mat-label"),t._uU(48,"Phone / Secondary Number"),t.qZA(),t._UZ(49,"input",20),t.TgZ(50,"mat-icon",7),t._uU(51,"phone"),t.qZA(),t.YNc(52,u,4,0,"mat-error",8),t.qZA()(),t.TgZ(53,"div",10)(54,"mat-form-field",5)(55,"mat-label"),t._uU(56,"Email Address"),t.qZA(),t._UZ(57,"input",21),t.TgZ(58,"mat-icon",7),t._uU(59,"mail_outline"),t.qZA(),t.YNc(60,C,4,0,"mat-error",8),t.qZA(),t.TgZ(61,"mat-form-field",5)(62,"mat-label"),t._uU(63,"Contact Person's FAX Number"),t.qZA(),t._UZ(64,"input",22),t.TgZ(65,"mat-icon",7),t._uU(66,"fax"),t.qZA(),t.YNc(67,J,4,0,"mat-error",8),t.qZA()(),t.TgZ(68,"div",10)(69,"mat-form-field",23)(70,"mat-label"),t._uU(71,"Establishment Starts Date"),t.qZA(),t._UZ(72,"input",24)(73,"mat-datepicker-toggle",25)(74,"mat-datepicker",null,26),t.YNc(76,it,4,0,"mat-error",8),t.qZA()(),t.TgZ(77,"div",27)(78,"button",28),t.NdJ("click",function(){return G.saveRegistrationEst("CLI"==(null==G.firm?null:G.firm.status)?"CLI":"D")}),t._uU(79),t.qZA(),t.YNc(80,_t,2,0,"button",29),t.qZA()()()()()),2&v){const Q=t.MAs(32),j=t.MAs(36),ct=t.MAs(75);t.xp6(1),t.Q6J("formGroup",G.fg),t.xp6(10),t.Q6J("ngIf",G.fg.get("firm_name").hasError("required")),t.xp6(1),t.Q6J("ngIf",G.fg.get("firm_name").hasError("pattern")),t.xp6(5),t.Q6J("ngIf",G.fg.get("license_no").hasError("required")),t.xp6(8),t.Q6J("ngForOf",G.acts),t.xp6(1),t.Q6J("ngIf",G.fg.get("act_id").hasError("required")),t.xp6(4),t.Q6J("matAutocomplete",Q),t.xp6(1),t.Q6J("displayWith",G.displayFn),t.xp6(2),t.Q6J("ngIf",t.lcZ(34,21,G.business_natures$))("ngIfElse",j),t.xp6(4),t.Q6J("ngIf",G.fg.get("business_nature").hasError("required")),t.xp6(8),t.Q6J("ngIf",G.fg.get("est_mobile").hasError("required")),t.xp6(7),t.Q6J("ngIf",G.fg.get("est_phone").hasError("required")),t.xp6(8),t.Q6J("ngIf",G.fg.get("est_email").hasError("required")),t.xp6(7),t.Q6J("ngIf",G.fg.get("est_fax").hasError("required")),t.xp6(5),t.Q6J("matDatepicker",ct),t.xp6(1),t.Q6J("for",ct),t.xp6(3),t.Q6J("ngIf",G.fg.get("est_starts_from").hasError("required")),t.xp6(2),t.Q6J("disabled",G.isLoading||G.fg.invalid),t.xp6(1),t.hij(" ","CLI"==(null==G.firm?null:G.firm.status)?"Update":"Save"," "),t.xp6(1),t.Q6J("ngIf","CLI"!=(null==G.firm_est?null:G.firm_est.status))}},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.sg,a.u,U.XC,U.ZL,B.ey,R.Lv,w.lW,P.Mq,P.hl,P.nW,I.TO,I.KE,I.hX,I.R9,M.Hw,K.Nt,Z.Ou,k.gD,y.Ic,T.xw,T.SQ,T.yH,c.Ov]}),H})()},2523:(lt,$,i)=>{"use strict";i.d($,{b:()=>b});var t=i(3097),a=i(9211),e=i(3329),s=i(5172),_=i(4931),V=i(3089),W=i(4321),Y=i(7804),N=i(7698),l=i(8977),c=i(7333),U=i(9741),B=i(9059),R=i(6672),w=i(4014);function P(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Name of the Employer is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function I(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Permanent Male Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function M(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Permanent Female Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function K(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Permanent Transgender Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function Z(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Permanent disabled Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function k(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Should not exceed than total permanent Employees"),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function y(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Contract Male Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function T(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Contract Female Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function O(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Contract Transgender Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function A(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Number of Contract disabled Employees is required "),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function E(r,p){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Should not exceed than total Contract Employees"),t.TgZ(2,"sup"),t._uU(3,"*"),t.qZA()())}function h(r,p){if(1&r&&(t.TgZ(0,"button",23),t._uU(1,"Reset"),t.qZA()),2&r){const n=t.oxw();t.Q6J("disabled",n.isRemarked)}}let b=(()=>{class r{constructor(n,o){this.ds=n,this.dialog=o,this.is_loading=!1,this.isRemarked=!1,this.tt_pm_emp=0,this.manpower_det=new t.vpe,this.firm_id=new t.vpe,this._data=new _.X(!1)}set isRemarks(n){this._data.next(n)}get isRemarks(){return this._data.getValue()}ngOnDestroy(){this._data.unsubscribe()}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,this.formInitialize(),this.firm&&this.ds.getFirmEst(this.firm).subscribe(n=>{this.firm_est=n,this.existingformInitialize(),this.disableUnnecessaryEstUpdate()})}formInitialize(){this.fg=new a.nJ({employer_name:new a.p4(null,[a.kI.required]),pe_male:new a.p4(null,[a.kI.required]),pe_female:new a.p4(null,[a.kI.required]),pe_trans:new a.p4(null,[a.kI.required]),pe_disabled:new a.p4(null,[a.kI.required]),ce_male:new a.p4(null,[a.kI.required]),ce_female:new a.p4(null,[a.kI.required]),ce_trans:new a.p4(null,[a.kI.required]),ce_disabled:new a.p4(null,[a.kI.required])}),this.manpower_det.emit(this.fg)}existingformInitialize(){this.fg=new a.nJ({employer_name:new a.p4(this.firm_est.employer_name,[a.kI.required]),pe_male:new a.p4(this.firm_est.pe_male,[a.kI.required]),pe_female:new a.p4(this.firm_est.pe_female,[a.kI.required]),pe_trans:new a.p4(this.firm_est.pe_trans,[a.kI.required]),pe_disabled:new a.p4(this.firm_est.pe_disabled,[a.kI.required]),ce_male:new a.p4(this.firm_est.ce_male,[a.kI.required]),ce_female:new a.p4(this.firm_est.ce_female,[a.kI.required]),ce_trans:new a.p4(this.firm_est.ce_trans,[a.kI.required]),ce_disabled:new a.p4(this.firm_est.ce_disabled,[a.kI.required])})}getEstClarification(){const n=Object.assign({});n.firm_id=this.firm.id,this.ds.getEstClarifications(n).subscribe(o=>{this.clarifications=o.rows})}addPFDetails(){this.dialog.open(s.b,{width:"50%",hasBackdrop:!0,data:null}).afterClosed().subscribe(m=>{this.ds.getPermanentEmployeeCounts({firm_id:this.firm.id}).subscribe(u=>{this.tt_pm_emp=Number(u[0].male)+Number(u[0].female)+Number(u[0].trans)})})}disablePm_employees(){this.fg.get("pe_male").disable(),this.fg.get("pe_female").disable(),this.fg.get("pe_trans").disable(),this.fg.get("pe_disabled").disable()}saveRegistrationEst(n){const o=Object.assign({},this.fg.value);o.user_id=this.user.id;let m=0;m=o.pe_male+o.pe_female+o.pe_trans,0!=this.tt_pm_emp&&this.tt_pm_emp!=m&&confirm("UAN numbers uploaded doesn't match the with the entered permanent employees \nDo you wanna continue anyway ?"),this.firm_est&&(this.firm_est.user_id=this.user.id,this.firm_est.employer_name=o.employer_name,this.firm_est.pe_male=o.pe_male,this.firm_est.pe_female=o.pe_female,this.firm_est.pe_trans=o.pe_trans,this.firm_est.pe_disabled=o.pe_disabled,this.firm_est.ce_male=o.ce_male,this.firm_est.ce_female=o.ce_female,this.firm_est.ce_trans=o.ce_trans,this.firm_est.ce_disabled=o.ce_disabled,this.firm_est.status=n),this.is_loading=!0,this.ds.saveRegistrationEst(this.firm_est?this.firm_est:o).subscribe(u=>{("saved successfully."==u.message||"update successfully."==u.message)&&(this.is_loading=!1,this.firm_id.emit(u.id))})}ReturnMessage(n){this.getEstClarification()}onFileSelected(n){this.is_loading=!0;const o=n.target.files;let u,m=new FormData;if(o.length>0){if(u=o[0],"text/csv"!=u.type)return void alert("Only csv Files are Allowed !");if(!(u.size/1048576<=1))return void alert("File size must be lesser than 1MB");m.append("thumbnail",u),m.append("file",u,u.name),m.append("id","2"),m.append("tz",(new Date).toISOString()),m.append("firm_id",u,this.firm_est.id.toString())}this.firm_est.id?this.ds.savePfDetails(m).subscribe(C=>{try{if(C.type===e.dt.UploadProgress&&(this.progressInfo=Math.round(100*C.loaded/C.total)),C.type==e.dt.Response){const J=Object.assign({});J.firm_id=this.firm_est?.id,J.doc_type="PF_DOC",J.file_name=u.name,J.file_type=u.type,J.file_size=Number((u.size/1024).toFixed(0)),J.storage_name=C.body.file_name}}catch{alert("Please try again."),this.ngOnInit()}}):alert("Document Uploading required firm id"),this.is_loading=!1}disableUnnecessaryEstUpdate(){"CLI"==this.firm_est.status&&this._data.subscribe(n=>{n?(this.isRemarked=!1,this.fg.enable(),this.fg.updateValueAndValidity()):(this.isRemarked=!0,this.fg.disable(),this.fg.updateValueAndValidity())})}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(V.D),t.Y36(W.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["firm-manpower-det"]],inputs:{firm_est:"firm_est",isRemarks:"isRemarks"},outputs:{manpower_det:"manpower_det",firm_id:"firm_id"},decls:89,vars:18,consts:[["fxLayout","row","fxLayoutGap","1%",2,"margin","1%"],["fxFlex","",2,"background-color","white",3,"formGroup"],["fxLayout","column",2,"margin","1%"],["autocomplete","on","formControlName","employer_name","matInput","","maxlength","45","pattern","[a-zA-Z. ]+","placeholder","Name of the Employer","required","","type","text"],[4,"ngIf"],[1,"permanent-employee-border"],[2,"color","red"],["color","primary","mat-mini-fab","","type","button",3,"disabled","click"],["fxLayoutGap","10px"],["fxFlex",""],["autocomplete","on","formControlName","pe_male","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["matPrefix",""],["autocomplete","Off","formControlName","pe_female","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","pe_trans","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","pe_disabled","matInput","","min","0","placeholder","E.g.4","required","","type","number",3,"max"],["autocomplete","on","formControlName","ce_male","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],[1,"mat-18"],["autocomplete","on","formControlName","ce_female","matInput","","max","1000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","ce_trans","matInput","","max","1000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","ce_disabled","matInput","","min","0","placeholder","E.g.4","required","","type","number",3,"max"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["color","primary","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["color","warn","mat-raised-button","","type","reset",3,"disabled",4,"ngIf"],["color","warn","mat-raised-button","","type","reset",3,"disabled"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Name of the Employer"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,P,4,0,"mat-error",4),t.qZA(),t.TgZ(8,"div",5)(9,"p",6),t._uU(10,"*UAN details are necessary for all the permanent employees."),t.qZA(),t.TgZ(11,"div"),t._uU(12," Select the CSV File to upload "),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.addPFDetails()}),t.TgZ(14,"mat-icon"),t._uU(15,"attach_file"),t.qZA()()(),t.TgZ(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),t._uU(19,"Number of Permanent Male Employees"),t.qZA(),t._UZ(20,"input",10),t.TgZ(21,"mat-icon",11),t._uU(22,"boy"),t.qZA(),t.YNc(23,I,4,0,"mat-error",4),t.qZA(),t.TgZ(24,"mat-form-field",9)(25,"mat-label"),t._uU(26,"Number of Permanent Female Employees"),t.qZA(),t._UZ(27,"input",12),t.TgZ(28,"span",11)(29,"mat-icon"),t._uU(30,"girl"),t.qZA()(),t.YNc(31,M,4,0,"mat-error",4),t.qZA()(),t.TgZ(32,"div",8)(33,"mat-form-field",9)(34,"mat-label"),t._uU(35,"Number of Permanent Transgender"),t.qZA(),t._UZ(36,"input",13),t.TgZ(37,"span",11)(38,"mat-icon"),t._uU(39,"transgender"),t.qZA()(),t.YNc(40,K,4,0,"mat-error",4),t.qZA(),t.TgZ(41,"mat-form-field",9)(42,"mat-label"),t._uU(43,"Number of Disabled Employees in above Permanent employees"),t.qZA(),t._UZ(44,"input",14),t.TgZ(45,"span",11)(46,"mat-icon"),t._uU(47,"accessible"),t.qZA()(),t.YNc(48,Z,4,0,"mat-error",4),t.YNc(49,k,4,0,"mat-error",4),t.qZA()()(),t.TgZ(50,"div",8)(51,"mat-form-field",9)(52,"mat-label"),t._uU(53,"Number of Contract Male Employees"),t.qZA(),t._UZ(54,"input",15),t.TgZ(55,"span",11)(56,"mat-icon",16),t._uU(57,"boy"),t.qZA()(),t.YNc(58,y,4,0,"mat-error",4),t.qZA(),t.TgZ(59,"mat-form-field",9)(60,"mat-label"),t._uU(61,"Number of Contract Female Employees"),t.qZA(),t._UZ(62,"input",17),t.TgZ(63,"span",11)(64,"mat-icon",16),t._uU(65,"girl"),t.qZA()(),t.YNc(66,T,4,0,"mat-error",4),t.qZA()(),t.TgZ(67,"div",8)(68,"mat-form-field",9)(69,"mat-label"),t._uU(70,"Number of Contract Transgender"),t.qZA(),t._UZ(71,"input",18),t.TgZ(72,"span",11)(73,"mat-icon"),t._uU(74,"transgender"),t.qZA()(),t.YNc(75,O,4,0,"mat-error",4),t.qZA(),t.TgZ(76,"mat-form-field",9)(77,"mat-label"),t._uU(78,"Number of Disabled Employees in above Contract employees"),t.qZA(),t._UZ(79,"input",19),t.TgZ(80,"span",11)(81,"mat-icon"),t._uU(82,"accessible"),t.qZA()(),t.YNc(83,A,4,0,"mat-error",4),t.YNc(84,E,4,0,"mat-error",4),t.qZA()(),t.TgZ(85,"div",20)(86,"button",21),t.NdJ("click",function(){return o.saveRegistrationEst("CLI"==(null==o.firm?null:o.firm.status)?null==o.firm?null:o.firm.status:"D")}),t._uU(87),t.qZA(),t.YNc(88,h,2,1,"button",22),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",o.fg),t.xp6(6),t.Q6J("ngIf",o.fg.get("employer_name").hasError("required")),t.xp6(6),t.Q6J("disabled",o.fg.disabled),t.xp6(10),t.Q6J("ngIf",o.fg.get("pe_male").hasError("required")),t.xp6(8),t.Q6J("ngIf",o.fg.get("pe_female").hasError("required")),t.xp6(9),t.Q6J("ngIf",o.fg.get("pe_trans").hasError("required")),t.xp6(4),t.Q6J("max",o.fg.get("pe_male").value+o.fg.get("pe_female").value+o.fg.get("pe_trans").value),t.xp6(4),t.Q6J("ngIf",o.fg.get("pe_disabled").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.fg.get("pe_disabled").hasError("max")),t.xp6(9),t.Q6J("ngIf",o.fg.get("ce_male").hasError("required")),t.xp6(8),t.Q6J("ngIf",o.fg.get("ce_female").hasError("required")),t.xp6(9),t.Q6J("ngIf",o.fg.get("ce_trans").hasError("required")),t.xp6(4),t.Q6J("max",o.fg.get("ce_male").value+o.fg.get("ce_female").value+o.fg.get("ce_trans").value),t.xp6(4),t.Q6J("ngIf",o.fg.get("ce_disabled").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.fg.get("ce_disabled").hasError("max")),t.xp6(2),t.Q6J("disabled",o.is_loading||o.fg.invalid||o.isRemarked),t.xp6(1),t.hij("","CLI"==(null==o.firm?null:o.firm.status)?"Update":"Save"," "),t.xp6(1),t.Q6J("ngIf","CLI"!=(null==o.firm_est?null:o.firm_est.status)))},dependencies:[Y.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.qQ,a.Fd,a.sg,a.u,N.Lv,l.lW,c.TO,c.KE,c.hX,c.qo,U.Hw,B.Nt,R.Ic,w.xw,w.SQ,w.yH],styles:[".permanent-employee-border[_ngcontent-%COMP%]{border:1px solid lightgray;padding:10px;border-radius:25px;margin-bottom:10px}"]}),r})()},8449:(lt,$,i)=>{"use strict";i.d($,{E:()=>y});var t=i(9211),a=i(3329),e=i(7999),s=i(3097),_=i(3089),V=i(4321),W=i(9981),Y=i(7804),N=i(8977),l=i(7333),c=i(9741),U=i(9059),B=i(4014);function R(T,O){1&T&&(s.TgZ(0,"mat-error"),s._uU(1," Mark List is mandatory for "),s.TgZ(2,"b"),s._uU(3,"XI"),s.qZA(),s._uU(4," & "),s.TgZ(5,"b"),s._uU(6,"XII"),s.qZA(),s._uU(7," standard students. "),s.qZA())}function w(T,O){1&T&&(s.TgZ(0,"mat-error"),s._uU(1," Please enter a valid mark list number. "),s.qZA())}function P(T,O){if(1&T){const A=s.EpF();s.ynx(0),s._uU(1),s.TgZ(2,"button",12),s.NdJ("click",function(){s.CHM(A);const h=s.MAs(6);return s.KtG(h.click())}),s.TgZ(3,"mat-icon"),s._uU(4,"attach_file"),s.qZA(),s.TgZ(5,"input",13,14),s.NdJ("change",function(h){s.CHM(A);const b=s.oxw().index,r=s.oxw();return s.KtG(r.onMarkListSelected(h,b,"M_LIST"))}),s.qZA()(),s.BQk()}if(2&T){const A=s.oxw().index,E=s.oxw();s.xp6(1),s.hij(" ",E.mark_lists.controls[A].get("display_name").value||"Select the Mark list"," ")}}function I(T,O){if(1&T){const A=s.EpF();s.ynx(0),s._uU(1),s.TgZ(2,"button",15),s.NdJ("click",function(){s.CHM(A);const h=s.oxw().index,b=s.oxw();let r;return s.KtG(b.uploadService.show(null==b.mark_lists.controls[h]||null==(r=b.mark_lists.controls[h].get("storage_name"))?null:r.value))}),s.TgZ(3,"mat-icon"),s._uU(4,"remove_red_eye"),s.qZA()(),s.BQk()}if(2&T){const A=s.oxw().index,E=s.oxw();s.xp6(1),s.hij(" ",E.mark_lists.controls[A].get("display_name").value," ")}}function M(T,O){if(1&T){const A=s.EpF();s.TgZ(0,"div",16)(1,"button",17),s.NdJ("click",function(){s.CHM(A);const h=s.oxw().index,b=s.oxw();return s.KtG(b.deleteMark_lists(h,b.mark_lists.controls[h].get("attachment_id").value,b.mark_lists.controls[h].get("storage_name").value))}),s.TgZ(2,"mat-icon"),s._uU(3,"delete"),s.qZA()()()}}function K(T,O){1&T&&s._UZ(0,"div",16)}function Z(T,O){if(1&T&&(s.TgZ(0,"div",5)(1,"mat-form-field",6)(2,"mat-label"),s._uU(3,"Enter Mark list No."),s.qZA(),s._UZ(4,"input",7),s.YNc(5,R,8,0,"mat-error",8),s.YNc(6,w,2,0,"mat-error",8),s.qZA(),s.TgZ(7,"div",9),s.YNc(8,P,7,1,"ng-container",8),s.YNc(9,I,5,1,"ng-container",8),s.qZA(),s.YNc(10,M,4,0,"div",10),s.YNc(11,K,1,0,"ng-template",null,11,s.W1O),s.qZA()),2&T){const A=O.index,E=s.MAs(12),h=s.oxw();s.Q6J("formGroupName",A),s.xp6(5),s.Q6J("ngIf",h.mark_lists.controls[A].get("mark_list_no").hasError("required")),s.xp6(1),s.Q6J("ngIf",h.mark_lists.controls[A].get("mark_list_no").hasError("pattern")),s.xp6(2),s.Q6J("ngIf",null==h.mark_lists.controls[A].get("display_name").value),s.xp6(1),s.Q6J("ngIf",h.mark_lists.controls[A].get("storage_name").value),s.xp6(1),s.Q6J("ngIf",A>0)("ngIfElse",E)}}function k(T,O){if(1&T){const A=s.EpF();s.TgZ(0,"div",18)(1,"button",19),s.NdJ("click",function(){s.CHM(A);const h=s.oxw();return s.KtG(h.addMarkList())}),s.TgZ(2,"mat-icon",20),s._uU(3,"add"),s.qZA(),s.TgZ(4,"span"),s._uU(5,"MarkList Details"),s.qZA()()()}if(2&T){const A=s.oxw();s.xp6(1),s.Q6J("disabled",A.mark_lists.invalid)}}let y=(()=>{class T{constructor(A,E,h,b){this.fb=A,this.dataService=E,this.dialog=h,this.uploadService=b,this.isRemarks=!1,this.mark_list_details=[],this.schemeForm=this.fb.group({mark_lists:this.fb.array([])})}ngOnInit(){this.claimCode=localStorage.getItem("claimCode")}ngOnChanges(){this.claim_details&&("11"==this.claim_details.curr_class_studied||"12"==this.claim_details.curr_class_studied?(this.mark_lists.enable(),this.getMarkLists()):this.mark_lists.disable(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}getMarkLists(){this.addMarkList(),this.dataService.getMarkLists({claim_id:this.claim_details?.id}).subscribe(A=>{if(this.mark_list_details=A.rows,0!=this.mark_list_details.length)for(let E=0;E<Object?.keys(this.mark_list_details)?.length;E++)this.mark_lists.at(E)?.get("m_list_id")?.setValue(this.mark_list_details[E]?.id),this.mark_lists.at(E)?.get("mark_list_no")?.setValue(this.mark_list_details[E]?.mark_list_no),this.mark_lists.at(E)?.get("attachment_id")?.setValue(this.mark_list_details[E]?.attachment_id),this.mark_lists.at(E)?.get("display_name")?.setValue(this.mark_list_details[E]?.file_name),this.mark_lists.at(E)?.get("storage_name")?.setValue(this.mark_list_details[E]?.storage_name),this.mark_lists.at(E)?.get("mark_list_file")?.clearValidators(),this.mark_lists.at(E)?.get("mark_list_file")?.updateValueAndValidity(),E<Object?.keys(this.mark_list_details)?.length-1&&this.addMarkList()})}get mark_lists(){return this.schemeForm.get("mark_lists")}deleteMark_lists(A,E,h){let b={attachment_id:E,storage_name:h};b.attachment_id&&b.storage_name?this.dataService.deleteAttachmentDoc(b).subscribe(r=>{"Deleted successfully."==r.message&&this.mark_lists.removeAt(A)}):this.mark_lists.removeAt(A)}onFileSelected(A,E){this.isLoading=!0;const h=A.target.files;let r,b=new FormData;if(h.length>0){if(r=h[0],"application/pdf"!=r.type)return void alert("Only Pdf Files are Allowed !");if(!(r.size/1048576<=1))return void alert("File size must be lesser than 1MB");b.append("thumbnail",r),b.append("file",r,r.name),b.append("id","2"),b.append("tz",(new Date).toISOString())}this.claim_details.id?this.dataService.Upload(b).subscribe(p=>{try{if(p.type===a.dt.UploadProgress&&(this.progressInfo=Math.round(100*p.loaded/p.total)),p.type==a.dt.Response){const n=Object.assign({});n.firm_id=this.firm.id,n.claim_id=this.claim_details?.id,n.doc_type="M_LIST",n.file_name=r.name,n.file_type=r.type,n.file_size=Number((r.size/1024).toFixed(0)),n.storage_name=p.body.file_name,this.dataService.saveClaimAttachments(n).subscribe(o=>{if("Attachment saved successfully."==o.message){console.log("Attachment is saved Successfully."),console.log("clam attachment id ===",o);const m=this.schemeForm.get("mark_lists");m.controls[E].get("attachment_id").setValue(o.id),m.controls[E].get("display_name").setValue(r.name),m.controls[E].get("storage_name").setValue(p.body.file_name)}})}}catch{alert("Please try again."),this.ngOnInit()}}):alert("Document Uploading required claim id."),this.isLoading=!1}show(A){this.dialog.open(e.L,{width:"100%",height:"100%",hasBackdrop:!0,data:{storage_name:A}}).afterClosed().subscribe(b=>{})}onMarkListSelected(A,E,h){this.uploadService.onFileSelected(A,E,this.firm,this.claim_details,this.schemeForm,h)}addMarkList(){this.mark_lists.push(this.fb.group({m_list_id:[null],mark_list_no:[null,[t.kI.required,t.kI.pattern("[0-9A-Za-z]{16}")]],attachment_id:[null],display_name:[null,[t.kI.required]],storage_name:[null],mark_list_file:[null,[t.kI.required]]}))}}return T.\u0275fac=function(A){return new(A||T)(s.Y36(t.qu),s.Y36(_.D),s.Y36(V.uw),s.Y36(W.C))},T.\u0275cmp=s.Xpm({type:T,selectors:[["app-mark-list"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},features:[s.TTD],decls:5,vars:3,consts:[[3,"formGroup"],["fxLayout","row","fxLayoutGap","15px",2,"margin-bottom","10px","border","2px solid lightgrey","border-radius","10px","padding","4px"],["formArrayName","mark_lists","fxFlex","100"],["fxLayoutGap","10px",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","10",4,"ngIf"],["fxLayoutGap","10px",3,"formGroupName"],["fxFlex","75"],["formControlName","mark_list_no","matInput","","maxlength","16","placeholder","Enter Mark list No."],[4,"ngIf"],["fxFlex","25"],["fxFlex","5",4,"ngIf","ngIfElse"],["empty",""],["color","primary","mat-mini-fab","","type","button",3,"click"],["accept",".pdf","formControlName","mark_list_file","type","file",2,"display","none",3,"change"],["fileInput",""],["mat-mini-fab","",3,"click"],["fxFlex","5"],["aria-label","Example icon button with a delete icon","color","warn","mat-fab","",3,"click"],["fxFlex","10"],["color","primary","mat-raised-button","",3,"disabled","click"],["aria-hidden","false","aria-label","Home"]],template:function(A,E){1&A&&(s.TgZ(0,"form",0)(1,"div",1)(2,"div",2),s.YNc(3,Z,13,7,"div",3),s.qZA(),s.YNc(4,k,6,1,"div",4),s.qZA()()),2&A&&(s.Q6J("formGroup",E.schemeForm),s.xp6(3),s.Q6J("ngForOf",E.mark_lists.controls),s.xp6(1),s.Q6J("ngIf",E.mark_lists.length<3))},dependencies:[Y.sg,Y.O5,t._Y,t.Fj,t.JJ,t.JL,t.nD,t.sg,t.u,t.x0,t.CE,N.lW,l.TO,l.KE,l.hX,c.Hw,U.Nt,B.xw,B.SQ,B.yH]}),T})()},1748:(lt,$,i)=>{"use strict";i.d($,{X:()=>b,s:()=>h});var t=i(3097),a=i(9211),e=i(4076),s=i.n(e),_=i(4321),V=i(3089),W=i(2432),Y=i(4209),N=i(7804),l=i(8521),c=i(8977),U=i(3259),B=i(1477),R=i(7333),w=i(9741),P=i(9059),I=i(7018),M=i(6672),K=i(613),Z=i(4014);function k(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",31),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.name(n.schemeForm.get("ma_g_name")),t.oJD)}}function y(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",31),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.name(n.schemeForm.get("ma_b_name")),t.oJD)}}function T(r,p){if(1&r&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&r){const n=p.$implicit;t.Q6J("value",n.code),t.xp6(1),t.Oqu(n.name)}}function O(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",31),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.aadhaarNo(n.schemeForm.get("ma_b_aadhaar")),t.oJD)}}function A(r,p){if(1&r&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",31),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.err.aadhaarNo(n.schemeForm.get("ma_g_aadhaar")),t.oJD)}}function E(r,p){if(1&r){const n=t.EpF();t.TgZ(0,"mat-card-actions",33)(1,"button",34),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",35)(4,"button",36),t.NdJ("click",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&r){const n=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",n.schemeForm.valid),t.xp6(1),t.Q6J("disabled",n.isLoading||n.schemeForm.invalid)}}function h(r,p){return s()(p).diff(r,"days")}let b=(()=>{class r{constructor(n,o,m,u,C){this.dialog=n,this.fb=o,this.dataService=m,this.router=u,this.err=C,this.isLoading=!1,this.schemeForm=this.fb.group({ma_g_name:[null,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45)]],ma_g_dob:[null,a.kI.required],ma_b_name:[null,[a.kI.required,a.kI.pattern("^[A-Z a-z.@()]+$"),a.kI.maxLength(45)]],dp_relationship:[null,a.kI.required],ma_b_dob:[null,a.kI.required],ma_wedding_dt:[null,a.kI.required],ma_wedding_place:[null,[a.kI.required,a.kI.pattern("^[A-Z a-z,/.@()]+$")]],ma_b_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]],ma_g_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]],ma_marriage_cert_no:[null,a.kI.required],ma_b_family_ration_card_no:[null,a.kI.required],ma_g_family_ration_card_no:[null,a.kI.required]}),this.claimEvent=new t.vpe,this.isRemarks=!1}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getGenders(),this.getEducations()}ngOnChanges(n){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}draftClaimForm(){this.schemeForm.setValue({ma_g_name:this.claim_details.ma_g_name,ma_g_dob:this.claim_details.ma_g_dob,ma_b_name:this.claim_details.ma_b_name,dp_relationship:this.claim_details.dp_relationship,ma_b_dob:this.claim_details.ma_b_dob,ma_wedding_dt:this.claim_details.ma_wedding_dt,ma_wedding_place:this.claim_details.ma_wedding_place,ma_b_aadhaar:this.claim_details.ma_b_aadhaar,ma_g_aadhaar:this.claim_details.ma_g_aadhaar,ma_marriage_cert_no:this.claim_details.ma_marriage_cert_no,ma_b_family_ration_card_no:this.claim_details.ma_b_family_ration_card_no,ma_g_family_ration_card_no:this.claim_details.ma_g_family_ration_card_no})}getRelationships(){this.claimCode&&this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(n=>{this.dp_relationships=n.rows})}getEducations(){this.claimCode&&this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(n=>{this.classStudied=n.rows})}getGenders(){this.claimCode&&this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(n=>{this.genders=n.rows})}getDistricts(){this.dataService.getDistricts({}).subscribe(n=>{this.districts=n.rows})}onFileSelected(n){}saveClaimDetails(){let n="D"==this.claim_details.status?"D":"CLI";const o=this.schemeForm.get("ma_b_dob").value,m=this.schemeForm.get("ma_g_dob").value,u=this.schemeForm.get("ma_wedding_dt").value;if(h(o,u)<=6570)return alert("The bride's age at the time of Marriage must be 18 years or above."),void this.schemeForm.reset();if(h(m,u)<=7665)return alert("The bride's groom age at the time of Marriage must be 21 years or above."),void this.schemeForm.reset();if(s()(u).isAfter((0,e.now)()))return alert("Sorry Time Travellers Are not Allowed."),void this.schemeForm.reset();if("S"==n)return this.router.navigate(["/apps/my-claims"]);{this.isLoading=!0;let C=Object.assign({},this.schemeForm.value);return C.user_id=this.dataService.curr_user$.value.id,C.firm_id=this.firm.id,C.scheme_code=this.claimCode,C.status=n,C.claim_id=this.claim_id,this.claim_details&&(this.claim_details.ma_g_name=C.ma_g_name,this.claim_details.ma_g_dob=C.ma_g_dob,this.claim_details.ma_b_name=C.ma_b_name,this.claim_details.dp_relationship=C.dp_relationship,this.claim_details.ma_b_dob=C.ma_b_dob,this.claim_details.ma_wedding_dt=C.ma_wedding_dt,this.claim_details.ma_wedding_place=C.ma_wedding_place,this.claim_details.ma_b_aadhaar=C.ma_b_aadhaar,this.claim_details.ma_g_aadhaar=C.ma_g_aadhaar,this.claim_details.ma_marriage_cert_no=C.ma_marriage_cert_no,this.claim_details.ma_b_family_ration_card_no=C.ma_b_family_ration_card_no,this.claim_details.ma_g_family_ration_card_no=C.ma_g_family_ration_card_no),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:C).subscribe(J=>{"Scheme Details are Saved Successfully."==J.message||"Scheme Details are Updated Successfully."==J.message?(this.claim_id=J.id,this.claimEvent.emit(this.claim_id)):(this.schemeForm.reset(),alert("Sorry! Duplicate Claims are not allowed !")),this.isLoading=!1})}}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.D),t.Y36(W.F0),t.Y36(Y.E))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mrg-assist"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:119,vars:19,consts:[[3,"formGroup"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","ma_g_name","matInput","","placeholder","Name of Groom.","maxlength","46"],[4,"ngIf"],["formControlName","ma_g_dob","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","ma_b_name","matInput","","placeholder","Name of Bride."],["formControlName","ma_b_dob","matInput","",3,"matDatepicker"],["picker2",""],["fxLayoutGap","20px"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ma_wedding_dt","matInput","",3,"matDatepicker"],["picker3",""],["fxFill",""],["formControlName","ma_wedding_place","matInput","","maxlength","50","placeholder","Place of the Marriage"],["fxFlex","75"],["formControlName","ma_b_aadhaar","matInput","","maxlength","16","placeholder","Enter the Aadhaar No. of the bride"],["fxFlex","25"],["color","primary","mat-mini-fab","","type","button",3,"click"],["type","file",2,"display","none",3,"change"],["fileInput",""],["formControlName","ma_g_aadhaar","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of the Groom"],["fxFlex","row","fxLayoutGap","20px"],["formControlName","ma_marriage_cert_no","matInput","","maxlength","16","placeholder","Enter the Marriage Certificate Number"],["formControlName","ma_b_family_ration_card_no","matInput","","maxlength","16","placeholder","Ration Card No. of bride"],["formControlName","ma_g_family_ration_card_no","matInput","","maxlength","16","placeholder","Ration Card No. of Groom"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(n,o){if(1&n){const m=t.EpF();t.TgZ(0,"form",0)(1,"mat-card",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of Groom."),t.qZA(),t._UZ(6,"input",4),t.YNc(7,k,2,1,"mat-error",5),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Groom's Date of Birth."),t.qZA(),t._UZ(11,"input",6)(12,"mat-datepicker-toggle",7)(13,"mat-datepicker",null,8),t.qZA()(),t.TgZ(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Name of Bride."),t.qZA(),t._UZ(19,"input",9),t.YNc(20,y,2,1,"mat-error",5),t.qZA(),t.TgZ(21,"mat-form-field",3)(22,"mat-label"),t._uU(23,"Bride's Date of Birth."),t.qZA(),t._UZ(24,"input",10)(25,"mat-datepicker-toggle",7)(26,"mat-datepicker",null,11),t.qZA()(),t.TgZ(28,"div",12)(29,"mat-form-field",3)(30,"mat-select",13)(31,"mat-option"),t._uU(32,"*None*"),t.qZA(),t.YNc(33,T,2,2,"mat-option",14),t.qZA(),t.TgZ(34,"mat-label"),t._uU(35," Marriage assistance sought for "),t.qZA()(),t.TgZ(36,"mat-form-field",3)(37,"mat-label"),t._uU(38,"Marriage Date"),t.qZA(),t._UZ(39,"input",15)(40,"mat-datepicker-toggle",7)(41,"mat-datepicker",null,16),t.qZA()(),t.TgZ(43,"div",2)(44,"mat-form-field",17)(45,"mat-label"),t._uU(46,"Place of the Marriage"),t.qZA(),t._UZ(47,"input",18),t.qZA()(),t.TgZ(48,"div",2)(49,"mat-form-field",19)(50,"mat-label"),t._uU(51,"Enter the Aadhaar No. of the bride"),t.qZA(),t._UZ(52,"input",20),t.YNc(53,O,2,1,"mat-error",5),t.qZA(),t.TgZ(54,"div",21),t._uU(55),t.TgZ(56,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(57,"mat-icon"),t._uU(58,"attach_file"),t.qZA(),t.TgZ(59,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()()(),t.TgZ(61,"div",2)(62,"mat-form-field",19)(63,"mat-label"),t._uU(64,"Enter the Aadhaar No. of the Groom"),t.qZA(),t._UZ(65,"input",25),t.YNc(66,A,2,1,"mat-error",5),t.qZA(),t.TgZ(67,"div",21),t._uU(68),t.TgZ(69,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(70,"mat-icon"),t._uU(71,"attach_file"),t.qZA(),t.TgZ(72,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()()(),t.TgZ(74,"div",26)(75,"mat-form-field",19)(76,"mat-label"),t._uU(77,"Enter the Marriage Certificate Number"),t.qZA(),t._UZ(78,"input",27),t.qZA(),t.TgZ(79,"div"),t._uU(80),t.TgZ(81,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(82,"mat-icon"),t._uU(83,"attach_file"),t.qZA(),t.TgZ(84,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()()(),t.TgZ(86,"div",26)(87,"mat-form-field",19)(88,"mat-label"),t._uU(89,"Ration Card No. of bride"),t.qZA(),t._UZ(90,"input",28),t.qZA(),t.TgZ(91,"mat-form-field",19)(92,"mat-label"),t._uU(93,"Ration Card No. of Groom"),t.qZA(),t._UZ(94,"input",29),t.qZA()(),t.TgZ(95,"div",2)(96,"div",3),t._uU(97),t.TgZ(98,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(99,"mat-icon"),t._uU(100,"attach_file"),t.qZA(),t.TgZ(101,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()(),t.TgZ(103,"div",3),t._uU(104),t.TgZ(105,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(106,"mat-icon"),t._uU(107,"attach_file"),t.qZA(),t.TgZ(108,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()()(),t.TgZ(110,"div",26)(111,"div"),t._uU(112),t.TgZ(113,"button",22),t.NdJ("click",function(){t.CHM(m);const C=t.MAs(60);return t.KtG(C.click())}),t.TgZ(114,"mat-icon"),t._uU(115,"attach_file"),t.qZA(),t.TgZ(116,"input",23,24),t.NdJ("change",function(C){return o.onFileSelected(C)}),t.qZA()()()(),t.YNc(118,E,6,2,"mat-card-actions",30),t.qZA()()}if(2&n){const m=t.MAs(14),u=t.MAs(27),C=t.MAs(42);let J,it,_t,ut;t.Q6J("formGroup",o.schemeForm),t.xp6(7),t.Q6J("ngIf",null==(J=o.schemeForm.get("ma_g_name"))?null:J.invalid),t.xp6(4),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m),t.xp6(8),t.Q6J("ngIf",null==(it=o.schemeForm.get("ma_b_name"))?null:it.invalid),t.xp6(4),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(8),t.Q6J("ngForOf",o.dp_relationships),t.xp6(6),t.Q6J("matDatepicker",C),t.xp6(1),t.Q6J("for",C),t.xp6(13),t.Q6J("ngIf",null==(_t=o.schemeForm.get("ma_b_aadhaar"))?null:_t.invalid),t.xp6(2),t.hij(" ",o.fileName||"Select the Aadhaar Card of Bride"," "),t.xp6(11),t.Q6J("ngIf",null==(ut=o.schemeForm.get("ma_g_aadhaar"))?null:ut.invalid),t.xp6(2),t.hij(" ",o.fileName||"Select the Aadhaar Card of Groom"," "),t.xp6(12),t.hij(" ",o.fileName||"Select Marriage Certificate."," "),t.xp6(17),t.hij(" ",o.fileName||"Select Family Ration Card of Bride. (Required)"," "),t.xp6(7),t.hij(" ",o.fileName||"Select Family Ration Card of Groom. (Required)"," "),t.xp6(8),t.hij(" ",o.fileName||"Select Marriage Invitation (Required)"," "),t.xp6(6),t.Q6J("ngIf","CLI"==(null==o.claim_details?null:o.claim_details.status)&&1==o.isRemarks||"CLI"!=(null==o.claim_details?null:o.claim_details.status))}},dependencies:[N.sg,N.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,l.ey,c.lW,U.a8,U.hq,B.Mq,B.hl,B.nW,R.TO,R.KE,R.hX,R.R9,w.Hw,P.Nt,I.gD,M.Ic,K.gM,Z.xw,Z.SQ,Z.s9,Z.yH]}),r})()},9390:(lt,$,i)=>{"use strict";i.d($,{I:()=>K});var t=i(3097),a=i(9211),e=i(4931),s=i(3089),_=i(7804),V=i(8521),W=i(7698),Y=i(8977),N=i(7333),l=i(9059),c=i(7018),U=i(6672),B=i(4014);function R(Z,k){1&Z&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3," Required "),t.qZA())}function w(Z,k){1&Z&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3," Required. "),t.qZA())}function P(Z,k){1&Z&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3," Please enter a valid registration id. "),t.qZA())}function I(Z,k){1&Z&&(t.TgZ(0,"mat-error")(1,"sup"),t._uU(2,"*"),t.qZA(),t._uU(3," Maximum length is reached. "),t.qZA())}function M(Z,k){if(1&Z&&(t.ynx(0),t.TgZ(1,"mat-form-field",10)(2,"mat-label"),t._uU(3,"Enter the Old Establishments Registration ID."),t.qZA(),t._UZ(4,"input",11),t.YNc(5,w,4,0,"mat-error",6),t.YNc(6,P,4,0,"mat-error",6),t.YNc(7,I,4,0,"mat-error",6),t.qZA(),t.BQk()),2&Z){const y=t.oxw();t.xp6(5),t.Q6J("ngIf",y.fg.get("old_est_reg_no").hasError("required")),t.xp6(1),t.Q6J("ngIf",y.fg.get("old_est_reg_no").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",y.fg.get("old_est_reg_no").hasError("maxlength"))}}let K=(()=>{class Z{constructor(y){this.ds=y,this.firm_id=new t.vpe,this.isLoading=!1,this.is_reg_confirmed=!1,this._data=new e.X(!1),this.fg=new a.nJ({is_legacy_reg:new a.p4(null,[a.kI.required]),old_est_reg_no:new a.p4(null,[a.kI.pattern("^(TNL||tnl)[0-9]{7}$"),a.kI.maxLength(10)])})}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,null!=this.firm&&this.ds.getFirmEst(this.firm).subscribe(y=>{this.firm_est=y,this.fg.setValue({is_legacy_reg:this.firm_est.is_legacy_reg,old_est_reg_no:this.firm_est.old_est_reg_no})})}set isRemarks(y){this._data.next(y)}get isRemarks(){return this._data.getValue()}registerChange(y){"Y"==y?(this.fg.controls.old_est_reg_no.addValidators([a.kI.required]),this.fg.controls.old_est_reg_no.enable()):(this.fg.controls.old_est_reg_no.removeValidators([a.kI.required]),this.fg.controls.old_est_reg_no.disable())}saveOldFirm(){const y=this.fg.get("old_est_reg_no").value;null!=y?this.ds.saveOldFirm({old_est_reg_no:y.toString().toUpperCase(),id:this.firm?.id||null}).subscribe(T=>{T.rows.length>0?T.is_already_taken?alert(`${y} is already taken by someone`):(this.is_reg_confirmed=confirm(`Kindly confirm your old establishment name is ${T.rows[0].lname}`),this.is_reg_confirmed&&this.saveRegistrationEst("CLI"==this.firm?.status?"CLI":"D",T.rows[0].lname)):alert(`${y} is not available in our database.`)}):this.saveRegistrationEst("CLI"==this.firm?.status?"CLI":"D",null)}saveRegistrationEst(y,T){const O=Object.assign({},this.fg.value);O.user_id=this.user.id,O.id=this.firm?.id,O.is_reg_confirmed=this.is_reg_confirmed,O.firm_name=T,O.status=y,this.isLoading=!0,this.ds.saveRegistrationEst(O).subscribe(A=>{this.isLoading=!1,this.firm_id.emit(A.id)})}}return Z.\u0275fac=function(y){return new(y||Z)(t.Y36(s.D))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-retrieve-old-est"]],inputs:{firm_est:"firm_est",isRemarks:"isRemarks"},outputs:{firm_id:"firm_id"},decls:19,vars:4,consts:[["fxFlex","",2,"background-color","white",3,"formGroup"],["fxFlex","","fxLayout","column",2,"margin","1%"],["fxFlex",""],["formControlName","is_legacy_reg",3,"selectionChange"],["value","Y"],["value","N"],[4,"ngIf"],["dir","rtl","fxLayout","row","fxLayoutGap","20px"],["color","primary","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"],["color","warn","mat-raised-button","","type","reset"],["appearance","outline","fxFlex",""],["autocomplete","on","formControlName","old_est_reg_no","matInput","","maxlength","10","placeholder","E.g: TNL0000010","type","text"]],template:function(y,T){1&y&&(t.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),t.NdJ("selectionChange",function(A){return T.registerChange(A.value)}),t.TgZ(4,"mat-option"),t._uU(5," None of the below"),t.qZA(),t.TgZ(6,"mat-option",4),t._uU(7," YES"),t.qZA(),t.TgZ(8,"mat-option",5),t._uU(9," NO"),t.qZA()(),t.TgZ(10,"mat-label"),t._uU(11,"Have you Already Registered your Establishment with TNLWB ?"),t.qZA(),t.YNc(12,R,4,0,"mat-error",6),t.qZA(),t.YNc(13,M,8,3,"ng-container",6),t.TgZ(14,"div",7)(15,"button",8),t.NdJ("click",function(){return T.saveOldFirm()}),t._uU(16," Submit "),t.qZA(),t.TgZ(17,"button",9),t._uU(18,"Reset"),t.qZA()()()()),2&y&&(t.Q6J("formGroup",T.fg),t.xp6(12),t.Q6J("ngIf",T.fg.get("is_legacy_reg").hasError("required")),t.xp6(1),t.Q6J("ngIf","Y"==T.fg.get("is_legacy_reg").value),t.xp6(2),t.Q6J("disabled",T.fg.get("old_est_reg_no").invalid))},dependencies:[_.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,V.ey,W.Lv,Y.lW,N.TO,N.KE,N.hX,l.Nt,c.gD,U.Ic,B.xw,B.SQ,B.yH]}),Z})()},363:(lt,$,i)=>{"use strict";i.d($,{c:()=>O});var t=i(3097),a=i(9211),e=i(4076),s=i.n(e),_=i(4321),V=i(3089),W=i(2432),Y=i(7804),N=i(8521),l=i(8977),c=i(3259),U=i(6822),B=i(1477),R=i(7333),w=i(9741),P=i(9059),I=i(7018),M=i(6672),K=i(613),Z=i(4014);function k(A,E){if(1&A&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&A){const h=E.$implicit;t.Q6J("value",h.code),t.xp6(1),t.Oqu(h.name)}}function y(A,E){if(1&A&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&A){const h=E.$implicit;t.Q6J("value",h.code),t.xp6(1),t.Oqu(h.name)}}function T(A,E){if(1&A){const h=t.EpF();t.TgZ(0,"mat-card-actions",29)(1,"button",30),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",31)(4,"button",32),t.NdJ("click",function(){t.CHM(h);const r=t.oxw();return t.KtG(r.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&A){const h=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",h.schemeForm.valid),t.xp6(1),t.Q6J("disabled",h.isLoading||h.schemeForm.invalid)}}let O=(()=>{class A{constructor(h,b,r,p){this.dialog=h,this.fb=b,this.dataService=r,this.router=p,this.isLoading=!1,this.schemeForm=this.fb.group({dp_relationship:[null,[a.kI.required]],dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$")]],dp_gender:[null,a.kI.required],smCourseDuration:[null,a.kI.required],sm_cert_dt:[null,a.kI.required],dp_mobile:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],dp_phone:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@()]+$")]],inst_contact_no:[null,a.kI.required],inst_address:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 .@()/]+$")]],sm_tailoring_inst_is_govt_recognised:[null,a.kI.required],dp_aadhaar:[null,[a.kI.required,a.kI.pattern("^[0-9]{12}$")]],sm_tailoring_inst_reg_no:[null,[a.kI.required,a.kI.minLength(3),a.kI.maxLength(45)]]}),this.claimEvent=new t.vpe,this.isRemarks=!1}ngOnChanges(h){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}ngOnInit(){this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getGenders()}draftClaimForm(){this.schemeForm.setValue({dp_name:this.claim_details.dp_name,dp_relationship:this.claim_details.dp_relationship,dp_gender:this.claim_details.dp_gender,smCourseDuration:this.claim_details.sm_course_duration_in_mon,dp_mobile:this.claim_details.dp_mobile,dp_phone:this.claim_details.dp_phone,inst_name:this.claim_details.inst_name,inst_contact_no:this.claim_details.inst_contact_no,inst_address:this.claim_details.inst_address,sm_tailoring_inst_is_govt_recognised:this.claim_details.sm_tailoring_inst_is_govt_recognised,dp_aadhaar:this.claim_details.dp_aadhaar,sm_cert_dt:this.claim_details.sm_cert_dt,sm_tailoring_inst_reg_no:this.claim_details.sm_tailoring_inst_reg_no})}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(h=>{this.dp_relationships=h.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(h=>{this.genders=h.rows})}onFileSelected(h){}saveClaimDetails(){let h="D"==this.claim_details.status?"D":"CLI",b=s()();const r=this.schemeForm.get("sm_cert_dt").value;if(!(b.diff(r,"days")>=90)){if("S"==h)return this.router.navigate(["/apps/my-claims"]);{let n;return this.isLoading=!0,n=Object.assign({},this.schemeForm.value),n.user_id=this.dataService.curr_user$.value.id,n.firm_id=this.firm.id,n.scheme_code=this.claimCode,n.status=h,n.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.dp_name=n.dp_name,this.claim_details.dp_gender=n.dp_gender,this.claim_details.sm_course_duration_in_mon=n.sm_course_duration_in_mon,this.claim_details.dp_mobile=n.dp_mobile,this.claim_details.dp_phone=n.dp_phone,this.claim_details.sm_cert_dt=n.sm_cert_dt,this.claim_details.inst_name=n.inst_name,this.claim_details.inst_contact_no=n.inst_contact_no,this.claim_details.inst_address=n.inst_address,this.claim_details.sm_tailoring_inst_is_govt_recognised=n.sm_tailoring_inst_is_govt_recognised,this.claim_details.dp_aadhaar=n.dp_aadhaar,this.claim_details.sm_tailoring_inst_reg_no=n.sm_tailoring_inst_reg_no,this.claim_details.status=n.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:n).subscribe(o=>{("Claim Details are Saved Successfully."==o.message||"Claim Details are Updated Successfully."==o.message)&&(this.claim_id=o.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}alert("This scheme is only applicable to employees who are registering with labour board on or before 90 days from the issue date of government certificate.")}}return A.\u0275fac=function(h){return new(h||A)(t.Y36(_.uw),t.Y36(a.QS),t.Y36(V.D),t.Y36(W.F0))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-sewing-machine"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:76,vars:6,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","15px"],["fxFlex","50"],["formControlName","dp_name","matInput","","placeholder","Name of the Student"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_gender"],["formControlName","smCourseDuration","matInput","","placeholder","Duration of the Course in Months.","type","number"],["appearance","outline","fxFlex","50"],["formControlName","dp_mobile","matInput","","placeholder","Mobile Number","maxlength","10"],["matSuffix",""],["formControlName","dp_phone","matInput","","placeholder","Landline Number","maxlength","10"],["formControlName","inst_name","matInput","","placeholder","Name of the Tailoring Institute","maxlength","100"],["fxFlex","50",1,"example-full-width"],["formControlName","inst_contact_no","matInput","","placeholder","Contact Number of Tailoring Institute","maxlength","10"],["fxLayout","row"],["formControlName","sm_cert_dt","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["fxFlexFill","","fxLayout","row"],["fxFill","",1,"example-full-width"],["formControlName","inst_address","matInput","","placeholder","Address of Tailoring Institute","maxlength","250"],["formControlName","sm_tailoring_inst_is_govt_recognised",1,"example-margin"],["fxFlex","75"],["formControlName","dp_aadhaar","matInput","","placeholder","Enter the Aadhaar No. of the Student"],["formControlName","sm_tailoring_inst_reg_no","matInput","","placeholder","Enter the Tailoring Registration No."],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"value"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(h,b){if(1&h&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.qZA(),t.TgZ(7,"mat-form-field",3)(8,"mat-select",5)(9,"mat-option"),t._uU(10,"*None*"),t.qZA(),t.YNc(11,k,2,2,"mat-option",6),t.qZA(),t.TgZ(12,"mat-label"),t._uU(13," Relationship to the Employee "),t.qZA()()(),t.TgZ(14,"div",2)(15,"mat-form-field",3)(16,"mat-label"),t._uU(17," Gender "),t.qZA(),t.TgZ(18,"mat-select",7)(19,"mat-option"),t._uU(20,"*none*"),t.qZA(),t.YNc(21,y,2,2,"mat-option",6),t.qZA()(),t.TgZ(22,"mat-form-field",3)(23,"mat-label"),t._uU(24,"Duration of the Course in Months."),t.qZA(),t._UZ(25,"input",8),t.qZA()(),t.TgZ(26,"div",2)(27,"mat-form-field",9)(28,"mat-label"),t._uU(29,"Mobile Number"),t.qZA(),t._UZ(30,"input",10),t.TgZ(31,"mat-icon",11),t._uU(32,"phone_android"),t.qZA()(),t.TgZ(33,"mat-form-field",9)(34,"mat-label"),t._uU(35,"Phone Number"),t.qZA(),t._UZ(36,"input",12),t.TgZ(37,"mat-icon",11),t._uU(38,"phone"),t.qZA()()(),t.TgZ(39,"div",2)(40,"mat-form-field",3)(41,"mat-label"),t._uU(42,"Name of the Tailoring Institute"),t.qZA(),t._UZ(43,"input",13),t.qZA(),t.TgZ(44,"mat-form-field",14)(45,"mat-label"),t._uU(46,"Contact Number of Tailoring Institute"),t.qZA(),t._UZ(47,"input",15),t.qZA()(),t.TgZ(48,"div",16)(49,"mat-form-field",3)(50,"mat-label"),t._uU(51,"Govt.,Recognized Cert.,Issued Date."),t.qZA(),t._UZ(52,"input",17)(53,"mat-datepicker-toggle",18)(54,"mat-datepicker",null,19),t.qZA()(),t.TgZ(56,"div",20)(57,"mat-form-field",21)(58,"mat-label"),t._uU(59,"Address of Tailoring Institute"),t.qZA(),t._UZ(60,"textarea",22),t.qZA()(),t.TgZ(61,"div",2)(62,"mat-checkbox",23),t._uU(63," Whether the Institute was recognised by the Government. "),t.qZA()(),t.TgZ(64,"div",2)(65,"mat-form-field",24)(66,"mat-label"),t._uU(67,"Enter the Aadhaar No. of the Student"),t.qZA(),t._UZ(68,"input",25),t.qZA(),t.TgZ(69,"mat-form-field",24)(70,"mat-label"),t._uU(71,"Enter the Tailoring Training Registration No."),t.qZA(),t._UZ(72,"input",26),t.TgZ(73,"mat-hint"),t._uU(74,"Only Govt / Govt Aided Training Centers Certificates are accepted."),t.qZA()()(),t.YNc(75,T,6,2,"mat-card-actions",27),t.qZA()()),2&h){const r=t.MAs(55);t.xp6(1),t.Q6J("formGroup",b.schemeForm),t.xp6(10),t.Q6J("ngForOf",b.dp_relationships),t.xp6(10),t.Q6J("ngForOf",b.genders),t.xp6(31),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(22),t.Q6J("ngIf","CLI"==(null==b.claim_details?null:b.claim_details.status)&&1==b.isRemarks||"CLI"!=(null==b.claim_details?null:b.claim_details.status))}},dependencies:[Y.sg,Y.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.nD,a.sg,a.u,N.ey,l.lW,c.a8,c.hq,U.oG,B.Mq,B.hl,B.nW,R.KE,R.bx,R.hX,R.R9,w.Hw,P.Nt,I.gD,M.Ic,K.gM,Z.xw,Z.SQ,Z.s9,Z.yH]}),A})()},1344:(lt,$,i)=>{"use strict";i.d($,{U:()=>K});var t=i(3097),a=i(9211),e=i(4076),_=i(1748),V=i(4321),W=i(3089),Y=i(2432),N=i(7804),l=i(8977),c=i(3259),U=i(1477),B=i(7333),R=i(9059),w=i(6672),P=i(613),I=i(4014);function M(Z,k){if(1&Z){const y=t.EpF();t.TgZ(0,"mat-card-actions",10)(1,"button",11),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",12)(4,"button",13),t.NdJ("click",function(){t.CHM(y);const O=t.oxw();return t.KtG(O.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&Z){const y=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",y.schemeForm.valid),t.xp6(1),t.Q6J("disabled",y.isLoading||y.schemeForm.invalid)}}let K=(()=>{class Z{constructor(y,T,O,A){this.dialog=y,this.fb=T,this.dataService=O,this.router=A,this.isLoading=!1,this.schemeForm=this.fb.group({sa_prescription_dt:[null,a.kI.required],sa_purchase_dt:[null,a.kI.required]}),this.claimEvent=new t.vpe,this.isRemarks=!1}ngOnChanges(y){this.claim_details&&(this.draftClaimForm(),"CLI"==this.claim_details.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}ngOnInit(){this.claimCode=localStorage.getItem("claimCode")}draftClaimForm(){this.schemeForm.setValue({sa_prescription_dt:this.claim_details.sa_prescription_dt,sa_purchase_dt:this.claim_details.sa_purchase_dt})}get sa_purchase_dt(){return this.schemeForm.get("sa_purchase_dt").value}get sa_prescription_dt(){return this.schemeForm.get("sa_prescription_dt").value}onFileSelected(y){}saveClaimDetails(){let y="D"==this.claim_details.status?"D":"CLI";if((0,_.s)(this.sa_purchase_dt.value,(0,e.now)())>=90)return alert("This scheme is only applicable to employees who are registering with labour board on or before 90 days from the date of purchase."),void this.schemeForm.reset();if("S"==y)return this.router.navigate(["/apps/my-claims"]);{let T;return this.isLoading=!0,T=Object.assign({},this.schemeForm.value),T.user_id=this.dataService.curr_user$.value.id,T.firm_id=this.firm.id,T.scheme_code=this.claimCode,T.status=y,T.claim_id=this.claim_details.id,this.claim_details&&(this.claim_details.sa_prescription_dt=T.sa_prescription_dt,this.claim_details.sa_purchase_dt=T.sa_purchase_dt,this.claim_details.status=T.status),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:T).subscribe(O=>{("Claim Details are Saved Successfully."==O.message||"Claim Details are Updated Successfully."==O.message)&&(this.claim_id=O.id,this.claimEvent.emit(this.claim_id)),this.isLoading=!1})}}}return Z.\u0275fac=function(y){return new(y||Z)(t.Y36(V.uw),t.Y36(a.QS),t.Y36(W.D),t.Y36(Y.F0))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-spectacle-assist"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:18,vars:6,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","sa_prescription_dt","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["formControlName","sa_purchase_dt","matInput","",3,"matDatepicker"],["picker2",""],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(y,T){if(1&y&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Date of Doctor's Prescription"),t.qZA(),t._UZ(6,"input",4)(7,"mat-datepicker-toggle",5)(8,"mat-datepicker",null,6),t.qZA(),t.TgZ(10,"mat-form-field",3)(11,"mat-label"),t._uU(12,"Date of Purchase"),t.qZA(),t._UZ(13,"input",7)(14,"mat-datepicker-toggle",5)(15,"mat-datepicker",null,8),t.qZA()(),t.YNc(17,M,6,2,"mat-card-actions",9),t.qZA()()),2&y){const O=t.MAs(9),A=t.MAs(16);t.xp6(1),t.Q6J("formGroup",T.schemeForm),t.xp6(5),t.Q6J("matDatepicker",O),t.xp6(1),t.Q6J("for",O),t.xp6(6),t.Q6J("matDatepicker",A),t.xp6(1),t.Q6J("for",A),t.xp6(3),t.Q6J("ngIf","CLI"==(null==T.claim_details?null:T.claim_details.status)&&1==T.isRemarks||"CLI"!=(null==T.claim_details?null:T.claim_details.status))}},dependencies:[N.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,l.lW,c.a8,c.hq,U.Mq,U.hl,U.nW,B.KE,B.hX,B.R9,R.Nt,w.Ic,P.gM,I.xw,I.SQ,I.yH]}),Z})()},9103:(lt,$,i)=>{"use strict";i.d($,{y:()=>et});var t=i(3097),a=i(9211),e=i(3089),s=i(3329),_=i(5826),V=i(4104),W=i(4321),Y=i(2432),N=i(4209),l=i(9981),c=i(5962),U=i(7804),B=i(8521),R=i(8977),w=i(3259),P=i(7333),I=i(9741),M=i(9059),K=i(7018),Z=i(6672),k=i(613),y=i(4014);function T(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw();t.xp6(1),t.Q6J("innerHTML",g.err.name(g.schemeForm.get("dp_name")),t.oJD)}}function O(S,D){if(1&S&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&S){const g=D.$implicit;t.Q6J("value",g.code),t.xp6(1),t.Oqu(g.name)}}function A(S,D){if(1&S&&(t.TgZ(0,"div")(1,"mat-option",24),t._uU(2),t.qZA()()),2&S){const g=D.$implicit;t.xp6(1),t.Q6J("value",g.code),t.xp6(1),t.Oqu(g.name)}}function E(S,D){if(1&S&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&S){const g=D.$implicit;t.Q6J("value",g.code),t.xp6(1),t.Oqu(g.name)}}function h(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw();t.xp6(1),t.Q6J("innerHTML",g.err.sixteenDigitAlphaNumeric(g.schemeForm.get("bonafide_cert_no")),t.oJD)}}function b(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw();t.xp6(1),t.Q6J("innerHTML",g.err.aadhaarNo(g.schemeForm.get("dp_aadhaar")),t.oJD)}}function r(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(g);const x=t.MAs(6);return t.KtG(x.click())}),t.TgZ(3,"mat-icon"),t._uU(4,"attach_file"),t.qZA(),t.TgZ(5,"input",26,27),t.NdJ("change",function(x){t.CHM(g);const z=t.oxw();return t.KtG(z.documentUpload(x))}),t.qZA()()()}if(2&S){const g=t.oxw();t.xp6(1),t.hij(" ",g.aadhaarFileName||"Select the Aadhaar Card"," ")}}function p(S,D){if(1&S){const g=t.EpF();t.ynx(0),t._uU(1),t.TgZ(2,"button",28),t.NdJ("click",function(){t.CHM(g);const x=t.oxw();return t.KtG(x.uploadService.show(null==x.dataSource?null:x.dataSource.storage_name))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.TgZ(5,"button",29),t.NdJ("click",function(){t.CHM(g);const x=t.oxw();return t.KtG(x.deleteAadhaarAttachmentDoc(x.dataSource))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()(),t.BQk()}if(2&S){const g=t.oxw();t.xp6(1),t.hij(" ",g.aadhaarFileName," ")}}function n(S,D){1&S&&(t.TgZ(0,"mat-error"),t._uU(1," Mark List is mandatory for "),t.TgZ(2,"b"),t._uU(3,"XI"),t.qZA(),t._uU(4," & "),t.TgZ(5,"b"),t._uU(6,"XII"),t.qZA(),t._uU(7," standard students. "),t.qZA())}function o(S,D){1&S&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid mark list number. "),t.qZA())}function m(S,D){if(1&S){const g=t.EpF();t.ynx(0),t._uU(1),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(g);const x=t.MAs(6);return t.KtG(x.click())}),t.TgZ(3,"mat-icon"),t._uU(4,"attach_file"),t.qZA(),t.TgZ(5,"input",38,27),t.NdJ("change",function(x){t.CHM(g);const z=t.oxw().index,st=t.oxw(2);return t.KtG(st.onMarkListSelected(x,z,"M_LIST"))}),t.qZA()(),t.BQk()}if(2&S){const g=t.oxw().index,f=t.oxw(2);t.xp6(1),t.hij(" ",f.mark_lists.controls[g].get("display_name").value||"Select the Mark list"," ")}}function u(S,D){if(1&S){const g=t.EpF();t.ynx(0),t._uU(1),t.TgZ(2,"button",28),t.NdJ("click",function(){t.CHM(g);const x=t.oxw().index,z=t.oxw(2);let st;return t.KtG(z.uploadService.show(null==z.mark_lists.controls[x]||null==(st=z.mark_lists.controls[x].get("storage_name"))?null:st.value))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.BQk()}if(2&S){const g=t.oxw().index,f=t.oxw(2);t.xp6(1),t.hij(" ",f.mark_lists.controls[g].get("display_name").value," ")}}function C(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(g);const x=t.oxw().index,z=t.oxw(2);return t.KtG(z.deleteMark_lists(x,z.mark_lists.controls[x].get("attachment_id").value,z.mark_lists.controls[x].get("storage_name").value))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function J(S,D){1&S&&t._UZ(0,"div",39)}function it(S,D){if(1&S&&(t.TgZ(0,"div",34)(1,"mat-form-field",19)(2,"mat-label"),t._uU(3,"Enter Mark list No."),t.qZA(),t._UZ(4,"input",35),t.YNc(5,n,8,0,"mat-error",6),t.YNc(6,o,2,0,"mat-error",6),t.qZA(),t.TgZ(7,"div",21),t.YNc(8,m,7,1,"ng-container",6),t.YNc(9,u,5,1,"ng-container",6),t.qZA(),t.YNc(10,C,4,0,"div",36),t.YNc(11,J,1,0,"ng-template",null,37,t.W1O),t.qZA()),2&S){const g=D.index,f=t.MAs(12),x=t.oxw(2);t.Q6J("formGroupName",g),t.xp6(5),t.Q6J("ngIf",x.mark_lists.controls[g].get("mark_list_no").hasError("required")),t.xp6(1),t.Q6J("ngIf",x.mark_lists.controls[g].get("mark_list_no").hasError("pattern")),t.xp6(2),t.Q6J("ngIf",null==x.mark_lists.controls[g].get("display_name").value),t.xp6(1),t.Q6J("ngIf",x.mark_lists.controls[g].get("storage_name").value),t.xp6(1),t.Q6J("ngIf",g>0)("ngIfElse",f)}}function _t(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(g);const x=t.oxw(2);return t.KtG(x.addMarkList())}),t.TgZ(2,"mat-icon",43),t._uU(3,"add"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"MarkList Details"),t.qZA()()()}if(2&S){const g=t.oxw(2);t.xp6(1),t.Q6J("disabled",g.mark_lists.invalid)}}function ut(S,D){if(1&S&&(t.ynx(0),t.TgZ(1,"div",30)(2,"div",31),t.YNc(3,it,13,7,"div",32),t.qZA(),t.YNc(4,_t,6,1,"div",33),t.qZA(),t.BQk()),2&S){const g=t.oxw();t.xp6(3),t.Q6J("ngForOf",g.mark_lists.controls),t.xp6(1),t.Q6J("ngIf",g.mark_lists.length<3)}}function H(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw().index,f=t.oxw(2);let x;t.xp6(1),t.Q6J("innerHTML",f.err.onlyAlphabetic(null==(x=f.sdat_certs.at(g))?null:x.get("sport_name")),t.oJD)}}function ot(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw().index,f=t.oxw(2);let x;t.xp6(1),t.Q6J("innerHTML",f.err.onlyReq(null==(x=f.sdat_certs.at(g))?null:x.get("sport_type")),t.oJD)}}function v(S,D){if(1&S&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&S){const g=D.$implicit;t.Q6J("value",g.winning_position),t.xp6(1),t.hij(" ",g.winning_name," ")}}function G(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw().index,f=t.oxw(2);let x;t.xp6(1),t.Q6J("innerHTML",f.err.onlyReq(null==(x=f.sdat_certs.at(g))?null:x.get("winning_position")),t.oJD)}}function Q(S,D){if(1&S&&(t.TgZ(0,"mat-error"),t._UZ(1,"span",23),t.qZA()),2&S){const g=t.oxw().index,f=t.oxw(2);let x;t.xp6(1),t.Q6J("innerHTML",f.err.sixteenDigitAlphaNumeric(null==(x=f.sdat_certs.at(g))?null:x.get("sdat_cert_no")),t.oJD)}}function j(S,D){if(1&S){const g=t.EpF();t.ynx(0),t._uU(1),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(g);const x=t.MAs(6);return t.KtG(x.click())}),t.TgZ(3,"mat-icon"),t._uU(4,"attach_file"),t.qZA(),t.TgZ(5,"input",55,27),t.NdJ("change",function(x){t.CHM(g);const z=t.oxw().index,st=t.oxw(2);return t.KtG(st.onSdatCertSelected(x,z))}),t.qZA()(),t.BQk()}if(2&S){const g=t.oxw().index,f=t.oxw(2);t.xp6(1),t.hij(" ",f.sdat_certs.controls[g].get("display_name").value||"Select SDAT certificate"," ")}}function ct(S,D){if(1&S){const g=t.EpF();t.ynx(0),t._uU(1),t.TgZ(2,"button",28),t.NdJ("click",function(){t.CHM(g);const x=t.oxw().index,z=t.oxw(2);let st;return t.KtG(z.uploadService.show(null==z.sdat_certs.controls[x]||null==(st=z.sdat_certs.controls[x].get("storage_name"))?null:st.value))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.BQk()}if(2&S){const g=t.oxw().index,f=t.oxw(2);t.xp6(1),t.hij(" ",f.sdat_certs.controls[g].get("display_name").value," ")}}function rt(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(g);const x=t.oxw().index,z=t.oxw(2);return t.KtG(z.deleteSdat_certs(x,z.sdat_certs.controls[x].get("attachment_id").value,z.sdat_certs.controls[x].get("storage_name").value))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function pt(S,D){1&S&&t._UZ(0,"div",39)}function tt(S,D){if(1&S&&(t.TgZ(0,"div",34)(1,"mat-form-field",47)(2,"mat-label"),t._uU(3,"Sport won at District Level."),t.qZA(),t._UZ(4,"input",48),t.YNc(5,H,2,1,"mat-error",6),t.qZA(),t.TgZ(6,"mat-form-field",47)(7,"mat-select",49)(8,"mat-option"),t._uU(9,"*None*"),t.qZA(),t.TgZ(10,"mat-option",50),t._uU(11,"Individual Sports"),t.qZA(),t.TgZ(12,"mat-option",51),t._uU(13,"Team Sports"),t.qZA()(),t.TgZ(14,"mat-label"),t._uU(15," Select the Sports Category. "),t.qZA(),t.YNc(16,ot,2,1,"mat-error",6),t.qZA(),t.TgZ(17,"mat-form-field",47)(18,"mat-select",52)(19,"mat-option"),t._uU(20,"*None*"),t.qZA(),t.YNc(21,v,2,2,"mat-option",8),t.qZA(),t.TgZ(22,"mat-label"),t._uU(23," Winning Position "),t.qZA(),t.YNc(24,G,2,1,"mat-error",6),t.qZA(),t.TgZ(25,"mat-form-field",47)(26,"mat-label"),t._uU(27,"SDAT Certificate Number."),t.qZA(),t._UZ(28,"input",53),t.YNc(29,Q,2,1,"mat-error",6),t.qZA(),t.TgZ(30,"div",54),t.YNc(31,j,7,1,"ng-container",6),t.YNc(32,ct,5,1,"ng-container",6),t.qZA(),t.YNc(33,rt,4,0,"div",36),t.YNc(34,pt,1,0,"ng-template",null,37,t.W1O),t.qZA()),2&S){const g=D.index,f=t.MAs(35),x=t.oxw().ngIf,z=t.oxw();let st,dt,ft,Et,ht;t.Q6J("formGroupName",g),t.xp6(4),t.Q6J("maxLength",41),t.xp6(1),t.Q6J("ngIf",null==(st=z.sdat_certs.at(g))?null:st.get("sport_name").invalid),t.xp6(11),t.Q6J("ngIf",null==(dt=z.sdat_certs.at(g))?null:dt.get("sport_type").invalid),t.xp6(5),t.Q6J("ngForOf",x),t.xp6(3),t.Q6J("ngIf",null==(ft=z.sdat_certs.at(g))?null:ft.get("winning_position").invalid),t.xp6(5),t.Q6J("ngIf",null==(Et=z.sdat_certs.at(g))?null:Et.get("sdat_cert_no").invalid),t.xp6(2),t.Q6J("ngIf",null==z.sdat_certs.controls[g].get("display_name").value),t.xp6(1),t.Q6J("ngIf",null==z.sdat_certs.controls[g]||null==(ht=z.sdat_certs.controls[g].get("storage_name"))?null:ht.value),t.xp6(1),t.Q6J("ngIf",g>0)("ngIfElse",f)}}function mt(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"div",56)(1,"button",42),t.NdJ("click",function(){t.CHM(g);const x=t.oxw(2);return t.KtG(x.addSdat_certs())}),t.TgZ(2,"mat-icon",43),t._uU(3,"add"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Winning Details"),t.qZA()()()}if(2&S){const g=t.oxw(2);t.Q6J("matTooltipDisabled",g.sdat_certs.valid),t.xp6(1),t.Q6J("disabled",g.sdat_certs.invalid)}}function L(S,D){if(1&S&&(t.ynx(0),t.TgZ(1,"div",44)(2,"div",45),t.YNc(3,tt,36,11,"div",32),t.qZA(),t.YNc(4,mt,6,2,"div",46),t.qZA(),t.BQk()),2&S){const g=t.oxw();t.xp6(3),t.Q6J("ngForOf",g.sdat_certs.controls),t.xp6(1),t.Q6J("ngIf",g.sdat_certs.length<3)}}function X(S,D){if(1&S){const g=t.EpF();t.TgZ(0,"mat-card-actions",57)(1,"button",58),t._uU(2,"Reset"),t.qZA(),t.TgZ(3,"div",59)(4,"button",60),t.NdJ("click",function(){t.CHM(g);const x=t.oxw();return t.KtG(x.saveClaimDetails())}),t._uU(5," Save "),t.qZA()()()}if(2&S){const g=t.oxw();t.xp6(3),t.Q6J("matTooltipDisabled",g.schemeForm.valid),t.xp6(1),t.Q6J("disabled",g.loading||g.schemeForm.invalid)}}let et=(()=>{class S{constructor(g,f,x,z,st,dt){this.dialog=g,this.fb=f,this.router=x,this.err=z,this.uploadService=st,this.m_list=dt,this.loading=!1,this.mark_list_details=[],this.sdat_certs_details=[],this.claimEvent=new t.vpe,this.isRemarks=!1,this.schemeForm=this.fb.group({dp_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z .@]+$")]],dp_relationship:[null,a.kI.required],dp_gender:[null,a.kI.required],curr_class_studied:[null,a.kI.required],inst_name:[null,[a.kI.required,a.kI.pattern("^[A-Za-z ]+$")]],inst_contact_no:[null,[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],inst_address:[null,[a.kI.required,a.kI.pattern("^[A-Za-z0-9 @.,-/\\n]+$")]],dp_aadhaar:[null,[a.kI.pattern("^[0-9]{12}$")]],dp_aadhaar_file:[null,[a.kI.required]],bonafide_cert_no:[null,[a.kI.required,a.kI.pattern("^\\w+$")]],mark_lists:this.fb.array([]),sdat_certs:this.fb.array([])}),this.dataService=(0,t.f3M)(e.D),this.wpd=[],this.winningPosition$=this.dataService.getWinningPositions({}).pipe((0,_.U)(ft=>ft.rows),(0,V.b)(ft=>{this.wpd=ft})),this.progressInfo=0}get mark_lists(){return this.schemeForm.get("mark_lists")}get sdat_certs(){return this.schemeForm.get("sdat_certs")}get dp_relationship(){return this.schemeForm.get("dp_relationship")}get curr_class_studied(){return this.schemeForm.get("curr_class_studied")}ngOnInit(){this.m_list.schemeForm=this.schemeForm,this.claimCode=localStorage.getItem("claimCode"),this.getRelationships(),this.getEducations(),this.getGenders(),0==this.sdat_certs_details.length&&this.addSdat_certs()}get winningPosition(){let g=[];for(let f=0;f<this.sdat_certs.length;f++)g.push(this.sdat_certs.at(f).get("winning_position").value);return Math.min(...g)}draftClaimForm(){this.claim_details.dp_aadhaar&&(this.getAadhaarAttachments(),this.schemeForm.get("dp_aadhaar_file").clearValidators(),this.schemeForm.get("dp_aadhaar_file").updateValueAndValidity({onlySelf:!0,emitEvent:!0})),this.schemeForm.patchValue({dp_name:this.claim_details.dp_name,dp_relationship:this.claim_details.dp_relationship,dp_gender:this.claim_details.dp_gender,curr_class_studied:this.claim_details.curr_class_studied,inst_name:this.claim_details.inst_name,inst_contact_no:this.claim_details.inst_contact_no,inst_address:this.claim_details.inst_address,dp_aadhaar:this.claim_details.dp_aadhaar,bonafide_cert_no:this.claim_details.bonafide_cert_no}),this.m_list.schemeForm=this.schemeForm}addMarkList(){this.mark_lists.push(this.fb.group({m_list_id:[null],mark_list_no:[null,[a.kI.required,a.kI.pattern("[0-9A-Za-z]{16}")]],attachment_id:[null],display_name:[null,[a.kI.required]],storage_name:[null],mark_list_file:[null,[a.kI.required]]}))}addSdat_certs(){this.sdat_certs.push(this.fb.group({cert_id:[null],sport_name:[null,[a.kI.required,a.kI.pattern("[A-Za-z .]*"),a.kI.maxLength(40)]],sport_type:[null,[a.kI.required]],winning_position:[null,[a.kI.required]],display_name:[null,[a.kI.required]],sdat_cert_no:[null,[a.kI.required,a.kI.pattern("\\w{16}")]],attachment_id:[null],storage_name:[null],sdat_cert_file:[null,[a.kI.required]]}))}ngOnChanges(g){this.claim_details&&(this.draftClaimForm(),this.getSdatCerts(),"11"==this.claim_details.curr_class_studied||"12"==this.claim_details.curr_class_studied?(this.mark_lists.enable(),this.getMarkLists()):this.mark_lists.disable(),"CLI"==this.claim_details?.status&&0==this.isRemarks&&(this.schemeForm.disable(),this.schemeForm.updateValueAndValidity()))}onMarkListSelected(g,f,x){this.uploadService.onFileSelected(g,f,this.firm,this.claim_details,this.schemeForm,x)}getSdatCerts(){const g=Object.assign({});g.firm_id=this.firm.id,g.applicable_to="C",g.scheme_code=this.claimCode||this.claim_details?.scheme_code,g.claim_id=this.claim_details?.id,this.dataService.getSdatCerts(g).subscribe(f=>{if(this.sdat_certs_details=f.rows,0!=this.sdat_certs_details.length)for(let x=0;x<Object?.keys(this.sdat_certs_details)?.length;x++)this.sdat_certs.at(x)?.get("cert_id")?.setValue(this.sdat_certs_details[x].id),this.sdat_certs.at(x)?.get("sport_name")?.setValue(this.sdat_certs_details[x].sport_name),this.sdat_certs.at(x)?.get("sport_type")?.setValue(this.sdat_certs_details[x].sport_type),this.sdat_certs.at(x)?.get("winning_position")?.setValue(this.sdat_certs_details[x].winning_position),this.sdat_certs.at(x)?.get("display_name")?.setValue(this.sdat_certs_details[x].file_name),this.sdat_certs.at(x)?.get("sdat_cert_no")?.setValue(this.sdat_certs_details[x].sdat_cert_no),this.sdat_certs.at(x)?.get("storage_name")?.setValue(this.sdat_certs_details[x].storage_name),this.sdat_certs.at(x)?.get("attachment_id")?.setValue(this.sdat_certs_details[x].attachment_id),this.sdat_certs.at(x)?.get("sdat_cert_file").clearValidators(),this.sdat_certs.at(x)?.get("sdat_cert_file").updateValueAndValidity(),x<this.sdat_certs_details.length-1&&this.addSdat_certs()})}onSdatCertSelected(g,f){this.loading=!0;const x=g.target.files;let st,z=new FormData;if(x.length>0){if(st=x[0],"application/pdf"!=st.type)return void alert("Only Pdf Files are Allowed !");if(!(st.size/1048576<=1))return void alert("File Size Not More Than 1MB");z.append("thumbnail",st),z.append("file",st,st.name),z.append("id","2"),z.append("tz",(new Date).toISOString())}this.claim_details.id?this.dataService.Upload(z).subscribe(dt=>{try{if(dt.type===s.dt.UploadProgress&&(this.progressInfo=Math.round(100*dt.loaded/dt.total)),dt.type==s.dt.Response){const ft=Object.assign({});ft.firm_id=this.firm.id,ft.claim_id=this.claim_details?.id,ft.doc_type="SDAT_CERT",ft.file_name=st.name,ft.file_type=st.type,ft.file_size=Number((st.size/1024).toFixed(0)),ft.storage_name=dt.body.file_name,this.dataService.saveClaimAttachments(ft).subscribe(Et=>{if("Attachment saved successfully."==Et.message){let ht=this.schemeForm.get("sdat_certs");ht.controls[f].get("attachment_id").setValue(Et.rows[0].id),ht.controls[f].get("display_name").setValue(st.name),ht.controls[f].get("storage_name").setValue(dt.body.file_name)}})}}catch{alert("Please try again.")}}):alert("Document Uploading required claim id."),this.loading=!1}documentUpload(g){this.loading=!0;const f=g.target.files;let z,x=new FormData;if(f.length>0){if(z=f[0],this.aadhaarFileName=z.name,"application/pdf"!=z.type)return void alert("Only Pdf Files are Allowed !");if(!(z.size/1048576<=1))return void alert("File size should not be more than 1MB");x.append("thumbnail",z),x.append("file",z,z.name),x.append("id","2"),x.append("tz",(new Date).toISOString())}this.claim_details.id?this.dataService.Upload(x).subscribe(st=>{try{if(st.type===s.dt.UploadProgress&&(this.progressInfo=Math.round(100*st.loaded/st.total)),st.type==s.dt.Response){const dt=Object.assign({});dt.firm_id=this.firm.id,dt.claim_id=this.claim_details?.id,dt.doc_type="D_AADHAAR",dt.file_name=z.name,dt.file_type=z.type,dt.file_size=Number((z.size/1024).toFixed(0)),dt.storage_name=st.body.file_name,this.dataService.saveClaimAttachments(dt).subscribe(ft=>{"Attachment saved successfully."==ft.message&&this.getAadhaarAttachments()})}}catch{alert("Please try again."),this.ngOnInit()}}):alert("Document Uploading required claim id."),this.loading=!1}getAadhaarAttachments(){const g=Object.assign({});g.firm_id=this.firm?.id|this.claim_details.firm_id,g.applicable_to="C",g.scheme_code=this.claimCode||this.claim_details?.scheme_code,g.claim_id=this.claim_details?.id,g.attachment_code="D_AADHAAR",this.dataService.getTypesAttachments(g).subscribe(f=>{this.dataSource=f.rows.find(x=>"D_AADHAAR"===x.code),this.aadhaarFileName=this.dataSource?.file_name})}getMarkLists(){this.addMarkList(),this.dataService.getMarkLists({claim_id:this.claim_details?.id}).subscribe(g=>{if(this.mark_list_details=g.rows,0!=this.mark_list_details.length)for(let f=0;f<Object?.keys(this.mark_list_details)?.length;f++)this.mark_lists.at(f)?.get("m_list_id")?.setValue(this.mark_list_details[f]?.id),this.mark_lists.at(f)?.get("mark_list_no")?.setValue(this.mark_list_details[f]?.mark_list_no),this.mark_lists.at(f)?.get("attachment_id")?.setValue(this.mark_list_details[f]?.attachment_id),this.mark_lists.at(f)?.get("display_name")?.setValue(this.mark_list_details[f]?.file_name),this.mark_lists.at(f)?.get("storage_name")?.setValue(this.mark_list_details[f]?.storage_name),this.mark_lists.at(f)?.get("mark_list_file")?.clearValidators(),this.mark_lists.at(f)?.get("mark_list_file")?.updateValueAndValidity(),f<Object?.keys(this.mark_list_details)?.length-1&&this.addMarkList()})}getRelationships(){this.dataService.getRelationships({allowed_schemes:this.claimCode}).subscribe(g=>{this.dp_relationships=g.rows})}getEducations(){this.dataService.getEducations({allowed_schemes:this.claimCode}).subscribe(g=>{this.classStudied=g.rows})}getGenders(){this.dataService.getGenders({allowed_schemes:this.claimCode}).subscribe(g=>{this.genders=g.rows})}classChange(g){g.value>8?(this.schemeForm.get("dp_aadhaar_file").addValidators(a.kI.required),this.schemeForm.get("dp_aadhaar_file").updateValueAndValidity(),this.schemeForm.get("dp_aadhaar").addValidators(a.kI.required),this.schemeForm.get("dp_aadhaar").updateValueAndValidity()):(this.schemeForm.get("dp_aadhaar_file").removeValidators(a.kI.required),this.schemeForm.get("dp_aadhaar_file").updateValueAndValidity(),this.schemeForm.get("dp_aadhaar").removeValidators(a.kI.required),this.schemeForm.get("dp_aadhaar").updateValueAndValidity()),"11"==g.value||"12"==g.value?(0==this.mark_lists.length&&this.addMarkList(),this.mark_lists.enable()):this.mark_lists.disable()}deleteMark_lists(g,f,x){let z={attachment_id:f,storage_name:x};z.attachment_id&&z.storage_name?this.dataService.deleteAttachmentDoc(z).subscribe(st=>{"Deleted successfully."==st.message&&this.mark_lists.removeAt(g)}):this.mark_lists.removeAt(g)}deleteSdat_certs(g,f,x){let z={attachment_id:f,storage_name:x,cert_id:this.sdat_certs.controls[g].get("cert_id").value};z.attachment_id&&z.storage_name?this.dataService.deleteSdatCerts(z).subscribe(st=>{"SDAT certificate details are deleted successfully!"==st.message&&(this.sdat_certs.removeAt(g),alert("SDAT certificate details are deleted successfully!"))}):this.sdat_certs.removeAt(g)}deleteAadhaarAttachmentDoc(g){this.dataService.deleteAttachmentDoc(g).subscribe(f=>{"Deleted successfully."==f.message&&this.getAadhaarAttachments()})}saveClaimDetails(){let g="D"==this.claim_details.status?"D":"CLI";const f={sdat_cert_details:Object.assign({},this.schemeForm.get("sdat_certs").value),scheme_code:this.claimCode,claim_id:this.claim_id|this.claim_details.id,winning_position:this.winningPosition.toString()};this.dataService.saveSdatCertDetails(f).subscribe(x=>{if("Certificate Details are Saved Successfully"==x.message){let z;if("DIST_SA"==this.claimCode)for(const st in this.classStudied)this.classStudied[st].code==this.schemeForm.get("curr_class_studied").value&&(z=this.classStudied[st].scheme_amt);else if("STATE_SA"==this.claimCode)for(const st in this.wpd)this.wpd[st].winning_position==this.winningPosition&&(z=this.wpd[st].scheme_amt);this.save(g,z)}else alert("Sorry! Can not save sdat certificate details.")})}save(g,f){if(this.m_list.duplicateMarkList(this.mark_lists),"S"==g)return this.router.navigate(["/apps/my-claims"]);{this.loading=!0;let x=Object.assign({},this.schemeForm.value);return x.user_id=this.dataService.curr_user$.value.id,x.firm_id=this.firm.id,x.scheme_code=this.claimCode,x.status=g,x.claim_id=this.claim_id,x.claim_amount=f,this.claim_details&&(this.claim_details.dp_name=x.dp_name,this.claim_details.dp_relationship=x.dp_relationship,this.claim_details.dp_gender=x.dp_gender,this.claim_details.curr_class_studied=x.curr_class_studied,this.claim_details.inst_name=x.inst_name,this.claim_details.inst_contact_no=x.inst_contact_no,this.claim_details.inst_address=x.inst_address,this.claim_details.dp_aadhaar=x.dp_aadhaar,this.claim_details.bonafide_cert_no=x.bonafide_cert_no,this.claim_details.status=x.status,this.claim_details.claim_amount=x.claim_amount,this.claim_details.mark_lists=x.mark_lists),this.dataService.saveClaimDetails(this.claim_details?this.claim_details:x).subscribe(z=>{"Claim Details are Saved Successfully."==z.message||"Claim Details are Updated Successfully."==z.message?(this.claim_id=z.id,this.claimEvent.emit(this.claim_id)):alert("Claim details are not saved successfully."),this.loading=!1})}}}return S.\u0275fac=function(g){return new(g||S)(t.Y36(W.uw),t.Y36(a.QS),t.Y36(Y.F0),t.Y36(N.E),t.Y36(l.C),t.Y36(c.N))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-sports-scholarship"]],inputs:{claim_details:"claim_details",firm:"firm",isRemarks:"isRemarks"},outputs:{claimEvent:"claimEvent"},features:[t.TTD],decls:76,vars:14,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","50"],["formControlName","dp_name","matInput","","maxlength","45","placeholder","Name of the Student"],["matSuffix",""],[4,"ngIf"],["formControlName","dp_relationship"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dp_gender"],[4,"ngFor","ngForOf"],["appearance","outline","fxFlex","50"],["formControlName","curr_class_studied",3,"selectionChange"],["formControlName","inst_name","matInput","","maxlength","45","placeholder","Name of the Institution"],["formControlName","inst_contact_no","matInput","","maxlength","10","placeholder","Contact No. of the School"],["fxFlexFill",""],["formControlName","inst_address","matInput","","maxlength","500","placeholder","Address of the School"],["fxFill",""],["formControlName","bonafide_cert_no","matInput","","maxlength","16","placeholder","Enter the Bona-fide Certificate No."],["fxFlex","75"],["formControlName","dp_aadhaar","matInput","","maxlength","12","placeholder","Enter the Aadhaar No. of Student"],["fxFlex","25"],["align","end","fxLayout","row","fxLayoutGap","20px",4,"ngIf"],[3,"innerHTML"],[3,"value"],["color","primary","mat-mini-fab","","type","button",3,"click"],["formControlName","dp_aadhaar_file","type","file",2,"display","none",3,"change"],["fileInput",""],["mat-mini-fab","",3,"click"],["aria-label","Example icon button with a delete icon","color","warn","mat-mini-fab","",3,"click"],["fxLayout","row","fxLayoutGap","15px",2,"margin-bottom","10px","border","2px solid lightgrey","border-radius","10px","padding","4px"],["formArrayName","mark_lists","fxFlex","100"],["fxLayoutGap","10px",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","10",4,"ngIf"],["fxLayoutGap","10px",3,"formGroupName"],["formControlName","mark_list_no","matInput","","maxlength","16","placeholder","Enter Mark list No."],["fxFlex","5",4,"ngIf","ngIfElse"],["empty",""],["accept",".pdf","formControlName","mark_list_file","type","file",2,"display","none",3,"change"],["fxFlex","5"],["aria-label","Example icon button with a delete icon","color","warn","mat-fab","",3,"click"],["fxFlex","10"],["color","primary","mat-raised-button","",3,"disabled","click"],["aria-hidden","false","aria-label","Home"],["fxLayout","row","fxLayout.sm","column","fxLayout.xs","column","fxLayoutGap","15px",2,"border","2px solid lightgrey","border-radius","10px","padding","4px"],["formArrayName","sdat_certs","fxFlex","90"],["fxFlex","10","matTooltip","Fill the Sport Details.",3,"matTooltipDisabled",4,"ngIf"],["fxFlex","20"],["formControlName","sport_name","matInput","","placeholder","E.g.Athlete.",3,"maxLength"],["formControlName","sport_type"],["value","I"],["value","T"],["formControlName","winning_position"],["formControlName","sdat_cert_no","matInput","","maxlength","16","placeholder","E.g.SDFASDF651654"],["fxFlex","25","fxLayoutGap","10px"],["accept",".pdf","formControlName","sdat_cert_file","type","file",2,"display","none",3,"change"],["fxFlex","10","matTooltip","Fill the Sport Details.",3,"matTooltipDisabled"],["align","end","fxLayout","row","fxLayoutGap","20px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","matStepperNext","","type","button",3,"disabled","click"]],template:function(g,f){if(1&g&&(t.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Name of the Student"),t.qZA(),t._UZ(6,"input",4),t.TgZ(7,"mat-icon",5),t._uU(8,"person"),t.qZA(),t.YNc(9,T,2,1,"mat-error",6),t.qZA(),t.TgZ(10,"mat-form-field",3)(11,"mat-select",7)(12,"mat-option"),t._uU(13,"*None*"),t.qZA(),t.YNc(14,O,2,2,"mat-option",8),t.qZA(),t.TgZ(15,"mat-label"),t._uU(16," Relationship to the Employee "),t.qZA()()(),t.TgZ(17,"div",2)(18,"mat-form-field",3)(19,"mat-select",9)(20,"mat-option"),t._uU(21,"*none*"),t.qZA(),t.YNc(22,A,3,2,"div",10),t.qZA(),t.TgZ(23,"mat-label"),t._uU(24," Gender "),t.qZA()(),t.TgZ(25,"mat-form-field",11)(26,"mat-select",12),t.NdJ("selectionChange",function(z){return f.classChange(z)}),t.TgZ(27,"mat-option"),t._uU(28,"*None*"),t.qZA(),t.YNc(29,E,2,2,"mat-option",8),t.qZA(),t.TgZ(30,"mat-label")(31,"b"),t._uU(32,"Class/Course Studying during the current academic year."),t.qZA()()()(),t.TgZ(33,"div",2)(34,"mat-form-field",3)(35,"mat-label"),t._uU(36,"Name of the School"),t.qZA(),t._UZ(37,"input",13),t.TgZ(38,"mat-icon",5),t._uU(39,"school"),t.qZA()(),t.TgZ(40,"mat-form-field",3)(41,"mat-label"),t._uU(42,"Contact No. of the School"),t.qZA(),t._UZ(43,"input",14),t.TgZ(44,"mat-icon",5),t._uU(45,"phone"),t.qZA()()(),t.TgZ(46,"div",2)(47,"mat-form-field",15)(48,"mat-label"),t._uU(49,"Address of the School"),t.qZA(),t.TgZ(50,"textarea",16),t._uU(51,"        "),t.qZA()()(),t.TgZ(52,"div",2)(53,"mat-form-field",17)(54,"mat-label"),t._uU(55,"Enter the Bona-fide Certificate No."),t.qZA(),t._UZ(56,"input",18),t.YNc(57,h,2,1,"mat-error",6),t.qZA()(),t.TgZ(58,"div",2)(59,"mat-form-field",19)(60,"mat-label"),t._uU(61,"Enter the Aadhaar No. of Student."),t.qZA(),t._UZ(62,"input",20),t.TgZ(63,"mat-hint"),t._uU(64,"Note: Aadhaar Card is Optional for up to "),t.TgZ(65,"b"),t._uU(66,"VIII"),t.qZA(),t._uU(67," standard. "),t.qZA(),t.YNc(68,b,2,1,"mat-error",6),t.qZA(),t.TgZ(69,"div",21),t.YNc(70,r,7,1,"div",6),t.YNc(71,p,8,1,"ng-container",6),t.qZA()(),t.YNc(72,ut,5,2,"ng-container",6),t.YNc(73,L,5,2,"ng-container",6),t.ALo(74,"async"),t.YNc(75,X,6,2,"mat-card-actions",22),t.qZA()()),2&g){let x,z,st;t.xp6(1),t.Q6J("formGroup",f.schemeForm),t.xp6(8),t.Q6J("ngIf",null==(x=f.schemeForm.get("dp_name"))?null:x.invalid),t.xp6(5),t.Q6J("ngForOf",f.dp_relationships),t.xp6(8),t.Q6J("ngForOf",f.genders),t.xp6(7),t.Q6J("ngForOf",f.classStudied),t.xp6(28),t.Q6J("ngIf",null==(z=f.schemeForm.get("bonafide_cert_no"))?null:z.invalid),t.xp6(11),t.Q6J("ngIf",null==(st=f.schemeForm.get("dp_aadhaar"))?null:st.invalid),t.xp6(2),t.Q6J("ngIf",!(null!=f.dataSource&&f.dataSource.storage_name)),t.xp6(1),t.Q6J("ngIf",f.aadhaarFileName),t.xp6(1),t.Q6J("ngIf","11"==(null==f.curr_class_studied?null:f.curr_class_studied.value)||"12"==(null==f.curr_class_studied?null:f.curr_class_studied.value)||"ITI"==(null==f.curr_class_studied?null:f.curr_class_studied.value)||"Diploma"==(null==f.curr_class_studied?null:f.curr_class_studied.value)||"UG"==(null==f.curr_class_studied?null:f.curr_class_studied.value)||"PG"==(null==f.curr_class_studied?null:f.curr_class_studied.value)),t.xp6(1),t.Q6J("ngIf",t.lcZ(74,12,f.winningPosition$)),t.xp6(2),t.Q6J("ngIf","CLI"==(null==f.claim_details?null:f.claim_details.status)&&1==f.isRemarks||"CLI"!=(null==f.claim_details?null:f.claim_details.status))}},dependencies:[U.sg,U.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,a.x0,a.CE,B.ey,R.lW,w.a8,w.hq,P.TO,P.KE,P.bx,P.hX,P.R9,I.Hw,M.Nt,K.gD,Z.Ic,k.gM,y.xw,y.SQ,y.s9,y.yH,U.Ov]}),S})()},6074:(lt,$,i)=>{"use strict";i.d($,{t:()=>R});var t=i(3329),a=i(9211),e=i(4321),s=i(3097),_=i(3089),V=i(7804),W=i(8977),Y=i(7333),N=i(9741),l=i(9059),c=i(7495),U=i(4014);function B(w,P){1&w&&(s.TgZ(0,"div",14),s._UZ(1,"mat-spinner",15),s.qZA())}let R=(()=>{class w{constructor(I,M,K){this.ds=I,this.data=M,this.dialogRef=K}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm_ests=this.data.firm_ests,this.formInitialize(),"add"!=this.data.action&&(this.tneb_bill=this.data.tneb_bill,this.formExisting())}formInitialize(){this.eb_det=new a.nJ({tneb_no:new a.p4(null),remarks:new a.p4(null),tneb_doc:new a.p4(null)})}formExisting(){this.eb_det=new a.nJ({tneb_no:new a.p4(this.tneb_bill.tneb_no),remarks:new a.p4(this.tneb_bill.remarks),tneb_doc:new a.p4(this.tneb_bill.file_name)})}onFileSelected(I){const M=I.target.files;if(M.length>0){const K=M[0];if("application/pdf"!=K.type)return void alert("Only Pdf Files are Allowed !");if(this.file=M[0],this.filename=K.name,!(K.size/1048576<=1))return void alert("File size should not be more than 1MB");{let Z=new FormData;Z.append("file",K,K.name),Z.append("id","2"),Z.append("tz",(new Date).toISOString()),Z.append("update","2"),this.file_data=Z}}}upload(){this.loading=!0,this.ds.Upload(this.file_data).subscribe(I=>{if(I.type===t.dt.UploadProgress&&(this.progressInfo=Math.round(100*I.loaded/I.total)),I.type==t.dt.Response){const M=Object.assign({},I.body);this.addTnebBillEst(M.file_name)}},I=>{alert("Please try again."),this.ngOnInit()})}cancel(){this.dialogRef.close()}addTnebBillEst(I){const M=Object.assign({},this.eb_det.value);M.user_id=this.user.id,M.user_email=this.user.email,M.firm_id=this.firm_ests.id,M.doc_type=this.data.type,M.file_name=this.file.name,M.file_type=this.file.type,M.storage_name=I,M.file_size=Number((this.file.size/1024).toFixed(0)),this.ds.addTnebBillEst(M).subscribe(K=>{("TNEB Bill saved successfully."==K.message||"TNEB Bill update successfully."==K.message)&&(this.loading=!1,this.dialogRef.close(K))})}}return w.\u0275fac=function(I){return new(I||w)(s.Y36(_.D),s.Y36(e.WI),s.Y36(e.so))},w.\u0275cmp=s.Xpm({type:w,selectors:[["app-add-tneb-bill"]],decls:29,vars:4,consts:[["mat-dialog-title","",1,"mb-4"],[3,"formGroup"],["fxLayout","column"],["fxFlex","","fxLayout","row","fxLayoutGap","20px"],["fxFlex",""],["type","text","required","","matInput","","formControlName","tneb_no","pattern","^\\w{16}$","maxlength","16"],["type","text","matInput","","formControlName","remarks"],["color","primary","mat-mini-fab","","type","button",3,"click"],["type","file","required","","accept","application/pdf","formControlName","tneb_doc",2,"display","none",3,"change"],["fileInput",""],["align","end"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["mat-raised-button","","color","warn","tabindex","-1",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","row","fxLayoutAlign","center center"],["diameter","40"]],template:function(I,M){if(1&I){const K=s.EpF();s.TgZ(0,"div",0)(1,"b"),s._uU(2,"Documents"),s.qZA()(),s.TgZ(3,"mat-dialog-content")(4,"form",1)(5,"div",2)(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),s._uU(9,"Electricity Board's Bills Number"),s.qZA(),s._UZ(10,"input",5),s.qZA()(),s.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),s._uU(14,"Remarks"),s.qZA(),s._UZ(15,"input",6),s.qZA()(),s.TgZ(16,"div",4),s._uU(17),s.TgZ(18,"button",7),s.NdJ("click",function(){s.CHM(K);const k=s.MAs(22);return s.KtG(k.click())}),s.TgZ(19,"mat-icon"),s._uU(20,"attach_file"),s.qZA(),s.TgZ(21,"input",8,9),s.NdJ("change",function(k){return M.onFileSelected(k)}),s.qZA()()()()()(),s.TgZ(23,"mat-dialog-actions",10),s.YNc(24,B,2,0,"div",11),s.TgZ(25,"button",12),s.NdJ("click",function(){return M.cancel()}),s._uU(26,"Cancel"),s.qZA(),s.TgZ(27,"button",13),s.NdJ("click",function(){return M.upload()}),s._uU(28,"Save"),s.qZA()()}2&I&&(s.xp6(4),s.Q6J("formGroup",M.eb_det),s.xp6(13),s.hij(" ","Enclose the TNEB bill in .pdf format"," "),s.xp6(7),s.Q6J("ngIf",M.loading),s.xp6(3),s.Q6J("disabled",M.loading||M.eb_det.invalid))},dependencies:[V.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.c5,a.sg,a.u,W.lW,e.uh,e.xY,e.H8,Y.KE,Y.hX,N.Hw,l.Nt,c.Ou,U.xw,U.SQ,U.Wh,U.yH],encapsulation:2}),w})()},3220:(lt,$,i)=>{"use strict";i.d($,{G:()=>Z});var t=i(4321),a=i(9211),e=i(3097),s=i(3089),_=i(7804),V=i(8521),W=i(8977),Y=i(1477),N=i(7333),l=i(9059),c=i(7018),U=i(4014);function B(k,y){1&k&&(e.TgZ(0,"mat-error")(1,"sup"),e._uU(2,"*"),e.qZA(),e._uU(3,"Payment Receipt is Mandatory. "),e.qZA())}function R(k,y){1&k&&(e.TgZ(0,"mat-error")(1,"sup"),e._uU(2,"*"),e.qZA(),e._uU(3,"Receipt date is Mandatory. "),e.qZA())}function w(k,y){1&k&&(e.TgZ(0,"mat-error")(1,"sup"),e._uU(2,"*"),e.qZA(),e._uU(3,"Amount Paid is Mandatory. "),e.qZA())}function P(k,y){if(1&k&&(e.TgZ(0,"div")(1,"mat-option",16),e._uU(2),e.qZA()()),2&k){const T=y.$implicit;e.xp6(1),e.Q6J("value",T.code),e.xp6(1),e.Oqu(T.name)}}function I(k,y){if(1&k&&(e.TgZ(0,"mat-error")(1,"sup"),e._uU(2,"*"),e.qZA(),e._uU(3),e.qZA()),2&k){const T=e.oxw(2);e.xp6(3),e.hij("Please Enter the ","CHQ"==T.payTypeValue?"Cheque":"DD"," No. ")}}function M(k,y){1&k&&(e.TgZ(0,"mat-error"),e._uU(1," mobile number is already exist "),e.qZA())}function K(k,y){if(1&k){const T=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",1)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"input",17),e.NdJ("change",function(A){e.CHM(T);const E=e.oxw();return e.KtG(E.chqCheckReceipt(A.target))}),e.qZA(),e.YNc(5,I,4,1,"mat-error",3),e.YNc(6,M,2,0,"mat-error",3),e.qZA()()}if(2&k){const T=e.oxw();e.xp6(3),e.hij("Enter the ","CHQ"==T.payTypeValue?"Cheque":"DD"," No."),e.xp6(1),e.MGl("placeholder","Enter the ","CHQ"==T.payTypeValue?"Cheque":"DD","  No."),e.xp6(1),e.Q6J("ngIf",T.fg.get("chq_dd_no").hasError("required")),e.xp6(1),e.Q6J("ngIf",T.fg.get("chq_dd_no").errors&&T.fg.get("chq_dd_no").hasError("already"))}}let Z=(()=>{class k{constructor(T,O,A,E){this.ds=T,this.fb=O,this.dialogRef=A,this.data=E,this.payTypeValue="",this.paymentType=[{code:"CHQ",name:"Cheque"},{code:"DD",name:"Demand Draft"},{code:null,name:"none"}],this.fg=this.fb.group({receipt_no:[null,[a.kI.pattern("[A-Za-z0-9 /-]*"),a.kI.required,a.kI.maxLength(30),a.kI.minLength(3)]],receiptAmount:[null,[a.kI.pattern("[0-9]*"),a.kI.minLength(1),a.kI.maxLength(20)]],paymentType:[null],receipt_dt:[null,[a.kI.required]],chq_dd_no:[null,[a.kI.pattern("[A-Za-z0-9 /-]*"),a.kI.required,a.kI.maxLength(30)]]})}ngOnInit(){this.user=this.ds.curr_user$.value,this.firm=this.ds.curr_firm_est$.value,this.fg.get("chq_dd_no").disable()}paymentTypeMtd(T){this.payTypeValue=T.value,this.fg.get("paymentType").value?this.fg.get("chq_dd_no").enable():this.fg.get("chq_dd_no").disable()}chqCheckReceipt(T){}cancel(){this.dialogRef.close()}saveDdChqReceiptEst(){if(this.data.tt_amt==this.fg.get("receiptAmount").value){const T=Object.assign({},this.fg.value);T.user_id=this.user.id,T.id=this.firm.id,T.selected_payments=this.data,this.ds.saveAlreadyPaid(T).subscribe(O=>{"Payment Details are saved successfully"==O.message&&this.dialogRef.close()})}else alert("Please check the Total Employee Count or Total Amount per year is Correct before submitting the already paid details."),this.dialogRef.close()}}return k.\u0275fac=function(T){return new(T||k)(e.Y36(s.D),e.Y36(a.qu),e.Y36(t.so),e.Y36(t.WI))},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-already-paid"]],decls:32,vars:9,consts:[["fxLayout","column",3,"formGroup"],["fxFlex","",1,"example-full-width"],["formControlName","receipt_no","matInput","","min","0","placeholder","E.g.RON00987/2020-21","required",""],[4,"ngIf"],["fxLayout","row","fxLayoutGap","10px"],["fxFlex","50"],["formControlName","receipt_dt","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","receiptAmount","matInput","","min","0","placeholder","E.g.2000","required","","type","number"],["formControlName","paymentType",3,"selectionChange"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","10px",4,"ngIf"],["align","end"],["color","warn","mat-raised-button","","tabindex","-1",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"],["formControlName","chq_dd_no","matInput","","type","text",3,"placeholder","change"]],template:function(T,O){if(1&T&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Payment Receipt No."),e.qZA(),e._UZ(5,"input",2),e.YNc(6,B,4,0,"mat-error",3),e.qZA(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Receipt date"),e.qZA(),e._UZ(11,"input",6)(12,"mat-datepicker-toggle",7)(13,"mat-datepicker",null,8),e.YNc(15,R,4,0,"mat-error",3),e.qZA(),e.TgZ(16,"mat-form-field",5)(17,"mat-label"),e._uU(18,"Amount Paid"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,w,4,0,"mat-error",3),e.qZA()(),e.TgZ(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Payment Type"),e.qZA(),e.TgZ(24,"mat-select",10),e.NdJ("selectionChange",function(E){return O.paymentTypeMtd(E)}),e.YNc(25,P,3,2,"div",11),e.qZA()(),e.YNc(26,K,7,4,"div",12),e.qZA(),e.TgZ(27,"mat-dialog-actions",13)(28,"button",14),e.NdJ("click",function(){return O.cancel()}),e._uU(29,"Cancel"),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){return O.saveDdChqReceiptEst()}),e._uU(31,"Save"),e.qZA()()()),2&T){const A=e.MAs(14);e.xp6(1),e.Q6J("formGroup",O.fg),e.xp6(5),e.Q6J("ngIf",O.fg.get("receipt_no").hasError("required")),e.xp6(5),e.Q6J("matDatepicker",A),e.xp6(1),e.Q6J("for",A),e.xp6(3),e.Q6J("ngIf",O.fg.get("receipt_dt").hasError("required")),e.xp6(5),e.Q6J("ngIf",O.fg.get("receiptAmount").hasError("required")),e.xp6(5),e.Q6J("ngForOf",O.paymentType),e.xp6(1),e.Q6J("ngIf",O.fg.get("paymentType").value),e.xp6(4),e.Q6J("disabled",null==O.fg?null:O.fg.invalid)}},dependencies:[_.sg,_.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.qQ,a.sg,a.u,V.ey,W.lW,Y.Mq,Y.hl,Y.nW,t.xY,t.H8,N.TO,N.KE,N.hX,N.R9,l.Nt,c.gD,U.xw,U.SQ,U.yH]}),k})()},2579:(lt,$,i)=>{"use strict";i.d($,{C:()=>m});var t=i(9211),a=i(4321),e=i(1176),s=i(7598),_=i(2520),V=i(4104),W=i(677),Y=i(5826),N=i(4795),l=i(3097),c=i(3089),U=i(7804),B=i(8977),R=i(6822),w=i(7333),P=i(9059),I=i(7495),M=i(4014);function K(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," IFSC is "),l.TgZ(2,"b"),l._uU(3,"required"),l.qZA()())}function Z(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," IFSC should not exceed "),l.TgZ(2,"b"),l._uU(3,"20 characters"),l.qZA()())}function k(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," IFSC "),l.TgZ(2,"b"),l._uU(3,"already exist"),l.qZA()())}function y(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Bank Code is "),l.TgZ(2,"b"),l._uU(3,"required"),l.qZA()())}function T(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Bank Code should not exceed "),l.TgZ(2,"b"),l._uU(3,"20 characters"),l.qZA()())}function O(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Bank Name is "),l.TgZ(2,"b"),l._uU(3,"required"),l.qZA()())}function A(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Bank Name should not exceed "),l.TgZ(2,"b"),l._uU(3,"100 characters"),l.qZA()())}function E(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Branch is "),l.TgZ(2,"b"),l._uU(3,"required"),l.qZA()())}function h(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Branch should not exceed "),l.TgZ(2,"b"),l._uU(3,"100 characters"),l.qZA()())}function b(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Address is "),l.TgZ(2,"b"),l._uU(3,"required"),l.qZA()())}function r(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Address should not exceed "),l.TgZ(2,"b"),l._uU(3,"250 characters"),l.qZA()())}function p(u,C){1&u&&(l.TgZ(0,"mat-error"),l._uU(1," Remarks should not exceed "),l.TgZ(2,"b"),l._uU(3,"250 characters"),l.qZA()())}function n(u,C){1&u&&(l.TgZ(0,"div",20),l._UZ(1,"mat-spinner",21),l.qZA())}function o(u,C){if(1&u){const J=l.EpF();l.TgZ(0,"form",1),l.NdJ("ngSubmit",function(){l.CHM(J);const _t=l.oxw();return l.KtG(_t.save())}),l.TgZ(1,"div",2)(2,"b"),l._uU(3,"Bank/Branch"),l.qZA()(),l.TgZ(4,"mat-dialog-content")(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),l._uU(9,"IFSC"),l.qZA(),l._UZ(10,"input",6),l.YNc(11,K,4,0,"mat-error",7),l.YNc(12,Z,4,0,"mat-error",7),l.YNc(13,k,4,0,"mat-error",7),l.qZA(),l.TgZ(14,"div",8)(15,"button",9),l.NdJ("click",function(){l.CHM(J);const _t=l.oxw();return l.KtG(_t.onClickGetDetails())}),l._uU(16," Get Details using RBI API. "),l.qZA()()(),l.TgZ(17,"div",4)(18,"mat-form-field",10)(19,"mat-label"),l._uU(20,"Bank Code"),l.qZA(),l._UZ(21,"input",6),l.YNc(22,y,4,0,"mat-error",7),l.YNc(23,T,4,0,"mat-error",7),l.qZA(),l.TgZ(24,"mat-form-field",8)(25,"mat-label"),l._uU(26,"Bank Name"),l.qZA(),l._UZ(27,"input",11),l.YNc(28,O,4,0,"mat-error",7),l.YNc(29,A,4,0,"mat-error",7),l.qZA()(),l.TgZ(30,"div",4)(31,"mat-form-field",8)(32,"mat-label"),l._uU(33,"Branch"),l.qZA(),l._UZ(34,"input",11),l.YNc(35,E,4,0,"mat-error",7),l.YNc(36,h,4,0,"mat-error",7),l.qZA()(),l.TgZ(37,"div",4)(38,"mat-form-field",8)(39,"mat-label"),l._uU(40,"Address"),l.qZA(),l._UZ(41,"input",12),l.YNc(42,b,4,0,"mat-error",7),l.YNc(43,r,4,0,"mat-error",7),l.qZA()(),l.TgZ(44,"div",13)(45,"section")(46,"mat-checkbox",14),l._uU(47,"Active"),l.qZA()()(),l.TgZ(48,"div",4)(49,"mat-form-field",8)(50,"mat-label"),l._uU(51,"Remarks"),l.qZA(),l._UZ(52,"textarea",15),l.YNc(53,p,4,0,"mat-error",7),l.qZA()()()(),l.TgZ(54,"mat-dialog-actions",16),l.YNc(55,n,2,0,"div",17),l.TgZ(56,"button",18),l.NdJ("click",function(){l.CHM(J);const _t=l.oxw();return l.KtG(_t.cancel())}),l._uU(57,"Cancel"),l.qZA(),l.TgZ(58,"button",19),l._uU(59,"Save"),l.qZA()()()}if(2&u){const J=l.oxw();l.Q6J("formGroup",J.fg),l.xp6(10),l.Q6J("formControl",J.ifsc_fc),l.xp6(1),l.Q6J("ngIf",J.ifsc_fc.hasError("required")),l.xp6(1),l.Q6J("ngIf",J.ifsc_fc.hasError("maxlength")),l.xp6(1),l.Q6J("ngIf",J.ifsc_fc.hasError("isBankBranchCodeExist")),l.xp6(2),l.Q6J("disabled",J.loading||!(null!=J.ifsc_fc&&J.ifsc_fc.value)),l.xp6(6),l.Q6J("formControl",J.bank_code_fc),l.xp6(1),l.Q6J("ngIf",J.bank_code_fc.hasError("required")),l.xp6(1),l.Q6J("ngIf",J.bank_code_fc.hasError("maxlength")),l.xp6(4),l.Q6J("formControl",J.bank_name_fc),l.xp6(1),l.Q6J("ngIf",J.bank_name_fc.hasError("required")),l.xp6(1),l.Q6J("ngIf",J.bank_name_fc.hasError("maxlength")),l.xp6(5),l.Q6J("formControl",J.name_fc),l.xp6(1),l.Q6J("ngIf",J.name_fc.hasError("required")),l.xp6(1),l.Q6J("ngIf",J.name_fc.hasError("maxlength")),l.xp6(5),l.Q6J("formControl",J.address_fc),l.xp6(1),l.Q6J("ngIf",J.address_fc.hasError("required")),l.xp6(1),l.Q6J("ngIf",J.address_fc.hasError("maxlength")),l.xp6(3),l.Q6J("formControl",J.is_active_fc),l.xp6(6),l.Q6J("formControl",J.remarks_fc),l.xp6(1),l.Q6J("ngIf",J.remarks_fc.hasError("maxlength")),l.xp6(2),l.Q6J("ngIf",J.loading),l.xp6(3),l.Q6J("disabled",J.loading)}}let m=(()=>{class u{constructor(J,it,_t){this.dataService=J,this.data=it,this.dialogRef=_t,this.loading=!1,this.isBankBranchCodeExist=ut=>(0,e.H)(500).pipe((0,V.b)(H=>this.loading=!0),(0,W.w)(()=>(0,s.s)(()=>!!ut.value,this.dataService.isBankBranchCodeExist({ifsc:this.data.ifsc}).pipe((0,Y.U)(H=>H?{isBankBranchCodeExist:!0}:null)),(0,_.of)(null))),(0,N.x)(()=>this.loading=!1)),this.bank_code_fc=new t.p4(this.data.bank_code,[t.kI.required,t.kI.maxLength(20)]),this.bank_name_fc=new t.p4(this.data.bank_name,[t.kI.required,t.kI.maxLength(100)]),this.ifsc_fc=new t.p4(this.data.ifsc,[t.kI.required,t.kI.maxLength(200)],[this.isBankBranchCodeExist.bind(this)]),this.name_fc=new t.p4(this.data.name,[t.kI.required,t.kI.maxLength(100)]),this.address_fc=new t.p4(this.data.address,[t.kI.maxLength(250)]),this.is_active_fc=new t.p4(this.data.is_active,[t.kI.required]),this.remarks_fc=new t.p4(this.data.remarks,[t.kI.maxLength(250)])}ngOnInit(){this.fg=new t.nJ({bank_code:this.bank_code_fc,bank_name:this.bank_name_fc,code:this.ifsc_fc,name:this.name_fc,address:this.address_fc,is_active:this.is_active_fc,remarks:this.remarks_fc})}onClickGetDetails(){const J=this.ifsc_fc.value;this.loading=!0,this.dataService.getBankBranchUsingAPI({code:J}).subscribe(it=>{if(this.loading=!1,"Bank/Brach details successfully received using API."===it.message){const _t=[];it.imps&&_t.push("IMPS"),it.neft&&_t.push("NEFT"),it.rtgs&&_t.push("RTGS"),it.upi&&_t.push("UPI");const ut={bank_code:it.bank_code,bank_name:it.bank,code:it.ifsc,name:it.branch,address:it.address,remarks:_t.join(", ")};this.fg.patchValue(ut)}else it.message&&(this.msg=it.message)})}save(){this.msg=null,this.fg.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{if(this.fg.invalid)return void(this.msg="Form seems incomplete. Please check and submit again.");const J=Object.assign({},this.fg.value);this.data&&(J.ifsc=this.data.ifsc),this.loading=!0,this.dataService.saveBankBranch(J).subscribe(it=>{this.loading=!1,"Bank/Branch saved successfully."==it.message&&(it.ifsc&&(J.ifsc=it.ifsc),it.bank_code&&(J.bank_code=it.bank_code),this.dialogRef.close(J))})},100)}cancel(){this.dialogRef.close()}}return u.\u0275fac=function(J){return new(J||u)(l.Y36(c.D),l.Y36(a.WI),l.Y36(a.so))},u.\u0275cmp=l.Xpm({type:u,selectors:[["ng-component"]],decls:1,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"mb-4"],["fxLayout","column"],["fxLayout","row","fxLayoutGap","10px"],["fxFlex","150px"],["type","text","required","","matInput","","maxlength","20",3,"formControl"],[4,"ngIf"],["fxFlex",""],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["fxFlex","100px"],["type","text","required","","matInput","","maxlength","100",3,"formControl"],["type","text","required","","matInput","","maxlength","250",3,"formControl"],["fxLayout","row","fxLayoutGap","10px",2,"padding-bottom","10px"],[3,"formControl"],["rows","2","matInput","","maxlength","250","autocomplete","on",3,"formControl"],["align","end"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["type","button","mat-raised-button","","color","warn","tabindex","-1",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["fxLayout","row","fxLayoutAlign","center center"],["diameter","40"]],template:function(J,it){1&J&&l.YNc(0,o,60,23,"form",0),2&J&&l.Q6J("ngIf",it.fg)},dependencies:[U.O5,t._Y,t.Fj,t.JJ,t.JL,t.Q7,t.nD,t.oH,t.sg,B.lW,R.oG,a.uh,a.xY,a.H8,w.TO,w.KE,w.hX,P.Nt,I.Ou,M.xw,M.SQ,M.Wh,M.yH],encapsulation:2}),u})()},6840:(lt,$,i)=>{"use strict";i.d($,{f:()=>B});var t=i(9211),a=i(4321),e=i(3097),s=i(3089),_=i(7804),V=i(8521),W=i(8977),Y=i(7333),N=i(9059),l=i(7018),c=i(4014);function U(R,w){if(1&R&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&R){const P=w.$implicit;e.Q6J("value",P.scheme_code),e.xp6(1),e.Oqu(P.scheme_name)}}let B=(()=>{class R{constructor(P,I,M,K){this.fb=P,this.dialogRef=I,this.dataService=M,this.data=K,this.genderForm=this.fb.group({allowed_schemes:[this.data.allowed_schemes,[t.kI.required]],remarks:[this.data.remarks,[t.kI.required]],code:[this.data.code]})}ngOnInit(){this.dataService.getSchemes({}).subscribe(P=>{this.schemeData=P.rows})}close(){this.dialogRef.close()}save(){let P=Object.assign({},this.genderForm.value);this.dataService.changeAllowedSchemesClaimGender(P).subscribe(I=>{"Allowed schemes are updated successfully."==I.message&&(alert("Details are Saved Successfully"),this.close())})}}return R.\u0275fac=function(P){return new(P||R)(e.Y36(t.qu),e.Y36(a.so),e.Y36(s.D),e.Y36(a.WI))},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-claim-gender-edit"]],decls:18,vars:2,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayoutGap","5px"],["fxFlex","100"],["formControlName","allowed_schemes","multiple",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","remarks","matInput","","placeholder","E.g. Enter your remarks here"],["fxLayoutAlign","end center","fxLayoutGap","5px"],["color","warn","mat-stroked-button","","type","button",3,"click"],["color","primary","mat-raised-button","","type","button",3,"click"],[3,"value"]],template:function(P,I){1&P&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Required Schemes"),e.qZA(),e.TgZ(6,"mat-select",4),e.YNc(7,U,2,2,"mat-option",5),e.qZA()()(),e.TgZ(8,"div")(9,"mat-form-field",3)(10,"mat-label"),e._uU(11,"Remarks"),e.qZA(),e._UZ(12,"input",6),e.qZA()(),e.TgZ(13,"div",7)(14,"button",8),e.NdJ("click",function(){return I.close()}),e._uU(15,"Cancel"),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){return I.save()}),e._uU(17,"Save"),e.qZA()()()()),2&P&&(e.xp6(1),e.Q6J("formGroup",I.genderForm),e.xp6(6),e.Q6J("ngForOf",I.schemeData))},dependencies:[_.sg,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,V.ey,W.lW,Y.KE,Y.hX,N.Nt,l.gD,c.xw,c.SQ,c.Wh,c.yH]}),R})()},2883:(lt,$,i)=>{"use strict";i.d($,{p:()=>E});var t=i(3329),a=i(9211),e=i(4321),s=i(3097),_=i(3089),V=i(4209),W=i(7804),Y=i(8977),N=i(1477),l=i(7333),c=i(9741),U=i(9059),B=i(7495),R=i(4014),w=i(6281);function P(h,b){1&h&&(s.TgZ(0,"mat-error"),s._uU(1," Registration Proof Number required "),s.TgZ(2,"sup"),s._uU(3,"*"),s.qZA()())}function I(h,b){1&h&&(s.TgZ(0,"mat-error"),s._uU(1," Issued Date is required "),s.TgZ(2,"sup"),s._uU(3,"*"),s.qZA()())}function M(h,b){if(1&h){const r=s.EpF();s.TgZ(0,"form",6)(1,"div",7)(2,"div",8)(3,"mat-form-field",9)(4,"mat-label"),s._uU(5,"Registration Proof Number."),s.qZA(),s._UZ(6,"input",10),s.YNc(7,P,4,0,"mat-error",11),s.qZA(),s.TgZ(8,"mat-form-field",9)(9,"mat-label"),s._uU(10,"Issued Date"),s.qZA(),s._UZ(11,"input",12)(12,"mat-datepicker-toggle",13)(13,"mat-datepicker",null,14),s.YNc(15,I,4,0,"mat-error",11),s.qZA()(),s.TgZ(16,"div",9)(17,"span",15),s._uU(18),s.qZA(),s.TgZ(19,"button",16),s.NdJ("click",function(){s.CHM(r);const n=s.MAs(23);return s.KtG(n.click())}),s.TgZ(20,"mat-icon"),s._uU(21,"attach_file"),s.qZA(),s.TgZ(22,"input",17,18),s.NdJ("change",function(n){s.CHM(r);const o=s.oxw();return s.KtG(o.onFileSelected(n))}),s.qZA()()()()()}if(2&h){const r=s.MAs(14),p=s.oxw();s.Q6J("formGroup",p.est_fun),s.xp6(7),s.Q6J("ngIf",p.est_fun.get("firm_reg_no").hasError("required")),s.xp6(4),s.Q6J("matDatepicker",r),s.xp6(1),s.Q6J("for",r),s.xp6(3),s.Q6J("ngIf",p.est_fun.get("firm_req_dt").hasError("required")),s.xp6(2),s.Q6J("ngClass",null!=p.filename?"file-found":"file-not-found"),s.xp6(1),s.hij(" ",p.filename||"Enclose the registration proof doc in .pdf format"," ")}}function K(h,b){if(1&h&&(s.TgZ(0,"mat-error"),s._UZ(1,"span",22),s.qZA()),2&h){const r=s.oxw(2);s.xp6(1),s.Q6J("innerHTML",r.err.alphanumeric(r.esic.get("esic_no")),s.oJD)}}function Z(h,b){if(1&h){const r=s.EpF();s.TgZ(0,"form",6)(1,"div",7)(2,"div",8)(3,"mat-form-field",19)(4,"mat-label"),s._uU(5,"Employee's State Insurance Corporation(ESIC) Number"),s.qZA(),s._UZ(6,"input",20),s.YNc(7,K,2,1,"mat-error",11),s.qZA()(),s.TgZ(8,"div",9)(9,"span",15),s._uU(10),s.qZA(),s.TgZ(11,"button",16),s.NdJ("click",function(){s.CHM(r);const n=s.MAs(15);return s.KtG(n.click())}),s.TgZ(12,"mat-icon"),s._uU(13,"attach_file"),s.qZA(),s.TgZ(14,"input",21,18),s.NdJ("change",function(n){s.CHM(r);const o=s.oxw();return s.KtG(o.onFileSelected(n))}),s.qZA()()()()()}if(2&h){const r=s.oxw();let p;s.Q6J("formGroup",r.esic),s.xp6(7),s.Q6J("ngIf",null==(p=r.esic.get("esic_no"))?null:p.invalid),s.xp6(2),s.Q6J("ngClass",null!=r.filename?"file-found":"file-not-found"),s.xp6(1),s.hij(" ",r.filename||"Enclose the ESIC document in .pdf format."," ")}}function k(h,b){if(1&h&&(s.TgZ(0,"mat-error"),s._UZ(1,"span",22),s.qZA()),2&h){const r=s.oxw(2);s.xp6(1),s.Q6J("innerHTML",r.err.alphanumeric(r.epfo.get("epfo_no")),s.oJD)}}function y(h,b){if(1&h){const r=s.EpF();s.TgZ(0,"form",6)(1,"div",7)(2,"div",8)(3,"mat-form-field",9)(4,"mat-label"),s._uU(5,"Employee's Provident Fund(EPFO) Number"),s.qZA(),s._UZ(6,"input",23),s.YNc(7,k,2,1,"mat-error",11),s.qZA()(),s.TgZ(8,"div",9)(9,"span",15),s._uU(10),s.qZA(),s.TgZ(11,"button",16),s.NdJ("click",function(){s.CHM(r);const n=s.MAs(15);return s.KtG(n.click())}),s.TgZ(12,"mat-icon"),s._uU(13,"attach_file"),s.qZA(),s.TgZ(14,"input",24,18),s.NdJ("change",function(n){s.CHM(r);const o=s.oxw();return s.KtG(o.onFileSelected(n))}),s.qZA()()()()()}if(2&h){const r=s.oxw();let p;s.Q6J("formGroup",r.epfo),s.xp6(7),s.Q6J("ngIf",null==(p=r.epfo.get("epfo_no"))?null:p.invalid),s.xp6(2),s.Q6J("ngClass",null!=r.filename?"file-found":"file-not-found"),s.xp6(1),s.hij(" ",r.filename||"Enclose the EPFO document in .pdf format."," ")}}function T(h,b){if(1&h){const r=s.EpF();s.TgZ(0,"form",6)(1,"div",7)(2,"div",8)(3,"mat-form-field",9)(4,"mat-label"),s._uU(5,"Electricity Board's Bills Number"),s.qZA(),s._UZ(6,"input",25),s.qZA()(),s.TgZ(7,"div",9)(8,"span",15),s._uU(9),s.qZA(),s.TgZ(10,"button",16),s.NdJ("click",function(){s.CHM(r);const n=s.MAs(14);return s.KtG(n.click())}),s.TgZ(11,"mat-icon"),s._uU(12,"attach_file"),s.qZA(),s.TgZ(13,"input",26,18),s.NdJ("change",function(n){s.CHM(r);const o=s.oxw();return s.KtG(o.onFileSelected(n))}),s.qZA()()()()()}if(2&h){const r=s.oxw();s.Q6J("formGroup",r.eb_det),s.xp6(8),s.Q6J("ngClass",null!=r.filename?"file-found":"file-not-found"),s.xp6(1),s.hij(" ",r.filename||"Enclose the TNEB document in .pdf format."," ")}}function O(h,b){1&h&&(s.TgZ(0,"div",27),s._UZ(1,"mat-spinner",28),s.qZA())}function A(h,b){if(1&h){const r=s.EpF();s.TgZ(0,"button",29),s.NdJ("click",function(){s.CHM(r);const n=s.oxw();return s.KtG(n.upload())}),s._uU(1,"Upload & Save details"),s.qZA()}if(2&h){const r=s.oxw();s.Q6J("disabled",r.loading||r.esic.invalid||r.epfo.invalid||r.est_fun.invalid)}}let E=(()=>{class h{constructor(r,p,n,o){this.ds=r,this.data=p,this.dialogRef=n,this.err=o,this.loading=!1,this.filename=null}ngOnInit(){this.user=this.ds.curr_user$.value,this.formInitialize(),this.data&&(this.firm_ests=this.data.firm_est,this.formExisting())}formInitialize(){this.esic=new a.cw({esic_no:new a.NI(null,[a.kI.pattern("^\\w{17}$"),a.kI.minLength(17)]),esic_doc:new a.NI(null)}),this.epfo=new a.cw({epfo_no:new a.NI(null,[a.kI.pattern("^\\w{26}$"),a.kI.minLength(26)]),epfo_doc:new a.NI(null)}),this.est_fun=new a.cw({firm_reg_no:new a.NI(null,[a.kI.pattern("^\\w{16}$"),a.kI.maxLength(50)]),firm_req_dt:new a.NI(null),firm_reg_doc:new a.NI(null)})}formExisting(){this.esic=new a.cw({esic_no:new a.NI(this.firm_ests?.esic_no,[a.kI.pattern("^\\w{17}$"),a.kI.minLength(17)]),esic_doc:new a.NI(this.firm_ests?.esic_doc)}),this.epfo=new a.cw({epfo_no:new a.NI(this.firm_ests?.epfo_no,[a.kI.pattern("^\\w{26}$"),a.kI.minLength(26)]),epfo_doc:new a.NI(this.firm_ests?.epfo_doc)}),this.est_fun=new a.cw({firm_reg_no:new a.NI(this.firm_ests?.firm_reg_no,[a.kI.pattern("^\\w{16}$"),a.kI.maxLength(50)]),firm_req_dt:new a.NI(this.firm_ests?.firm_req_dt),firm_reg_doc:new a.NI(this.firm_ests?.firm_reg_doc)})}onFileSelected(r){const p=r.target.files;if(p.length>0){const n=p[0];if("application/pdf"!=n.type)return void alert("Only Pdf Files are Allowed !");if(this.file=p[0],this.filename=n.name,!(n.size/1048576<=1))return void alert("File Size Not More Than 1MB");{let o=new FormData;o.append("file",n,n.name),o.append("id","2"),o.append("tz",(new Date).toISOString()),this.file_data=o}}}saveRegistrationEst(r){const p=Object.assign({},this.esic.value,this.epfo.value,this.est_fun.value);p.user_id=this.user.id,p.firm_id=this.firm_ests?.id,p.doc_type=this.data.type,p.file_name=this.file.name,p.file_type=this.file.type,p.file_size=Number((this.file.size/1024).toFixed(0)),p.storage_name=r,p.remarks=this.firm_ests?.remarks,this.ds.saveFirmAttachment(p).subscribe(n=>{"Attachment saved successfully."==n.message&&this.dialogRef.close(n)})}upload(){this.loading=!0,this.ds.Upload(this.file_data).subscribe(r=>{if(r.type===t.dt.UploadProgress&&(this.progressInfo=Math.round(100*r.loaded/r.total)),r.type==t.dt.Response){const p=Object.assign({},r.body);this.saveRegistrationEst(p.file_name)}this.loading=!1},r=>{alert("Please try again."),this.ngOnInit()})}cancel(){this.dialogRef.close()}}return h.\u0275fac=function(r){return new(r||h)(s.Y36(_.D),s.Y36(e.WI),s.Y36(e.so),s.Y36(V.E))},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-firm-documents"]],decls:13,vars:6,consts:[["mat-dialog-title","",1,"mb-4"],[3,"formGroup",4,"ngIf"],["align","end"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["mat-raised-button","","color","warn","tabindex","-1",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"formGroup"],["fxLayout","column"],["fxFlex","","fxLayout","row","fxLayoutGap","20px"],["fxFlex",""],["type","text","matInput","","required","","formControlName","firm_reg_no","placeholder","Registration Proof Number.","autocomplete","Off","maxlength","16"],[4,"ngIf"],["required","","matInput","","formControlName","firm_req_dt",3,"matDatepicker"],["matSuffix","",3,"for"],["picker7",""],[3,"ngClass"],["color","primary","mat-mini-fab","","type","button",3,"click"],["type","file","required","","accept","application/pdf","formControlName","firm_reg_doc",2,"display","none",3,"change"],["fileInput",""],["appearance","outline","fxFlex",""],["type","text","required","","matInput","","formControlName","esic_no","maxlength","17","placeholder","Employee's State Insurance Corporation(ESIC) Number","autocomplete","on"],["type","file","required","","accept","application/pdf","formControlName","esic_doc",2,"display","none",3,"change"],[3,"innerHTML"],["type","text","required","","matInput","","formControlName","epfo_no","maxlength","26","placeholder","Employee's Provident Fund(EPFO) Number","autocomplete","Off"],["type","file","accept","application/pdf","formControlName","epfo_doc","required","","autocomplete","Off",2,"display","none",3,"change"],["type","text","required","","matInput","","formControlName","tneb_no","maxlength","16"],["type","file","required","","accept","application/pdf","formControlName","tneb_doc",2,"display","none",3,"change"],["fxLayout","row","fxLayoutAlign","center center"],["diameter","40"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(r,p){1&r&&(s.TgZ(0,"div",0)(1,"b"),s._uU(2,"Documents"),s.qZA()(),s.TgZ(3,"mat-dialog-content"),s.YNc(4,M,24,7,"form",1),s.YNc(5,Z,16,4,"form",1),s.YNc(6,y,16,4,"form",1),s.YNc(7,T,15,3,"form",1),s.qZA(),s.TgZ(8,"mat-dialog-actions",2),s.YNc(9,O,2,0,"div",3),s.TgZ(10,"button",4),s.NdJ("click",function(){return p.cancel()}),s._uU(11,"Cancel"),s.qZA(),s.YNc(12,A,2,1,"button",5),s.qZA()),2&r&&(s.xp6(4),s.Q6J("ngIf","FIRM_DOC"==p.data.type),s.xp6(1),s.Q6J("ngIf","ESIC_DOC"==p.data.type),s.xp6(1),s.Q6J("ngIf","EPFO_DOC"==p.data.type),s.xp6(1),s.Q6J("ngIf","TNEB_DOC"==p.data.type),s.xp6(2),s.Q6J("ngIf",p.loading),s.xp6(3),s.Q6J("ngIf","add"!=p.data.action))},dependencies:[W.mk,W.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,Y.lW,N.Mq,N.hl,N.nW,e.uh,e.xY,e.H8,l.TO,l.KE,l.hX,l.R9,c.Hw,U.Nt,B.Ou,R.xw,R.SQ,R.Wh,R.yH,w.oO],styles:[".file-found[_ngcontent-%COMP%]{font-weight:700;color:green}.file-not-found[_ngcontent-%COMP%]{color:red}"]}),h})()},1621:(lt,$,i)=>{"use strict";i.d($,{t:()=>y});var t=i(9211),a=i(4321),e=i(5445),_=i(3097),V=i(3089),W=i(7804),Y=i(8521),N=i(8977),l=i(8578),c=i(7333),U=i(9741),B=i(9059),R=i(7018),w=i(4014),P=i(3936);function I(T,O){if(1&T&&(_.TgZ(0,"mat-option",14),_._uU(1),_.qZA()),2&T){const A=O.$implicit;_.Q6J("value",A.id),_.xp6(1),_.Oqu(A.ac_name)}}function M(T,O){if(1&T){const A=_.EpF();_.TgZ(0,"app-bank-details",15),_.NdJ("hideBankDetailsComponent",function(){_.CHM(A);const h=_.oxw();return _.KtG(h.changeAddBankStatus())}),_.qZA()}}function K(T,O){1&T&&(_.TgZ(0,"mat-error"),_._uU(1," Reference text should have minimum "),_.TgZ(2,"b"),_._uU(3,"5 characters"),_.qZA()())}function Z(T,O){1&T&&(_.TgZ(0,"mat-error"),_._uU(1," Reference text should not be greater than "),_.TgZ(2,"b"),_._uU(3,"500 characters"),_.qZA()())}function k(T,O){1&T&&(_.TgZ(0,"mat-error"),_._uU(1," Reference text is Required. "),_.qZA())}let y=(()=>{class T{constructor(A,E,h,b){this.dataService=A,this.fb=E,this.dialogRef=h,this.data=b,this.isLoading=!0,this.abStatus=!1,this.lwbBank=this.fb.group({ref_message:[null,[t.kI.required,t.kI.minLength(5),t.kI.maxLength(500)]],acc_id:[null,[t.kI.required]]})}ngOnInit(){this.getLwbBankAcc()}getLwbBankAcc(){this.dataService.getLwbBankAcc(null).subscribe(A=>{this.bank_ac=A.rows})}changeAddBankStatus(){this.abStatus=0==this.abStatus,this.getLwbBankAcc()}close(){this.dialogRef.close()}onSubmit(){let A={disb_claim:this.data,ref_message:this.lwbBank.get(["ref_message"]).value,acc_id:this.lwbBank.get(["acc_id"]).value};this.dataService.saveDisbursements(A).subscribe(E=>{"\u{1f44d}...Disbursements Are Saved."==E.message&&(alert("Disbursements Are Saved Successfully"),this.getDisbursementPdf(A))})}getDisbursementPdf(A){this.dataService.ClaimDisbursementGeneration(A).subscribe(E=>{this.isLoading=!1,e.saveAs(E,"ClaimDisbursement.pdf"),this.dialogRef.close()})}}return T.\u0275fac=function(A){return new(A||T)(_.Y36(V.D),_.Y36(t.qu),_.Y36(a.so),_.Y36(a.WI))},T.\u0275cmp=_.Xpm({type:T,selectors:[["app-lwb-bank-acc"]],decls:32,vars:7,consts:[[3,"formGroup"],["fxLayout","column","fxLayoutGap","20px"],["formControlName","acc_id"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["fxLayoutAlign","center center"],["color","accent","mat-stroked-button","",3,"click"],[3,"hideBankDetailsComponent",4,"ngIf"],["fxFlex","50"],["formControlName","ref_message","matInput","","placeholder","Branch of the Bank"],["matSuffix",""],[4,"ngIf"],["fxLayoutAlign","center center","fxLayoutGap","20px",2,"margin","15px"],["color","primary","mat-raised-button","","type","submit",3,"disabled","click"],[3,"value"],[3,"hideBankDetailsComponent"]],template:function(A,E){1&A&&(_.TgZ(0,"form",0)(1,"div",1)(2,"mat-form-field")(3,"mat-select",2)(4,"mat-option"),_._uU(5,"*None*"),_.qZA(),_.YNc(6,I,2,2,"mat-option",3),_.qZA(),_.TgZ(7,"mat-label"),_._uU(8," Select the Bank to Transfer. "),_.qZA()(),_.TgZ(9,"h3",4)(10,"b"),_._uU(11,"** OR **"),_.qZA()(),_.TgZ(12,"div",5)(13,"button",6),_.NdJ("click",function(){return E.changeAddBankStatus()}),_._uU(14,"Add Bank Details"),_.qZA()(),_._UZ(15,"mat-divider"),_.TgZ(16,"div"),_.YNc(17,M,1,0,"app-bank-details",7),_.qZA(),_.TgZ(18,"mat-form-field",8)(19,"mat-label"),_._uU(20,"Enter the Reference Text For Disbursement Letter."),_.qZA(),_._UZ(21,"input",9),_.TgZ(22,"mat-icon",10),_._uU(23,"article"),_.qZA(),_.YNc(24,K,4,0,"mat-error",11),_.YNc(25,Z,4,0,"mat-error",11),_.YNc(26,k,2,0,"mat-error",11),_.qZA()(),_.TgZ(27,"div",12)(28,"button",6),_.NdJ("click",function(){return E.close()}),_._uU(29,"Close"),_.qZA(),_.TgZ(30,"button",13),_.NdJ("click",function(){return E.onSubmit()}),_._uU(31," Submit & Generate Disbursement Copy "),_.qZA()()()),2&A&&(_.Q6J("formGroup",E.lwbBank),_.xp6(6),_.Q6J("ngForOf",E.bank_ac),_.xp6(11),_.Q6J("ngIf",E.abStatus),_.xp6(7),_.Q6J("ngIf",E.lwbBank.get("ref_message").hasError("minlength")),_.xp6(1),_.Q6J("ngIf",E.lwbBank.get("ref_message").hasError("maxlength")),_.xp6(1),_.Q6J("ngIf",E.lwbBank.get("ref_message").hasError("required")),_.xp6(4),_.Q6J("disabled",E.lwbBank.invalid))},dependencies:[W.sg,W.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,Y.ey,N.lW,l.d,c.TO,c.KE,c.hX,c.R9,U.Hw,B.Nt,R.gD,w.xw,w.SQ,w.Wh,w.yH,P.v]}),T})()},5506:(lt,$,i)=>{"use strict";i.d($,{x:()=>O});var t=i(4321),a=i(3097),e=i(9211),s=i(3089),_=i(7804),V=i(8977),W=i(7333),Y=i(9741),N=i(9059),l=i(613),c=i(4014),U=i(5172);function B(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Permanent Male Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function R(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Permanent Female Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function w(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Permanent Transgender Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function P(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Permanent disabled Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function I(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Not exceed than total permanent Employees"),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function M(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Contract Male Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function K(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Contract Female Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function Z(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Contract Transgender Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function k(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Number of Contract disabled Employees is required "),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function y(A,E){1&A&&(a.TgZ(0,"mat-error"),a._uU(1," Not exceed than total Contract Employees"),a.TgZ(2,"sup"),a._uU(3,"*"),a.qZA()())}function T(A,E){1&A&&(a.ynx(0),a._UZ(1,"app-pf-details"),a.BQk())}let O=(()=>{class A{constructor(h,b,r,p){this.fb=h,this.dataService=b,this.dialogRef=r,this.data=p,this.isLoading=!1,this.pe_max=0,this.ce_max=0,this.fg=this.fb.group({pe_male:[null],pe_female:[null],pe_trans:[null],pe_disabled:[null],ce_male:[null],ce_female:[null],ce_trans:[null],ce_disabled:[null]}),this.show_pf_dt=!1}get pe_max_emp(){return this.fg.get("pe_male").value+this.fg.get("pe_female").value+this.fg.get("pe_trans").value}ngOnInit(){this.data.emp_hist&&this.fg.setValue({pe_male:this.data.emp_hist.pe_male,pe_female:this.data.emp_hist.pe_female,pe_trans:this.data.emp_hist.pe_trans,pe_disabled:this.data.emp_hist.pe_disabled,ce_male:this.data.emp_hist.ce_male,ce_female:this.data.emp_hist.ce_female,ce_trans:this.data.emp_hist.ce_trans,ce_disabled:this.data.emp_hist.ce_disabled})}cancel(){this.dialogRef.close()}getMax(){this.pe_max=this.fg.get("pe_male").value+this.fg.get("pe_female").value+this.fg.get("pe_trans").value,this.ce_max=this.fg.get("ce_male").value+this.fg.get("ce_female").value+this.fg.get("ce_trans").value}get totalEmployee(){return this.fg.get("pe_male").value+this.fg.get("pe_female").value+this.fg.get("pe_trans").value+this.fg.get("ce_male").value+this.fg.get("ce_female").value+this.fg.get("ce_trans").value}SaveEmployeeHistoryEst(){let h={empe_ctb:this.data.emp_hist.empe_ctb,empr_ctb:this.data.emp_hist.empr_ctb,year:this.data.emp_hist.year,firm_id:this.data.firm_id,...this.fg.value};this.dataService.SaveEmployeeHistoryEst(h).subscribe(b=>{("Employee History saved successfully."==b.message||"Employee History update successfully."==b.message)&&this.dialogRef.close("result from the ")})}}return A.\u0275fac=function(h){return new(h||A)(a.Y36(e.qu),a.Y36(s.D),a.Y36(t.so),a.Y36(t.WI))},A.\u0275cmp=a.Xpm({type:A,selectors:[["app-payment-edit"]],decls:81,vars:17,consts:[["fxLayout","column",2,"margin","1%"],[3,"formGroup"],["fxLayoutGap","10px"],["fxFlex",""],["autocomplete","on","formControlName","pe_male","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["matPrefix",""],[4,"ngIf"],["autocomplete","Off","formControlName","pe_female","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","pe_trans","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","pe_disabled","matInput","","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","ce_male","matInput","","max","10000000","min","0","placeholder","E.g.4","required","","type","number"],[1,"mat-18"],["autocomplete","on","formControlName","ce_female","matInput","","max","1000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","ce_trans","matInput","","max","1000000","min","0","placeholder","E.g.4","required","","type","number"],["autocomplete","on","formControlName","ce_disabled","matInput","","min","0","placeholder","E.g.4","required","","type","number",3,"max"],["fxLayout","column"],[2,"cursor","pointer",3,"click"],["fxLayoutAlign","end","fxLayoutGap","10px"],["mat-raised-button","","type","reset"],["matTooltip","Please Provide a Valid Details.",3,"matTooltipDisabled"],["color","accent","mat-raised-button","","type","button",3,"disabled","click"]],template:function(h,b){if(1&h&&(a.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),a._uU(5,"Number of Permanent Male Employees"),a.qZA(),a._UZ(6,"input",4),a.TgZ(7,"mat-icon",5),a._uU(8,"boy"),a.qZA(),a.YNc(9,B,4,0,"mat-error",6),a.qZA(),a.TgZ(10,"mat-form-field",3)(11,"mat-label"),a._uU(12,"Number of Permanent Female Employees"),a.qZA(),a._UZ(13,"input",7),a.TgZ(14,"span",5)(15,"mat-icon"),a._uU(16,"girl"),a.qZA()(),a.YNc(17,R,4,0,"mat-error",6),a.qZA()(),a.TgZ(18,"div",2)(19,"mat-form-field",3)(20,"mat-label"),a._uU(21,"Number of Permanent Transgender"),a.qZA(),a._UZ(22,"input",8),a.TgZ(23,"span",5)(24,"mat-icon"),a._uU(25,"transgender"),a.qZA()(),a.YNc(26,w,4,0,"mat-error",6),a.qZA(),a.TgZ(27,"mat-form-field",3)(28,"mat-label"),a._uU(29,"Number of Disabled Employees in above Permanent employees"),a.qZA(),a._UZ(30,"input",9),a.TgZ(31,"span",5)(32,"mat-icon"),a._uU(33,"accessible"),a.qZA()(),a.YNc(34,P,4,0,"mat-error",6),a.YNc(35,I,4,0,"mat-error",6),a.qZA()(),a.TgZ(36,"div",2)(37,"mat-form-field",3)(38,"mat-label"),a._uU(39,"Number of Contract Male Employees"),a.qZA(),a._UZ(40,"input",10),a.TgZ(41,"span",5)(42,"mat-icon",11),a._uU(43,"boy"),a.qZA()(),a.YNc(44,M,4,0,"mat-error",6),a.qZA(),a.TgZ(45,"mat-form-field",3)(46,"mat-label"),a._uU(47,"Number of Contract Female Employees"),a.qZA(),a._UZ(48,"input",12),a.TgZ(49,"span",5)(50,"mat-icon",11),a._uU(51,"girl"),a.qZA()(),a.YNc(52,K,4,0,"mat-error",6),a.qZA()(),a.TgZ(53,"div",2)(54,"mat-form-field",3)(55,"mat-label"),a._uU(56,"Number of Contract Transgender"),a.qZA(),a._UZ(57,"input",13),a.TgZ(58,"span",5)(59,"mat-icon"),a._uU(60,"transgender"),a.qZA()(),a.YNc(61,Z,4,0,"mat-error",6),a.qZA(),a.TgZ(62,"mat-form-field",3)(63,"mat-label"),a._uU(64,"Number of Disabled Employees in above Contract employees"),a.qZA(),a._UZ(65,"input",14),a.TgZ(66,"span",5)(67,"mat-icon"),a._uU(68,"accessible"),a.qZA()(),a.YNc(69,k,4,0,"mat-error",6),a.YNc(70,y,4,0,"mat-error",6),a.qZA()(),a.TgZ(71,"div",15)(72,"a",16),a.NdJ("click",function(){return b.show_pf_dt=!b.show_pf_dt}),a._uU(73,"Click here to upload a CSV files for the employees."),a.qZA(),a.YNc(74,T,2,0,"ng-container",6),a.qZA(),a.TgZ(75,"div",17)(76,"button",18),a._uU(77,"Reset"),a.qZA(),a.TgZ(78,"div",19)(79,"button",20),a.NdJ("click",function(){return b.SaveEmployeeHistoryEst()}),a._uU(80," Save "),a.qZA()()()()()),2&h){let r,p,n,o,m,u,C,J,it,_t;a.xp6(1),a.Q6J("formGroup",b.fg),a.xp6(8),a.Q6J("ngIf",null==(r=b.fg.get("pe_male"))?null:r.hasError("required")),a.xp6(8),a.Q6J("ngIf",null==(p=b.fg.get("pe_female"))?null:p.hasError("required")),a.xp6(9),a.Q6J("ngIf",null==(n=b.fg.get("pe_trans"))?null:n.hasError("required")),a.xp6(8),a.Q6J("ngIf",null==(o=b.fg.get("pe_disabled"))?null:o.hasError("required")),a.xp6(1),a.Q6J("ngIf",null==(m=b.fg.get("pe_disabled"))?null:m.hasError("max")),a.xp6(9),a.Q6J("ngIf",null==(u=b.fg.get("ce_male"))?null:u.hasError("required")),a.xp6(8),a.Q6J("ngIf",null==(C=b.fg.get("ce_female"))?null:C.hasError("required")),a.xp6(9),a.Q6J("ngIf",null==(J=b.fg.get("ce_trans"))?null:J.hasError("required")),a.xp6(4),a.Q6J("max",b.fg.get("ce_male").value+b.fg.get("ce_female").value+b.fg.get("ce_trans").value),a.xp6(4),a.Q6J("ngIf",null==(it=b.fg.get("ce_disabled"))?null:it.hasError("required")),a.xp6(1),a.Q6J("ngIf",null==(_t=b.fg.get("ce_disabled"))?null:_t.hasError("max")),a.xp6(2),a.Udp("color",b.show_pf_dt?"grey":"blue"),a.xp6(2),a.Q6J("ngIf",b.show_pf_dt),a.xp6(4),a.Q6J("matTooltipDisabled",b.fg.valid),a.xp6(1),a.Q6J("disabled",b.isLoading||b.fg.invalid)}},dependencies:[_.O5,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.Q7,e.qQ,e.Fd,e.sg,e.u,V.lW,W.TO,W.KE,W.hX,W.qo,Y.Hw,N.Nt,l.gM,c.xw,c.SQ,c.Wh,c.yH,U.b]}),A})()},5172:(lt,$,i)=>{"use strict";i.d($,{b:()=>N});var t=i(3329),a=i(4321),e=i(3097),s=i(3089),_=i(8977),V=i(9741),W=i(4014),Y=i(7804);let N=(()=>{class l{constructor(U,B,R){this.ds=U,this.dialogRef=B,this.data=R,this.is_loading=!1,this.progressInfo=0}ngOnInit(){this.firm=this.ds.curr_firm_est$.value}onFileSelected(U){this.is_loading=!0;const B=U.target.files;let w,R=new FormData;if(B.length>0){if(w=B[0],"text/csv"!=w.type)return void alert("Only csv Files are Allowed !");if(!(w.size/1048576<=1))return void alert("File Size Not More Than 1MB");R.append("thumbnail",w),R.append("file",w,w.name),R.append("id","2"),R.append("tz",(new Date).toISOString()),R.append("firm_id",w,this.firm.id.toString())}this.firm.id?this.ds.savePfDetails(R).subscribe(P=>{try{if(P.type===t.dt.UploadProgress&&(this.progressInfo=Math.round(100*P.loaded/P.total)),P.type==t.dt.Response){const I=Object.assign({});I.firm_id=this.firm?.id,I.doc_type="PF_DOC",I.file_name=w.name,I.file_type=w.type,I.file_size=Number((w.size/1024).toFixed(0)),I.storage_name=P.body.file_name}this.dialogRef.close()}catch{alert("Please try again.")}}):alert("Document Uploading required firm id"),this.is_loading=!1}}return l.\u0275fac=function(U){return new(U||l)(e.Y36(s.D),e.Y36(a.so),e.Y36(a.WI))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-pf-details"]],decls:83,vars:0,consts:[["fxLayoutGap","10px"],[1,"font-bold"],[1,"p-4"],[1,"list-decimal"],["alt","PF details","height","127","ngSrc","/assets/ProvidentFundDetails.jpg","width","990"],["color","primary","mat-mini-fab","","type","button",3,"click"],["accept",".csv","type","file",2,"display","none",3,"change"],["fileInput",""]],template:function(U,B){if(1&U){const R=e.EpF();e.TgZ(0,"div",0)(1,"p",1),e._uU(2,"Please make sure the csv file satisfy the following condition."),e.qZA(),e.TgZ(3,"div",2)(4,"ol",3)(5,"li"),e._uU(6,"Only a spreadsheet file with "),e.TgZ(7,"b"),e._uU(8,".csv extension"),e.qZA(),e._uU(9," is allowed others will be rejected."),e.qZA(),e.TgZ(10,"li"),e._uU(11,"Only upto "),e.TgZ(12,"b"),e._uU(13,"7 columns"),e.qZA(),e._uU(14," are allowed."),e.qZA(),e.TgZ(15,"li"),e._uU(16,"Except date_of_leaving column all the columns must "),e.TgZ(17,"em"),e._uU(18,"not be"),e.qZA(),e._uU(19," empty."),e.qZA(),e.TgZ(20,"li")(21,"b"),e._uU(22,"UAN Number:"),e.qZA(),e._uU(23," Only an "),e.TgZ(24,"em"),e._uU(25,"unique 12 digit numeric"),e.qZA(),e._uU(26," values without any empty space is allowed."),e.qZA(),e.TgZ(27,"li")(28,"b"),e._uU(29,"Employee Name:"),e.qZA(),e._uU(30," Upto "),e.TgZ(31,"em"),e._uU(32,"50 Alphabetic Characters"),e.qZA(),e._uU(33," including "),e.TgZ(34,"em"),e._uU(35,". @ and [space]"),e.qZA(),e._uU(36," are allowed. "),e.qZA(),e.TgZ(37,"li")(38,"b"),e._uU(39,"Employee Contact No:"),e.qZA(),e._uU(40," Minimum of 10 to 12 digit numeric values are allowed."),e.qZA(),e.TgZ(41,"li")(42,"b"),e._uU(43,"Date of Joining:"),e.qZA(),e._uU(44," Must be in "),e.TgZ(45,"em"),e._uU(46,"mm/dd/yyyy (E.g: 12/25/2020)"),e.qZA(),e._uU(47," format & lesser than or equal to current date or date_of_leaving. "),e.qZA(),e.TgZ(48,"li")(49,"b"),e._uU(50,"Date of Leaving (Optional Field):"),e.qZA(),e._uU(51," Must be in "),e.TgZ(52,"em"),e._uU(53,"mm/dd/yyyy (E.g: 12/25/2020)"),e.qZA(),e._uU(54," format & greater than joining date & lesser than current date. "),e.qZA(),e.TgZ(55,"li")(56,"b"),e._uU(57,"Gender:"),e.qZA(),e._uU(58," Only a "),e.TgZ(59,"b"),e._uU(60,"M, F"),e.qZA(),e._uU(61," and "),e.TgZ(62,"b"),e._uU(63,"T"),e.qZA(),e._uU(64," characters are allowed."),e.qZA(),e.TgZ(65,"li")(66,"b"),e._uU(67,"Differently Abled:"),e.qZA(),e._uU(68," Must be "),e.TgZ(69,"b"),e._uU(70,"true"),e.qZA(),e._uU(71," or "),e.TgZ(72,"b"),e._uU(73,"false"),e.qZA(),e._uU(74,"."),e.qZA()(),e._UZ(75,"img",4),e.qZA(),e.TgZ(76,"div"),e._uU(77," Select the CSV File to upload "),e.TgZ(78,"button",5),e.NdJ("click",function(){e.CHM(R);const P=e.MAs(82);return e.KtG(P.click())}),e.TgZ(79,"mat-icon"),e._uU(80,"attach_file"),e.qZA(),e.TgZ(81,"input",6,7),e.NdJ("change",function(P){return B.onFileSelected(P)}),e.qZA()()()()}},dependencies:[_.lW,V.Hw,W.SQ,Y.Zd]}),l})()},6560:(lt,$,i)=>{"use strict";i.d($,{N:()=>R});var t=i(9211),a=i(4321),e=i(3097),s=i(3089),_=i(7804),V=i(8521),W=i(8977),Y=i(3259),N=i(7333),l=i(9059),c=i(7018),U=i(4014);function B(w,P){if(1&w&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&w){const I=P.$implicit;e.Q6J("value",I.scheme_code),e.xp6(1),e.Oqu(I.scheme_name)}}let R=(()=>{class w{constructor(I,M,K,Z){this.fb=I,this.dataService=M,this.dialogRef=K,this.data=Z,this.relForm=this.fb.group({rel_code:[this.data.code,[t.kI.required]],rel_name:[this.data.name,[t.kI.required]],rel_schemes:[this.data.allowed_schemes,[t.kI.required]],rel_remarks:[this.data.remarks,[t.kI.required]]})}ngOnInit(){this.dataService.getSchemes({}).subscribe(I=>{this.schemeData=I.rows})}close(){this.dialogRef.close()}saveRelStatus(){let I=Object.assign({},this.relForm.value);this.dataService.saveRelationship(I).subscribe(M=>M.message)}}return w.\u0275fac=function(I){return new(I||w)(e.Y36(t.qu),e.Y36(s.D),e.Y36(a.so),e.Y36(a.WI))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-relationship-edit"]],decls:27,vars:2,consts:[["fxLayout","column"],[3,"formGroup"],["fxLayout","row","fxLayoutGap","5px"],["fxFlex","50","fxLayoutGap","5px"],["formControlName","rel_code","matInput","","placeholder","E.g. GFA"],["fxFlex","50"],["formControlName","rel_name","matInput","","placeholder","E.g. Grand Father"],["fxLayoutGap","5px"],["fxFlex","100"],["formControlName","rel_schemes","multiple",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","rel_remarks","matInput","","placeholder","E.g. Enter your remarks here"],["fxLayoutAlign","end center","fxLayoutGap","5px"],["color","warn","mat-stroked-button","","type","button",3,"click"],["color","primary","mat-raised-button","","type","button",3,"click"],[3,"value"]],template:function(I,M){1&I&&(e.TgZ(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Relationship Code"),e.qZA(),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Relationship Name"),e.qZA(),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Required Schemes"),e.qZA(),e.TgZ(15,"mat-select",9),e.YNc(16,B,2,2,"mat-option",10),e.qZA()()(),e.TgZ(17,"div")(18,"mat-form-field",8)(19,"mat-label"),e._uU(20,"Remarks"),e.qZA(),e._UZ(21,"input",11),e.qZA()(),e.TgZ(22,"div",12)(23,"button",13),e.NdJ("click",function(){return M.close()}),e._uU(24,"Cancel"),e.qZA(),e.TgZ(25,"button",14),e.NdJ("click",function(){return M.saveRelStatus()}),e._uU(26,"Save"),e.qZA()()()()),2&I&&(e.xp6(1),e.Q6J("formGroup",M.relForm),e.xp6(15),e.Q6J("ngForOf",M.schemeData))},dependencies:[_.sg,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,V.ey,W.lW,Y.a8,N.KE,N.hX,l.Nt,c.gD,U.xw,U.SQ,U.Wh,U.yH]}),w})()},88:(lt,$,i)=>{"use strict";i.d($,{Z:()=>a});var t=i(3097);let a=(()=>{class e{}return e.\u0275fac=function(_){return new(_||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sdat-cert"]],decls:0,vars:0,template:function(_,V){}}),e})()},7999:(lt,$,i)=>{"use strict";i.d($,{L:()=>W});var t=i(4321),a=i(3097),e=i(3089),s=i(604),_=i(7804);function V(Y,N){if(1&Y&&a._UZ(0,"object",4),2&Y){const l=a.oxw();a.Q6J("data",l.trustedUrl,a.uOi)}}let W=(()=>{class Y{constructor(l,c,U,B){this.ds=l,this.data=c,this.dialogRef=U,this.sanitizer=B}ngOnInit(){this.data.storage_name&&this.getUploadedPdf(this.data.storage_name)}getUploadedPdf(l){this.ds.getUploadedPdf(l).subscribe(c=>{const U=URL.createObjectURL(c);this.trustedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U)})}}return Y.\u0275fac=function(l){return new(l||Y)(a.Y36(e.D),a.Y36(t.WI),a.Y36(t.so),a.Y36(s.H7))},Y.\u0275cmp=a.Xpm({type:Y,selectors:[["app-show-document"]],decls:4,vars:1,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content","panel","panel-default"],[1,"modal-body",2,"padding","0px","height","650px"],["width","100%","height","100%","type","application/pdf",3,"data",4,"ngIf"],["width","100%","height","100%","type","application/pdf",3,"data"]],template:function(l,c){1&l&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a.YNc(3,V,1,1,"object",3),a.qZA()()()),2&l&&(a.xp6(3),a.Q6J("ngIf",c.trustedUrl))},dependencies:[_.O5]}),Y})()},9062:(lt,$,i)=>{"use strict";i.d($,{V:()=>a});var t=i(3097);let a=(()=>{class e{transform(_,...V){switch(_){case"S":return"Success";case"F":return"Failed";case"I":return"Initiated";case"NB":return"Net Banking";case"t":case"true":return"Yes";case"f":case"false":return"No";default:return _}}}return e.\u0275fac=function(_){return new(_||e)},e.\u0275pipe=t.Yjl({name:"abr",type:e,pure:!0}),e})()},7958:(lt,$,i)=>{"use strict";i.d($,{B:()=>a});var t=i(3097);let a=(()=>{class e{transform(_,...V){return"M"==_?"Male":"T"==_?"Transgender":"Female"}}return e.\u0275fac=function(_){return new(_||e)},e.\u0275pipe=t.Yjl({name:"GENDER",type:e,pure:!0}),e})()},2839:(lt,$,i)=>{"use strict";i.d($,{m:()=>de});var t=i(3165),e=(i(2579),i(3097));i(3089),i(9211),i(7698),i(8977),i(3259),i(7333),i(9059),i(6672),i(4014),i(4285),i(3620),i(6088),i(2523),i(4931),i(7804),i(1477),i(9741),i(6848),i(2883),i(4321),i(7495),i(6074),i(7999),i(9266),i(7863),i(6098),i(4724),i(9346),i(8042),i(7233),i(363),i(3716),i(1344),i(1748),i(253),i(3936),i(6468),i(9103),i(3728),i(2090),i(2527),i(6560),i(1621),i(88),i(8449),i(6840),i(696),i(7958),i(5506),i(3220),i(9062),i(5172),i(8873),i(9390),i(6655);let de=(()=>{class F{}return F.\u0275fac=function(d){return new(d||F)},F.\u0275mod=e.oAB({type:F}),F.\u0275inj=e.cJS({imports:[t.V,t.V]}),F})()},5445:function(lt,$){var a;void 0!==(a=function(){"use strict";function s(l,c,U){var B=new XMLHttpRequest;B.open("GET",l),B.responseType="blob",B.onload=function(){N(B.response,c,U)},B.onerror=function(){console.error("could not download file")},B.send()}function _(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function V(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var W="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Y=W.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),N=W.saveAs||("object"!=typeof window||window!==W?function(){}:"download"in HTMLAnchorElement.prototype&&!Y?function(l,c,U){var B=W.URL||W.webkitURL,R=document.createElement("a");R.download=c=c||l.name||"download",R.rel="noopener","string"==typeof l?(R.href=l,R.origin===location.origin?V(R):_(R.href)?s(l,c,U):V(R,R.target="_blank")):(R.href=B.createObjectURL(l),setTimeout(function(){B.revokeObjectURL(R.href)},4e4),setTimeout(function(){V(R)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,U){if(c=c||l.name||"download","string"!=typeof l)navigator.msSaveOrOpenBlob(function e(l,c){return typeof c>"u"?c={autoBom:!1}:"object"!=typeof c&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\ufeff",l],{type:l.type}):l}(l,U),c);else if(_(l))s(l,c,U);else{var B=document.createElement("a");B.href=l,B.target="_blank",setTimeout(function(){V(B)})}}:function(l,c,U,B){if((B=B||open("","_blank"))&&(B.document.title=B.document.body.innerText="downloading..."),"string"==typeof l)return s(l,c,U);var R="application/octet-stream"===l.type,w=/constructor/i.test(W.HTMLElement)||W.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||R&&w||Y)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var Z=I.result;Z=P?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),B?B.location.href=Z:location=Z,B=null},I.readAsDataURL(l)}else{var M=W.URL||W.webkitURL,K=M.createObjectURL(l);B?B.location=K:location.href=K,B=null,setTimeout(function(){M.revokeObjectURL(K)},4e4)}});W.saveAs=N.saveAs=N,lt.exports=N}.apply($,[]))&&(lt.exports=a)}}]);